/* served 2021-03-03 09:29:17*/
/* gen time 2021-03-03 09:29:17*/
(function(){'use strict';const envVars={app_env:"prod",app_host:"https://sac.ayads.co/",app_debug:false,sublime_prefix:"ayads",delivery_url:"https://cdn.ayads.co/",ads_ayads_url:"https://ads.ayads.co/",sublime_url:"https://sac.ayads.co/sublime/",ayads_host:"ayads.co",ayads_url:"https://ayads.co",cookie_domain:".ayads.co",antenna_host:"antenna.ayads.co",antenna_url:"https://antenna.ayads.co",optchk_url:"https://optchk.ayads.co",xcookie_url:"https://optchk.ayads.co/?xc",geoloc_eeu_host:"geoworker.ayads.co",activate_dar:false}||{};const globalVars={css:{mskinzV2:"/** * Swiper 4.4.2 * Most modern mobile touch slider and framework with hardware accelerated transitions * http://www.idangero.us/swiper/ * * Copyright 2014-2018 Vladimir Kharlampidi * * Released under the MIT License * * Released on: December 18, 2018 */.swiper-container {    margin: 0 auto;    position: relative;    overflow: hidden;    list-style: none;    padding: 0;    z-index: 1}.swiper-container-no-flexbox .swiper-slide {    float: left}.swiper-container-vertical > .swiper-wrapper {    -webkit-box-orient: vertical;    -webkit-box-direction: normal;    -webkit-flex-direction: column;    -ms-flex-direction: column;    flex-direction: column}.swiper-wrapper {    position: relative;    width: 100%;    height: 100%;    z-index: 1;    display: -webkit-box;    display: -webkit-flex;    display: -ms-flexbox;    display: flex;    -webkit-transition-property: -webkit-transform;    transition-property: -webkit-transform;    -o-transition-property: transform;    transition-property: transform;    transition-property: transform, -webkit-transform;    -webkit-box-sizing: content-box;    box-sizing: content-box}.swiper-container-android .swiper-slide, .swiper-wrapper {    -webkit-transform: translate3d(0, 0, 0);    transform: translate3d(0, 0, 0)}.swiper-container-multirow > .swiper-wrapper {    -webkit-flex-wrap: wrap;    -ms-flex-wrap: wrap;    flex-wrap: wrap}.swiper-container-free-mode > .swiper-wrapper {    -webkit-transition-timing-function: ease-out;    -o-transition-timing-function: ease-out;    transition-timing-function: ease-out;    margin: 0 auto}.swiper-slide {    -webkit-flex-shrink: 0;    -ms-flex-negative: 0;    flex-shrink: 0;    width: 100%;    height: 100%;    position: relative;    -webkit-transition-property: -webkit-transform;    transition-property: -webkit-transform;    -o-transition-property: transform;    transition-property: transform;    transition-property: transform, -webkit-transform}.swiper-slide-invisible-blank {    visibility: hidden}.swiper-container-autoheight, .swiper-container-autoheight .swiper-slide {    height: auto}.swiper-container-autoheight .swiper-wrapper {    -webkit-box-align: start;    -webkit-align-items: flex-start;    -ms-flex-align: start;    align-items: flex-start;    -webkit-transition-property: height, -webkit-transform;    transition-property: height, -webkit-transform;    -o-transition-property: transform, height;    transition-property: transform, height;    transition-property: transform, height, -webkit-transform}.swiper-container-3d {    -webkit-perspective: 1200px;    perspective: 1200px}.swiper-container-3d .swiper-cube-shadow, .swiper-container-3d .swiper-slide, .swiper-container-3d .swiper-slide-shadow-bottom, .swiper-container-3d .swiper-slide-shadow-left, .swiper-container-3d .swiper-slide-shadow-right, .swiper-container-3d .swiper-slide-shadow-top, .swiper-container-3d .swiper-wrapper {    -webkit-transform-style: preserve-3d;    transform-style: preserve-3d}.swiper-container-3d .swiper-slide-shadow-bottom, .swiper-container-3d .swiper-slide-shadow-left, .swiper-container-3d .swiper-slide-shadow-right, .swiper-container-3d .swiper-slide-shadow-top {    position: absolute;    left: 0;    top: 0;    width: 100%;    height: 100%;    pointer-events: none;    z-index: 10}.swiper-container-3d .swiper-slide-shadow-left {    background-image: -webkit-gradient(linear, right top, left top, from(rgba(0, 0, 0, .5)), to(rgba(0, 0, 0, 0)));    background-image: -webkit-linear-gradient(right, rgba(0, 0, 0, .5), rgba(0, 0, 0, 0));    background-image: -o-linear-gradient(right, rgba(0, 0, 0, .5), rgba(0, 0, 0, 0));    background-image: linear-gradient(to left, rgba(0, 0, 0, .5), rgba(0, 0, 0, 0))}.swiper-container-3d .swiper-slide-shadow-right {    background-image: -webkit-gradient(linear, left top, right top, from(rgba(0, 0, 0, .5)), to(rgba(0, 0, 0, 0)));    background-image: -webkit-linear-gradient(left, rgba(0, 0, 0, .5), rgba(0, 0, 0, 0));    background-image: -o-linear-gradient(left, rgba(0, 0, 0, .5), rgba(0, 0, 0, 0));    background-image: linear-gradient(to right, rgba(0, 0, 0, .5), rgba(0, 0, 0, 0))}.swiper-container-3d .swiper-slide-shadow-top {    background-image: -webkit-gradient(linear, left bottom, left top, from(rgba(0, 0, 0, .5)), to(rgba(0, 0, 0, 0)));    background-image: -webkit-linear-gradient(bottom, rgba(0, 0, 0, .5), rgba(0, 0, 0, 0));    background-image: -o-linear-gradient(bottom, rgba(0, 0, 0, .5), rgba(0, 0, 0, 0));    background-image: linear-gradient(to top, rgba(0, 0, 0, .5), rgba(0, 0, 0, 0))}.swiper-container-3d .swiper-slide-shadow-bottom {    background-image: -webkit-gradient(linear, left top, left bottom, from(rgba(0, 0, 0, .5)), to(rgba(0, 0, 0, 0)));    background-image: -webkit-linear-gradient(top, rgba(0, 0, 0, .5), rgba(0, 0, 0, 0));    background-image: -o-linear-gradient(top, rgba(0, 0, 0, .5), rgba(0, 0, 0, 0));    background-image: linear-gradient(to bottom, rgba(0, 0, 0, .5), rgba(0, 0, 0, 0))}.swiper-container-wp8-horizontal, .swiper-container-wp8-horizontal > .swiper-wrapper {    -ms-touch-action: pan-y;    touch-action: pan-y}.swiper-container-wp8-vertical, .swiper-container-wp8-vertical > .swiper-wrapper {    -ms-touch-action: pan-x;    touch-action: pan-x}.swiper-container-coverflow .swiper-wrapper {    -ms-perspective: 1200px}#sublime-mobile-top {    overflow: hidden;}#sublime-mobile-top-container {    width: 100%;    left: 0;    top: 0;    position: absolute;    -webkit-transition: left .5s linear;    -moz-transition: left .5s linear;    -ms-transition: left .5s linear;    -o-transition: left .5s linear;    transition: left .5s linear;}.sublime-mobile-top-container-v {    background: #eee;    height: 100vh;    overflow-y: hidden;}#sublime-top-tooltip svg {    position: absolute;    top: 50%;    right: 6vw;    width: 4vw;    transform: translateY(-50%);    -webkit-transform: translateY(-50%);    -moz-transform: translateY(-50%);    -ms-transform: translateY(-50%);    -o-transform: translateY(-50%);}#sublime-position-indicator-block {    display: none;}#sublime-mobile-top-container.sublime-top-fixed {    top: 0 !important;    position: fixed !important;}#sublime-mobile-top-container .swiper-slide {    text-align: center;    font-size: 18px;    background: #fff;}#sublime-mobile-top-container .swiper-slide img {    width: 100%;}#sublime-mobile-top-container .swiper-slide {    background-color: transparent;    background-repeat: no-repeat;    background-position: top;}#sublime-mobile-top-container .sublime-panel-slide {    height: 100vh !important;    background-position: center;    background-size: cover;}#sublime-top-tooltip svg {    position: absolute;    top: 50%;    right: 6vw;    width: 4vw;    transform: translateY(-50%);    -webkit-transform: translateY(-50%);    -moz-transform: translateY(-50%);    -ms-transform: translateY(-50%);    -o-transform: translateY(-50%);}#sublime-panel-navbar {    position: fixed;    top: 0;    right: 0;    left: 0;    width: 100%;    background-color: rgba(0, 0, 0, 0.5);    height: 6.4vh;    line-height: 6.4vh;    vertical-align: middle;    text-align: center;    transition: opacity .3s linear;    -webkit-transition: opacity .3s linear;    -moz-transition: opacity .3s linear;    -ms-transition: opacity .3s linear;    -o-transition: opacity .3s linear;    opacity: 0;}#sublime-panel-navbar #sublime-mobile-panel-arrow {    position: absolute;    left: 2.5vw;    width: 5.4vw;    margin: 1.8vh 0;}#sublime-panel-navbar .sublime-brand {    max-height: 90%;    max-width: 80%;    width: auto;    height: auto;    position: absolute;    top: 0;    bottom: 0;    left: 0;    right: 0;    margin: auto;}#sublime-mobile-top-container {    overflow: hidden;}#sublime-mobile-top-close {    position: fixed;    width: 25px;    opacity: 0;    -webkit-transition: opacity .3s ease-in;    -moz-transition: opacity .3s ease-in;    -ms-transition: opacity .3s ease-in;    -o-transition: opacity .3s ease-in;    transition: opacity .3s ease-in;    height: 25px;    top: 4px;    right: 4px;    background-size: contain;    background-repeat: no-repeat;    background-image: url(https://cdn.ayads.co/creatives/commons/close-up.svg);}#sublime-mobile-top-timer {    position: fixed;    width: 6.4vw;    height: 6.4vw;    line-height: 6.4vw;    top: 1vh;    right: 1vh;    text-align: center;    border-radius: 50%;    opacity: 0;    -webkit-transition: opacity .3s ease-in;    -moz-transition: opacity .3s ease-in;    -ms-transition: opacity .3s ease-in;    -o-transition: opacity .3s ease-in;    transition: opacity .3s ease-in;    border: 1px solid white;    color: white;}#sublime-mobile-top-container .sublime-hidden, .sublime-hidden {    display: none;}#sublime-overlay {    position: fixed;    width: 100%;    height: 100%;    top: 0;    left: 0;    right: 0;    bottom: 0;    background-color: rgba(0, 0, 0, 0.5);    opacity: 1;    -webkit-transition: opacity .5s linear;    -moz-transition: opacity .5s linear;    -ms-transition: opacity .5s linear;    -o-transition: opacity .5s linear;    transition: opacity .5s linear;}#sublime-mobile-panel-arrow-container {    transition: margin .3s ease-in;    position: fixed !important;    right: 0;    transform: translateY(-50%);    -webkit-transform: translateY(-50%);    -moz-transform: translateY(-50%);    -ms-transform: translateY(-50%);    -o-transform: translateY(-50%);    margin-right: -80px;}#sublime-mobile-panel-arrow-container svg {    width: 76px;}#mobile-panel-top-arrow-container {    position: absolute;    right: 0;    z-index: 2;    top: 40px;    height: 50px;}#mobile-panel-top-arrow-container-img {    height: 100%;    width: inherit !important;}.swiper-button-next-v {    left: 30% !important;    bottom: 4vh !important;    right: auto !important;    top: auto !important;    -webkit-transform: rotate(90deg) translateX(-50%);    -moz-transform: rotate(90deg) translateX(-50%);    -ms-transform: rotate(90deg) translateX(-50%);    -o-transform: rotate(90deg) translateX(-50%);    transform: rotate(90deg) translateX(-50%);}.swiper-button-prev-v {    left: 70% !important;    top: 8vh !important;    right: auto !important;    bottom: auto !important;    -webkit-transform: rotate(-90deg) translateX(-50%);    -moz-transform: rotate(-90deg) translateX(-50%);    -ms-transform: rotate(-90deg) translateX(-50%);    -o-transform: rotate(-90deg) translateX(-50%);    transform: rotate(-90deg) translateX(-50%);}#sublime-container-swipe {    cursor: pointer;    background: white;    position: absolute;    bottom: 90px;    right: 1.2vh;    height: 30px;    text-align: left;    width: 180px;    z-index: 3;    border-radius: 15px;    overflow: hidden;    border: 1px solid rgb(211, 211, 211);    font-family: \'Arvo\', serif;    transition: width .15s linear;    -webkit-transition: width .15s linear;    -moz-transition: width .15s linear;    -ms-transition: width .15s linear;    -o-transition: width .15s linear;}#sublime-container-swipe #sublime-text-swipe {    line-height: 2.5;    margin-left: 10px;    font-size: 12px;    position: absolute;    text-transform: uppercase;    transition: opacity .1s linear;    -webkit-transition: opacity .1s linear;    -moz-transition: opacity .1s linear;    -ms-transition: opacity .1s linear;    -o-transition: opacity .1s linear;}#sublime-icon-swipe {    width: 40px !important;    position: absolute;    top: -5px;    right: 0;}#sublime-animation-3 {    width: 70px !important;    z-index: 3;    position: absolute;    bottom: 20px;    right: calc(50% - 55px);    -webkit-animation: tooltip-animation3 1.6s infinite linear; /* Safari 4.0 - 8.0 */    animation: tooltip-animation3 1.6s infinite linear;    opacity: 0.84;    transition: opacity 1s linear;    -webkit-transition: opacity 1s linear;    -moz-transition: opacity 1s linear;    -ms-transition: opacity 1s linear;    -o-transition: opacity 1s linear;}/* Safari 4.0 - 8.0 */@-webkit-keyframes tooltip-animation3 {    0% {        left: calc(50% - 55px);    }    50% {        left: calc(50% - 15px);    }    100% {        left: calc(50% - 55px);    }}@keyframes tooltip-animation3 {    0% {        left: calc(50% - 55px);    }    50% {        left: calc(50% - 15px);    }    100% {        left: calc(50% - 55px);    }}/* Footer */#sublime-mobile-bottom-container {    background-color: rgb(255, 255, 255);    width: 100%;    position: absolute;    left: 0;    -webkit-transform: translate3d(0, 200px, 0);    -moz-transform: translate3d(0, 200px, 0);    -ms-transform: translate3d(0, 200px, 0);    -o-transform: translate3d(0, 200px, 0);    transform: translate3d(0, 200px, 0);    -webkit-transition: -webkit-transform .3s ease;    -moz-transition: -moz-transform .3s ease;    -ms-transition: -ms-transform .3s ease;    transition: transform .3s ease;}#sublime-mobile-bottom-container img {    width: 100%;}#sublime-mobile-bottom-container.sublime-fixed-footer {    position: fixed !important;    left: 0;    bottom: 0 !important;    width: 100%;    z-index: 996;}#sublime-top-tooltip {    height: 100%;    line-height: 100%;    width: 16vw;    z-index: 3;    float: right;    position: absolute;    right: -16vw;    top: 0;    background-color: rgba(0, 0, 0, 0.35);    -webkit-transition: right .5s linear;    -moz-transition: right .5s linear;    -ms-transition: right .5s linear;    -o-transition: right .5s linear;    transition: right .5s linear;}.bounce-out-right {    -webkit-animation: bounce-out-right 2.5s both;    animation: bounce-out-right 2.5s both;}@-webkit-keyframes bounce-out-right {    0% {        -webkit-transform: translateX(0);        transform: translateX(0);        -webkit-animation-timing-function: ease-in;        animation-timing-function: ease-in;    }    15% {        -webkit-transform: translateX(-16vw);        transform: translateX(-16vw);        -webkit-animation-timing-function: ease-out;        animation-timing-function: ease-out;    }    25% {        -webkit-transform: translateX(-14vw);        transform: translateX(-14vw);        -webkit-animation-timing-function: ease-in;        animation-timing-function: ease-in;    }    35% {        -webkit-transform: translateX(-16vw);        transform: translateX(-16vw);        -webkit-animation-timing-function: ease-out;        animation-timing-function: ease-out;    }    45% {        -webkit-transform: translateX(-15vw);        transform: translateX(-15vw);        -webkit-animation-timing-function: ease-in;        animation-timing-function: ease-in;    }    55% {        -webkit-transform: translateX(-16vw);        transform: translateX(-16vw);        -webkit-animation-timing-function: ease-out;        animation-timing-function: ease-out;    }    85% {        -webkit-transform: translateX(-16vw);        transform: translateX(-16vw);    }    100% {        -webkit-transform: translateX(0);        transform: translateX(0);        -webkit-animation-timing-function: ease-in;        animation-timing-function: ease-in;    }}@keyframes bounce-out-right {    0% {        -webkit-transform: translateX(0);        transform: translateX(0);        -webkit-animation-timing-function: ease-in;        animation-timing-function: ease-in;    }    15% {        -webkit-transform: translateX(-16vw);        transform: translateX(-16vw);        -webkit-animation-timing-function: ease-out;        animation-timing-function: ease-out;    }    25% {        -webkit-transform: translateX(-14vw);        transform: translateX(-14vw);        -webkit-animation-timing-function: ease-in;        animation-timing-function: ease-in;    }    35% {        -webkit-transform: translateX(-16vw);        transform: translateX(-16vw);        -webkit-animation-timing-function: ease-out;        animation-timing-function: ease-out;    }    45% {        -webkit-transform: translateX(-14vw);        transform: translateX(-14vw);        -webkit-animation-timing-function: ease-in;        animation-timing-function: ease-in;    }    55% {        -webkit-transform: translateX(-16vw);        transform: translateX(-16vw);        -webkit-animation-timing-function: ease-out;        animation-timing-function: ease-out;    }    85% {        -webkit-transform: translateX(-16vw);        transform: translateX(-16vw);    }    100% {        -webkit-transform: translateX(0);        transform: translateX(0);        -webkit-animation-timing-function: ease-in;        animation-timing-function: ease-in;    }}#animation4-images-container {    animation: animation4-image 5s infinite;    animation-delay: 1s;    transform-origin: center;}.animation4-image-copy {    position: absolute;    top: 0;    left: 100%;    margin-left: 7%;}#animation4-gesture {    position: absolute;    left: 50%;    width: 60px !important;    height: 83px;    bottom: -10px;    opacity: .7;    animation: animation4-gesture 5s infinite;    animation-delay: 1s;    transform: translate3d(100%, 100%, 0);    filter: drop-shadow(0 0 1px #000);}#animation4-arrow {    position: absolute;    right: -50px;    width: 50px !important;    top: calc(50% - 13px);    height: 26px;    animation: animation4-arrow 5s infinite;    animation-delay: 1s;    opacity: .7;    filter: drop-shadow(0 0 1px #000);}@keyframes animation4-image {    10% {        transform: none;    }    20% {        transform: scale(.9);    }    30% {        transform: translate3d(-50px, 0, 0) scale(.9)    }    43% {        transform: translate3d(-50px, 0, 0) scale(.9);    }    53% {        transform: translate3d(0, 0, 0) scale(.9);    }    63% {        transform: scale(1);    }}@keyframes animation4-gesture {    10% {        transform: translate3d(0, 0, 0);    }    20% {        transform: scale(.8);    }    30% {        transform: translate3d(-50px, 0, 0) scale(.8);    }    43% {        transform: translate3d(-50px, 0, 0) scale(.8);    }    53% {        transform: translate3d(0, 0, 0) scale(.8);        opacity: .7;    }    63% {        opacity: 0;    }    100% {        opacity: 0;    }}@keyframes animation4-arrow {    20% {        transform: translate3d(0, 0, 0);    }    30% {        transform: translate3d(-80px, 0, 0);    }    43% {        transform: translate3d(-80px, 0, 0);    }    53% {        transform: translate3d(0, 0, 0);    }}#panel-double-buffer-image {    position: fixed;    width: 100vh;    height: 100vh;    top: 0;    left: 0;    right: 0;    bottom: 0;    background-position: center;    background-size: cover;}/* MSkinz Video */#sublime-mobile-video-container {    width: 100% !important;    height: auto !important;    position: absolute;    top: 0;    line-height: 0;}.sublime-mobile-video-mute {    position: absolute;    width: 23px;    height: 23px;    bottom: 4px;    left: 4px;    z-index: 4;    background-size: contain;    background-repeat: no-repeat;}.mute-animation {    animation-name: muteScale;    animation-duration: 1s;    animation-iteration-count: infinite;    animation-direction: alternate;    animation-timing-function: ease-in-out;}.sublime-mobile-video-mute.muteOff {    background-image: url(https://cdn.ayads.co/creatives/commons/volume-up.svg);}.sublime-mobile-video-mute.muteOn {    background-image: url(https://cdn.ayads.co/creatives/commons/volume-down.svg);}@keyframes muteScale {    0% {        transform: scale(1);    }    50% {        transform: scale(1);    }    100% {        transform: scale(1.1);    }}@keyframes countdownFixSafari {    0% {        transform: scale(1);    }    100% {        transform: scale(1);    }}.sublime-mobile-loading-bar {    position: absolute;    bottom: 0;    height: 3px;    width: 100%;    background-color: rgba(255, 255, 255);}.sublime-mobile-loading-bar-progress {    position: relative;    height: 3px;    width: 0%;    background-color: rgba(233, 83, 29);}.sublime-mobile-video-play-controls {    height:100%;    width:100%;    display:flex;    justify-content:center;    align-items:center;    background:no-repeat center;    position:absolute;    background-size:contain;    z-index:1;    bottom:0;}#sublime-mobile-video-buttons-play {    height:37px;    width:37px;    background-image:url(https://cdn.ayads.co/creatives/commons/icon-play.svg);}#play-video-pulsar{    position:absolute;    background:transparent;    border:1px solid white;    width:35px;    border-radius:50%;    height:35px;    z-index:5;    transform-origin:center;    animation-name:play-video-pulsar;    animation-duration:.5s;    animation-iteration-count:infinite;    animation-direction:alternate-reverse;    animation-timing-function:cubic-bezier(0.4,0,1,1);}@keyframes play-video-pulsar{    from {        transform:scale(1.5);        opacity:.2;    }    to {        transform:scale(1.2);        opacity:1;    }}#sublime-mobile-video-overlay {    height:100%;    width:100%;    position:inherit;    top:0;    left:0;    background-color:black;    opacity:0.5;}/* Move video on the panel when it open when class sublime-video-panel-open is set top the top container *//* This CSS replace the .appendChild() we did on the video container */#sublime-mobile-top-container.sublime-video-panel-open {    transform: none !important; /* Cancel 3d slide effects from swiper.js */}#sublime-mobile-top-container.sublime-video-panel-open #sublime-mobile-video-container {    top: 6.4vh; /* Margin of the return button */    left: 100% !important; /* This push the video to the left on the other panel */}#sublime-mobile-top-container.sublime-video-panel-open #sublime-mobile-panel-container {    z-index: -1 !important; /* Pass panel container behind video top */}#sublime-mobile-top-container.sublime-video-panel-open #sublime-mobile-top {    transform: none !important; /* Cancel 3d slide effects from swiper.js */    overflow: visible !important; /* Force video top to be print on the screen */}#sublime-mobile-top-container.sublime-video-panel-open #sublime-top-tooltip,#sublime-mobile-top-container.sublime-video-panel-open #sublime-mobile-top-image-copy {    display: none; /* Since we print the overflow of the mobile top on the panel, we need to hide the slide tooltip AND the copy image (DL-1168) */}.mksinz-simple #sublime-mobile-video-container video {  width: 100% !important;}.mksinz-simple .sublime-panel-slide #sublime-mobile-video-container {  transform: translateY(-50%);  top: 50% !important;}#sublime-fullscreen-icon {    filter: invert(100%);    height: 1.2em !important;    width: auto !important;    vertical-align: middle;    margin-top: -0.2em !important;}#sublime-fullscreen {    position: absolute;    top: calc(50vh + 50vw + 20px);    color: #FFF;    left: 50%;    transform: translateX(-50%);    border: 1px solid #FFF;    border-radius: 5px;    padding: 8px;    white-space: nowrap;    font-size: 4vw !important;}#sublime-fullscreen:active {    background: rgba(255, 255, 255, .3)}#ayads-html.sublime-landscape-display {    display: block !important}#sublime-mobile-video-bg {    position: absolute;    z-index: -1;    width: 100%;    left: 0;    top: 0;    height: 100%;    object-fit: cover;    filter: blur(5px);}.sublime-video-bottom-hidden {    display: none !important; }",toproll:"#sublime-container {    position: relative;    box-sizing: border-box;}/* UTILS * ----------------------------------------------- */#sublime-container .sublime--hide {    display: none;}/* MAIN CONTAINERS * ----------------------------------------------- *//* Main wrapper for our video format */#sublime-video-wrapper {    position: fixed;    z-index: 2147483647; /* max z-index possible */    top: 0;    left: 0;    height: 100%;    width: 100%;    box-sizing: border-box;    overflow: hidden;    /* Video background is transparent so we need a background color behind.       We should consider using the color defined within the ad format. */    background-color: #000;}/* Main video element */#sublime-video {    height: 100%;    width: 100%;}/* Main video background element */#sublime-video-background {    position:absolute;    z-index: -1;    filter: blur(2px);}/* UI CONTAINER * ----------------------------------------------- */#sublime-video-overlay {    position:absolute;    top:0;    left:0;    z-index: 2;    width: 100%;    height: 100%;    box-sizing: border-box;    transition: background-color .8s;}/* Visual effects for all icons */#sublime-video-overlay .sublime--icon {    filter: drop-shadow(0 0 5px #000);    width: 5vmin;    height: 5vmin;}/* In expand mode, our icons are slightly larger */.sublime-toproll-expand #sublime-video-overlay .sublime--icon {    width: 6vmin;    height: 6vmin;}/* In large desktop screen, we make our UI smaller */@media (orientation: landscape) and (min-width: 1200px) {    #sublime-video-overlay .sublime--icon {        width: 2.5vmin;        height: 2.5vmin;    }    .sublime-toproll-expand #sublime-video-overlay .sublime--icon {        width: 3vmin;        height: 3vmin;    }}/* Class for the basic positionning of our icons. * Multiple icons are not yet defined, but a transformation * with a combinator selector (+ or ~) looks like a good candidate */#sublime-video-overlay .sublime--top { top: 2vmin; }#sublime-video-overlay .sublime--bottom { bottom: 2vmin; }#sublime-video-overlay .sublime--left { left: 2vmin; }#sublime-video-overlay .sublime--right { right: 2vmin; }.sublime-toproll-expand #sublime-video-overlay .sublime--top { top: 2vmax; }.sublime-toproll-expand #sublime-video-overlay .sublime--bottom { bottom: 2vmax; }.sublime-toproll-expand #sublime-video-overlay .sublime--left { left: 2vmax; }.sublime-toproll-expand #sublime-video-overlay .sublime--right { right: 2vmax; }@media (orientation: landscape) and (min-width: 1200px) {    #sublime-video-overlay .sublime--top { top: 1.5vmin; }    #sublime-video-overlay .sublime--bottom { bottom: 1.5vmin; }    #sublime-video-overlay .sublime--left { left: 1.5vmin; }    #sublime-video-overlay .sublime--right { right: 1.5vmin; }    .sublime-toproll-expand #sublime-video-overlay .sublime--top { top: 1.5vmin; }    .sublime-toproll-expand #sublime-video-overlay .sublime--bottom { bottom: 1.5vmin; }    .sublime-toproll-expand #sublime-video-overlay .sublime--left { left: 1.5vmin; }    .sublime-toproll-expand #sublime-video-overlay .sublime--right { right: 1.5vmin; }}.sublime--video-complete #sublime-video-overlay {    background-color: rgba(0, 0, 0, .5);}/* SPECIFIC ICONS DEFINITION * ----------------------------------------------- *//* Sound icon *//* recalculate the specificity when we have the Toproll class */#sublime-ui-sound {    position: absolute;    background: url(\'data:image/svg+xml,<svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 192 192\"><path fill=\"white\" d=\"M154.9,96a39.26,39.26,0,0,0-21.81-35.16v70.24A39,39,0,0,0,154.9,96ZM37.1,78.59V113.5a8.74,8.74,0,0,0,8.72,8.72H72l28.71,28.71a8.75,8.75,0,0,0,14.92-6.19V47.26a8.75,8.75,0,0,0-14.92-6.19L72,69.86H45.82A8.75,8.75,0,0,0,37.1,78.59Z\"/></svg>\');    background-size: contain;    opacity: .8;    /* Icons are defined as NOT visible; their specific visibility    according to UI state is defined in the ad-hoc section */    display: none;}#sublime-ui-sound.sublime--muted {    background-image: url(\'data:image/svg+xml,<svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 192 192\"><path fill=\"white\" d=\"M37.10787,78.59l0,34.91a8.75,8.75 0 0 0 8.73,8.72l26.18,0l28.71,28.71a8.75,8.75 0 0 0 14.92,-6.19l0,-97.48a8.75,8.75 0 0 0 -14.92,-6.19l-28.71,28.79l-26.18,0a8.76,8.76 0 0 0 -8.73,8.73Z\"/></svg>\');}/* Close icon */#sublime-ui-close {    position: absolute;    z-index: 2;    font: 4vmin/1.5 sans-serif;    text-align: center;    color: white;}.sublime-toproll-expand #sublime-ui-close {    font-size: 6vmin; /* font-size needs to be adjust to fit the icon size */}@media (orientation: landscape) and (min-width: 1200px) {    /* font-size needs to be adjust to fit the icon size */    #sublime-ui-close { font-size: 2.5vmin; }    .sublime-toproll-expand #sublime-ui-close { font-size: 3vmin; }}#sublime-ui-close.sublime--icon-cross {    background-image: url(\'data:image/svg+xml,<svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 192 192\"><path fill=\"white\" d=\"M134.79,150.3,96,111.51,57.21,150.3A11,11,0,1,1,41.7,134.79L80.49,96,41.7,57.21A11,11,0,1,1,57.21,41.7L96,80.49,134.79,41.7A11,11,0,1,1,150.3,57.21L111.51,96l38.79,38.79a11,11,0,1,1-15.51,15.51Z\"/></svg>\');}/* Collapse icon */#sublime-ui-collapse {    position:absolute;    background: url(\'data:image/svg+xml,<svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 192 192\"><path fill=\"white\" d=\"M46.71,128.86H63.14v16.43a8.22,8.22,0,0,0,16.43,0V120.64a8.23,8.23,0,0,0-8.21-8.21H46.71a8.22,8.22,0,0,0,0,16.43ZM63.14,63.14H46.71a8.22,8.22,0,0,0,0,16.43H71.36a8.23,8.23,0,0,0,8.21-8.21V46.71a8.22,8.22,0,0,0-16.43,0Zm57.5,90.36a8.24,8.24,0,0,0,8.22-8.21V128.86h16.43a8.22,8.22,0,0,0,0-16.43H120.64a8.23,8.23,0,0,0-8.21,8.21v24.65A8.23,8.23,0,0,0,120.64,153.5Zm8.22-90.36V46.71a8.22,8.22,0,0,0-16.43,0V71.36a8.23,8.23,0,0,0,8.21,8.21h24.65a8.22,8.22,0,0,0,0-16.43Z\" /></svg>\');    background-size: contain;    /* Icons are defined as NOT visible; their specific visibility    according to UI state is defined in the ad-hoc section */    display: none;}/* CTA button (not a generic icon) */#sublime-ui-cta {    position: absolute;    bottom: 0;    left: 0;    /* Icons are defined as NOT visible; their specific visibility    according to UI state is defined in the ad-hoc section */    display: none; /* display: flex; */    align-items: center;    padding: 0.1em 1.5em 0 .7em;    border-radius: 8em;    border: 2px solid #fff;    font: bold 12px/2 sans-serif;    text-transform: uppercase;    white-space: nowrap;    color: #eee;}#sublime-ui-cta::before {    content: \'\';    display: block;    height: 3em;    width: 3em;    margin: 0;    border-radius: 3em;    background-image: url(\'data:image/svg+xml,<svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 192 192\"><path fill=\"white\" d=\"m134.3,140.7h-76.7a6.4,6.4,0,0,1-6.4-6.4v-76.7a6.4,6.4,0,0,1,6.4-6.4h31.9a6.4,6.4,0,0,0,0-12.8h-38.3a12.8,12.8,0,0,0-12.8,12.8v89.4a12.8,12.8,0,0,0,12.8,12.8h89.4a12.8,12.8,0,0,0,12.8-12.8v-38.3a6.4,6.4,0,1,0-12.8,0v31.9a6.4,6.4,0,0,1-6.4,6.4zm-25.5-95.8a6.4,6.4,0,0,0,6.4,6.4h16.5l-58.3,58.3a6.4,6.4,0,1,0,9,9l58.3-58.3v16.6a6.4,6.4,0,1,0,12.8,0v-31.9a6.4,6.4,0,0,0-6.4-6.4h-31.9a6.4,6.4,0,0,0-6.4,6.4z\"/></svg>\');    background-repeat: no-repeat;    background-size: 1.9em;    background-position: center;}/* In desktop mode we want a larger CTA */@media (orientation: landscape) and (min-width: 1200px) {    #sublime-ui-cta { font-size: 24px; }}/* recalculate the specificity when we have the Toproll class */#sublime-ui-touchscroll {    position: absolute;    filter: drop-shadow(0 0 10px rgba(0,0,0,.45));    width: 10vmin;    height: 15vmin;    transform: translate(-2vmin, 2vmin);    background-image: url(\'data:image/svg+xml,\    <svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"-96 -288 384 576\">\        <style>\        @keyframes arrowDown {\            0% { opacity: 0; transform: translateY(-60%) scale(1); }\            4.5% { opacity: 1; transform: translateY(0) scale(1); }\            10% { opacity: 1; transform: translateY(0) scale(.8); }\            12% { opacity: 0; transform: translateY(0) scale(.8); }\            15% { opacity: 0; transform: translateY(-60%) scale(1); }\            19.5% { opacity: 1; transform: translateY(0) scale(1); }\            25% { opacity: 1; transform: translateY(0) scale(.8); }\            27% { opacity: 0; transform: translateY(0) scale(.8); }\            100% { opacity: 0; transform: translateY(0) scale(.8); }\        }\        @keyframes clickBump {\            0% { opacity: 0; transform: scale(1); }\            4.5% { opacity: 0; transform: scale(1); }\            6.5% { opacity: 1; transform: scale(1.5);}\            9% { opacity: 0; transform: scale(2); }\            15% { opacity: 0; transform: scale(1); }\            19.5% { opacity: 0; transform: scale(1); }\            21.5% { opacity: 1; }\            24% { opacity: 0; transform: scale(2); }\            100% { opacity: 0; transform: scale(2); }\        }\        @keyframes expandFade {\            0% { opacity: 0; transform: scale(.5); }\            5.5% { opacity: 0; transform: scale(.5); }\            12% { opacity: 1; transform: scale(1); }\            14.9% { opacity: 1; transform: scale(1); }\            15% { opacity: 0; transform: scale(.5); }\            20.5% { opacity: 0; transform: scale(.5); }\            27% { opacity: 1; transform: scale(1); }\            90% { opacity: 0; transform: scale(1); }\            100% { opacity: 0; transform: scale(1); }\        }\        .arrow, .bump, .expand {\            opacity: 0;\            transform-origin: 96px 96px;\        }\        .arrow { animation: arrowDown 8s linear infinite; }\        .bump { animation: clickBump 8s linear infinite; }\        .expand { animation: expandFade 8s linear infinite; }\        </style>\        <g class=\"arrow\">\            <circle cx=\"96\" cy=\"96\" r=\"96\" fill=\"white\"/>\            <path transform=\"rotate(-90,96,96)\" d=\"M126.65,40.75a7.65,7.65,0,0,0-10.84,0L64.88,91.68a6.1,6.1,0,0,0,0,8.64l50.93,50.93a7.67,7.67,0,0,0,10.84-10.85L82.28,96l44.43-44.43A7.63,7.63,0,0,0,126.65,40.75Z\" />\        </g>\        <g class=\"bump\">\            <circle cx=\"96\" cy=\"96\" r=\"96\" fill=\"none\" stroke=\"white\" stroke-width=\"4\" />\        </g>\        <g class=\"expand\">\            <circle cx=\"96\" cy=\"96\" r=\"96\" fill=\"white\"/>\            <path d=\"M46.71,112.43a8.23,8.23,0,0,0-8.21,8.21v24.65a8.24,8.24,0,0,0,8.21,8.21H71.36a8.22,8.22,0,0,0,0-16.43H54.93V120.64A8.24,8.24,0,0,0,46.71,112.43Zm0-32.86a8.24,8.24,0,0,0,8.22-8.21V54.93H71.36a8.22,8.22,0,0,0,0-16.43H46.71a8.24,8.24,0,0,0-8.21,8.21V71.36A8.23,8.23,0,0,0,46.71,79.57Zm90.36,57.5H120.64a8.22,8.22,0,0,0,0,16.43h24.65a8.24,8.24,0,0,0,8.21-8.21V120.64a8.22,8.22,0,0,0-16.43,0ZM112.43,46.71a8.24,8.24,0,0,0,8.21,8.22h16.43V71.36a8.22,8.22,0,0,0,16.43,0V46.71a8.24,8.24,0,0,0-8.21-8.21H120.64A8.23,8.23,0,0,0,112.43,46.71Z\" />\        </g>\    </svg>\');    /* Icons are defined as NOT visible; their specific visibility    according to UI state is defined in the ad-hoc section */    display: none;}/* In large desktop screen, we make our UI smaller */@media (orientation: landscape) and (min-width: 1200px) {    #sublime-ui-touchscroll {        width: 5vmin;        height: 7.5vmin;        transform: translate(-1vmin, 1vmin);    }}/* Replay icon */#sublime-ui-replay {    position: absolute;    background-image: url(\'data:image/svg+xml,<svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 192 192\"><path fill=\"white\" d=\"M50.7,50.38a7.27,7.27,0,0,0-12.38,5.21V81.65c0,3.9,3.26,7.16,7.82,7.16h25.4a7.27,7.27,0,0,0,5.21-12.38L65.68,65.36a43.54,43.54,0,0,1,73,40.39c-3.25,15.63-16.28,28.67-32.57,32.57-21.5,4.56-41-6.51-48.86-24.1a7.16,7.16,0,0,0-6.51-3.91c-5.22,0-8.47,5.86-6.52,10.42,9.12,19.54,29.32,32.58,52.12,32.58,33.87,0,61.23-29.32,57.33-63.85-3.26-26.71-24.76-48.2-51.47-50.81-18.24-2-34.53,4.56-46.9,16.29Z\" /></svg>\');    background-size: contain;    /* Icons are defined as NOT visible; their specific visibility    according to UI state is defined in the ad-hoc section */    display: none;}/* Icons\' visibility states *//* Any (loaded) toproll states except expand state *//* Explicit \"body\" selector to not have :not() matching another touchscroll ancestor */body:not(.sublime-toproll-loading):not(.sublime-toproll-expand):not(.sublime--video-complete) #sublime-ui-touchscroll,/* In expand state */.sublime-toproll-expand #sublime-ui-collapse,.sublime-toproll-expand:not(.sublime-toproll-loading):not(.sublime--video-complete) #sublime-ui-sound,/* When this is visible #sublime-ui-touchscroll & #sublime-ui-sound are not */.sublime--video-complete #sublime-ui-replay {    display: block;}/* CTA is only displayed when video is complete */.sublime-toproll-full.sublime--video-complete #sublime-ui-cta,.sublime-toproll-expand-transition.sublime--video-complete #sublime-ui-cta,.sublime-toproll-expand.sublime--video-complete #sublime-ui-cta {    display: flex;}"},eventCollectorEndpoint:"https://event-collector-staging.ayads.co/collect",eventEmitterSampling:0,mode:"wf",versionId:20210301151955,zone:{id:347,site_id:259,main_category_id:81,sub_category_id:36,html:"<style>\niframe[id^=\"ayads-pull-creative-\"], #Footeo_ATF_1x1 {display:none !important;}\n#background{background:none !important}\n.nav-drawer-container{display:none  !important}\n#content{background-color: white !important;margin-top: 0px !important;}\n#blockadd{width: 1010px !important;background-color: white !important;display: none !important;}\n#content .container{width: 1010px !important;}\n</style>\n\n<script>\nfunction init(){\n    /* Init variables */\n    var html = sublime.window.document.querySelector(\'html\'),\n        body = sublime.window.document.body,\n        isSafari = navigator.userAgent.indexOf(\'Safari\') != -1 && navigator.userAgent.indexOf(\'Chrome\') == -1,\n        IsEdge = navigator.userAgent.indexOf(\'Edge\') != -1,\n        isChrome = navigator.userAgent.indexOf(\'Chrome\') != -1 && !IsEdge,\n        isMac = navigator.appVersion.indexOf(\"Mac\") != -1,\n        isVideo = !sublime.isEmpty(sublime.creativeAd.videos),\n        bgfix = sublime.creativeAd.fixed,\n        format = \'\',\n        ayadsVideoLayer,\n        firstCall,\n        i = 0,\n        /* Edit variables */\n        maxHeightHeader = 41,\n        minHeightHeader = 41;\n    /**************** ADAPT MARGIN TO HTML AND LAUNCH FUNCTION FOR OTHERS ELEMENTS ****************/\n    function fixSkin(){\n        isChrome ? html.style.cssText = \'padding-top:\' + maxHeightHeader + \'px !important;\' : html.style.cssText = \'margin-top:\' + maxHeightHeader + \'px !important;\';\n        if ((bgfix && !isVideo) || (!bgfix && isMac && isSafari)  || (!bgfix && isChrome)) {\n            body.style.cssText = \'background-position: center \'+maxHeightHeader+\'px !important;\';\n        }\n        if (bgfix) {\n            fixSkinOnScrollEvent();\n            if (firstCall) {\n                sublime.window.addEventListener(\'scroll\', fixSkinOnScrollEvent);\n                firstCall = false;\n            }\n        }\n    }\n    /**************** ADAPT MARGIN TO OTHERS ELEMENTS ****************/\n    function fixSkinOnScrollEvent(){\n        var y = sublime.window.pageYOffset,\n            newMarginTop;\n \n        if (y === 0) {\n            newMarginTop = maxHeightHeader;\n        } else if (y > 0 && y < (maxHeightHeader - minHeightHeader)) {\n            newMarginTop = Math.floor(maxHeightHeader - y);\n        } else {\n            newMarginTop = minHeightHeader;\n        }\n \n        if (isVideo && ayadsVideoLayer) {\n            ayadsVideoLayer.style.cssText = \'top:\' + newMarginTop + \'px !important;\';\n        } else {\n            body.style.cssText = \'background-position:center \' + newMarginTop + \'px !important;\';\n        }\n    }\n    /**************** CHECK IF ELEMENT IS PRESENT ****************/\n    function checkDivPresence(div, callback, bool){\n        myDiv = sublime.window.document.querySelector(div);\n        if (myDiv) {\n            if (bool) {\n                if (isVideo && div === \"#ayads-video-layer\") {\n                    ayadsVideoLayer = myDiv;\n                }\n                firstCall = true;\n            }\n            callback(myDiv);\n        } else {\n            top.sublime.timer.setTimeout(function(){\n                if (i > 30) {\n                    top.sublime.timer.clearTimeout(function() {\n                        checkDivPresence();\n                    });\n                } else {\n                checkDivPresence(div, callback, bool);\n                }\n                i += 1;\n            }, 100);\n        }\n    }\n    /**************** ADAPT MARGIN TO HEADER WITH A DYNAMIC HEIGHT (OPTION) ****************/\n    function getHeightDynamicHeader(headerDyn){\n        maxHeightHeader = headerDyn.offsetHeight;\n        fixSkin();\n    }\n    /**************** LAUNCH FUNCTION CHECK ****************/\n    //html.style.cssText = \'margin-top:\' + maxHeightHeader + \'px !important;\';\n    isChrome ? html.style.cssText = \'padding-top:\' + maxHeightHeader + \'px !important;\' : html.style.cssText = \'margin-top:\' + maxHeightHeader + \'px !important;\';\n    if (isVideo){\n        checkDivPresence(\'#ayads-video-layer\', fixSkin, true);\n    } else {\n        checkDivPresence(\'body\', fixSkin, true);\n    };\n    sublime.hook.register(\"event.cleanUp\", function(){\n        sublime.window.removeEventListener(\'scroll\', fixSkinOnScrollEvent);\n        isChrome ? html.style.paddingTop = \'\' : html.style.marginTop = \'\';\n    });\n    /* checkDivPresence(\'header\', getHeightDynamicHeader); */\n}\n/**************** LAUNCH GLOBAL FUNCTION ****************/\ninit();\n</script>",passback:"",mobilepassback:"",premium:0,block_cookies:0,scale:1.01,url:"www.footeo.com",width:0,mobile_setup:{footer_fixed:1},sticky_setup:{js:"",css:""},mobilecss:"",mobilejs:"",mobile_bottom_selector:"",mobile_bottom_append_position:"",tag_type:"waterfall",video_mute:0,video_autoplay:1,passback_render:"",sjs_debug:0,country:"FR",site_url:"www.footeo.com",company_id:1121,autoskinz:0,autovideo:0,supported_devices:["mobile","desktop"],main_category_name:"Sport",sub_category_name:"Football",nortb:0,novideo:0,noreminder:0,host:"www.footeo.com",cappings:{impressions:0,impressions_mobile:0,duration:86400},accepted_placement_types:{skinz:1},ignore_client_width:false,scaleCompat:101,continent:"EU",mmd:5,mmm:3},zoneId:347,zoneIgnoreClientWidth:false,};const env=function env(name){if(name in envVars){return envVars[name];}
if(name in globalVars){return globalVars[name];}
console.error('Env '+name+' is not defined');return undefined;};window.sublime=window.sublime||{};window.sublime.env=env;const TIME_START=Date.now();const MAX_TIME_DELAY=30000;const currentWindow=window;const sublime=currentWindow.sublime||{};sublime.originWindow=currentWindow;let highestAccessibleWindow=currentWindow;while(highestAccessibleWindow!==currentWindow.top){try{if(highestAccessibleWindow.parent.document){highestAccessibleWindow=highestAccessibleWindow.parent;}else{break;}}catch(e){break;}}
sublime.window=highestAccessibleWindow;sublime.windowIsTop=highestAccessibleWindow===currentWindow.top;sublime.document=highestAccessibleWindow.document;sublime.isSSL=highestAccessibleWindow.location.protocol==='https:';if(highestAccessibleWindow.performance.timeOrigin){sublime.timeStart=highestAccessibleWindow.performance.timeOrigin;}else if(highestAccessibleWindow.performance.timing&&highestAccessibleWindow.performance.timing.navigationStart){sublime.timeStart=highestAccessibleWindow.performance.timing.navigationStart;}else if(sublime.timeStart&&Number(sublime.timeStart)>TIME_START-MAX_TIME_DELAY){sublime.timeStart=Number(sublime.timeStart);}else{sublime.timeStart=TIME_START;}
sublime.ivTime=highestAccessibleWindow.performance.now();sublime.loadedCount=(sublime.loadedCount+1)||1;sublime.versionId=20210301151955||'1337';sublime.srcType="a"||'U';sublime.noOp=function noOp(){};sublime.IEVersion=document.documentMode||0;sublime.isEdge=Boolean(highestAccessibleWindow.MSStream);sublime.isIe=Boolean(sublime.isEdge||sublime.IEVersion);sublime.isChrome=!sublime.isIe&&/chrom(?:e|ium)/i.test(highestAccessibleWindow.navigator.userAgent);sublime.isFirefox=!sublime.isIe&&/firefox/i.test(highestAccessibleWindow.navigator.userAgent);sublime.isWindowsSafari=!sublime.isIe&&!sublime.isChrome&&!sublime.isFirefox&&/Safari/i.test(highestAccessibleWindow.navigator.userAgent)&&/Windows/i.test(highestAccessibleWindow.navigator.userAgent);sublime.isIphoneSafari=!sublime.isIe&&!sublime.isChrome&&!sublime.isFirefox&&!sublime.isWindowsSafari&&/Safari/i.test(highestAccessibleWindow.navigator.userAgent)&&/iPhone/i.test(highestAccessibleWindow.navigator.userAgent);highestAccessibleWindow.sublime=sublime;currentWindow.sublime=sublime;const merge=function merge(){const args=Array.prototype.slice.call(arguments,0);let result;if(Array.isArray(args[0])){result=[];}else if(args[0]&&typeof args[0]==='object'){result={};}else{return args[0];}
args.forEach(function mergeArgsForEach(obj){if(!obj){return;}
Object.keys(obj).forEach(function mergeArgsForEachKey(key){if(!Array.isArray(obj[key])&&obj[key]&&typeof obj[key]==='object'&&result[key]&&typeof result[key]==='object'){result[key]=merge(result[key],obj[key]);}else{result[key]=obj[key];}});});return result;};if(typeof window!=='undefined'){window.sublime=window.sublime||{};window.sublime.merge=merge;}
const storage={config:Object.freeze({ttl:864e+5*90,prefix:env('sublime_prefix')+'-',}),get:function get(name){const key=storage.config.prefix+name;let entry;try{entry=JSON.parse(sublime.window.localStorage.getItem(key));}catch(e){return null;}
if(entry&&(entry.expire<Date.now())){storage.unset(name);return null;}
return entry?entry.value:null;},set:function set(name,value,ttl){const entry={value:value,expire:Date.now()+(ttl||storage.config.ttl),};try{const key=storage.config.prefix+name;sublime.window.localStorage.setItem(key,JSON.stringify(entry));return true;}catch(e){return false;}},list:function list(mask){return Object.keys(sublime.window.localStorage||{}).map(function map(key){return key.replace(new RegExp('^'+storage.config.prefix),'');}).filter(function filter(key){return!(mask instanceof RegExp)||mask.test(key);}).reduce(function reduce(obj,key){obj[key]=storage.get(key);return obj;},{});},unset:function unset(name){const key=storage.config.prefix+name;try{sublime.window.localStorage.removeItem(key);return true;}catch(e){return false;}},extend:function extend(name,ttl){const entry=storage.get(name);if(!entry){return false;}
return storage.set(name,entry,ttl);},};if(typeof window!=='undefined'){window.sublime=window.sublime||{};window.sublime.storage=storage;}
const elapsed=function elapsed(){return sublime.window.performance.now();};const timings={};const elapsedSinceLastCall=function elapsedSinceLastCall(key){if(!(key in timings)){timings[key]=elapsed();return 0;}
const res=elapsed()-timings[key];timings[key]+=res;return res;};const elapsedSinceInvocation=function elapsedSinceInvocation(){return Math.round(Date.now()-(sublime.timeStart+sublime.ivTime));};if(typeof window!=='undefined'){window.sublime=window.sublime||{};window.sublime.elapsed=elapsed;window.sublime.elapsedSinceLastCall=elapsedSinceLastCall;window.sublime.elapsedSinceInvocation=elapsedSinceInvocation;}
let LOG_LEVEL=storage.get('logLevel')||10;const LOG_TTL=36e5;const LOG_BACKGROUND=Object.freeze({log:'#ABABAB',info:'#91DDFB',warn:'#F9A82B;',success:'#6BEEC7C',error:'#F7470F',});function logger(level){const lvl=level in LOG_BACKGROUND?level:'log';if((lvl==='warn'&&LOG_LEVEL<20)||(lvl==='info'&&LOG_LEVEL<30)||(lvl==='log'&&LOG_LEVEL<40)){return;}
const args=Array.prototype.slice.call(arguments,1);const elapsedTimeDebug=(LOG_LEVEL===40)?elapsedSinceInvocation()+'ms':'';const vendorPrefix="wf"||'sskz';let data=['%c'+vendorPrefix+'%c'+lvl.charAt(0)+'%c'+elapsedTimeDebug,'color: #FFFFFF; padding: 1px 3px; border-radius: 3px 0 0 3px; background: #ED7D04;','color: #3E3E40; padding: 1px 3px; background: '+LOG_BACKGROUND[lvl],'color: #292929; padding: 1px 3px; border-radius: 0 3px 3px 0; background: #DEDEDE;',];data=data.concat(args);console.groupCollapsed.apply(console,data);console.trace();console.groupEnd();}
const log={error:logger.bind(null,'error'),success:logger.bind(null,'success'),warn:logger.bind(null,'warn'),info:logger.bind(null,'info'),log:logger.bind(null,'log'),};Object.defineProperty(log,'level',{enumerable:true,set:function set(value){LOG_LEVEL=Math.min(Math.max(value,10),40)||10;storage.set('logLevel',LOG_LEVEL,LOG_TTL);},get:function get(){return LOG_LEVEL;},});if(typeof window!=='undefined'){window.sublime=window.sublime||{};window.sublime.log=log.log;window.sublime.info=log.info;window.sublime.warn=log.warn;window.sublime.error=log.error;window.sublime.success=log.success;window.sublime.setLogLevel=function setLogLevel(level){log.level=level;};window.sublime.getLogLevel=function getLogLevel(){return log.level;};}
var forceOriginWindow=false||false;sublime.isNum=function(n){return!isNaN(parseFloat(n))&&isFinite(n);};sublime.pInt=function(s,mag){var integer=parseInt(s,mag||10);return sublime.isNum(integer)?integer:null;};if(forceOriginWindow){sublime.window=sublime.originWindow;sublime.document=sublime.originWindow.document;}
sublime.now=function now(){return Date.now();};sublime.mergeConfig=function(config,pluginName){if((pluginName in sublime)&&sublime[pluginName].config){config=merge(config,sublime[pluginName].config);}
return config;};sublime.qs={parse:function(url){var params={},qs,tmp,field,subField,value;if(url.indexOf('?')>-1){qs=url.substring(url.indexOf('?')+1);}else if(!sublime.isUrl(url)){qs=url;}
if(!qs){return{};}
if(qs.indexOf('#')>-1){qs=qs.substring(0,qs.indexOf('#'));}
qs=qs.replace(/&amp;/g,'&').split("&");for(var i in qs){if(!qs.hasOwnProperty(i)){continue;}
tmp=qs[i].split('=');field=tmp[0];if(tmp.length===1){value=undefined;}else{value=decodeURIComponent(tmp[1]);}
if(field.indexOf('[')===-1){params[field]=value;continue;}
if(field.indexOf('[')===0){continue;}
tmp=field.match(/^([a-z0-9]+)\[([a-z-0-9]*)]$/i);field=tmp[1];subField=tmp[2];if(subField){if(typeof(params[field])==='undefined'){params[field]={};}
params[field][subField]=value;}else{if(typeof(params[field])==='undefined'){params[field]=[];}
params[field].push(value);}}
return params;},build:function(params){var qs=[],j,subField;if(!params){return'';}
for(var i in params){if(!params.hasOwnProperty(i)){continue;}
if(sublime.isArray(params[i])||sublime.isObject(params[i])){for(j in params[i]){if(!params[i].hasOwnProperty(j)){continue;}
subField=!sublime.isArray(params[i])?j:'';if(!sublime.isDefined(params[i][j])){qs.push(i+'['+subField+']');}else{qs.push(i+'['+subField+']='+encodeURIComponent(params[i][j]));}}}else{if(!sublime.isDefined(params[i])){qs.push(i);}else{qs.push(i+'='+encodeURIComponent(params[i]));}}}
return qs.join('&');},merge:function(data){if(arguments.length===0){throw"Merge needs arguments";}
var params=[],qs={};for(var i=0;i<arguments.length;i++){if(typeof(arguments[i])==='string'){params[i]=sublime.qs.parse(arguments[i]);}else if(!sublime.isObject(arguments[i])){throw"Can't merge non object";}else{params[i]=arguments[i];}
qs=merge(qs,params[i]);}
return qs;},mergeAndBuild:function(data){return sublime.qs.build(sublime.qs.merge.apply({},arguments));}};sublime.isScalar=function(mixed){return(/boolean|number|string/).test(typeof mixed);};var varTypes=["Array","Function","Object","String"],varType;for(var e in varTypes){if(!varTypes.hasOwnProperty(e)){continue;}
varType=varTypes[e];(function(varType){sublime["is"+varType]=function(a){return"undefined"!=typeof a&&Object.prototype.toString.call(a)=="[object "+varType+"]";};}(varType));}
sublime.isDefined=function(mixed){if(typeof mixed==='undefined'){return false;}else if(mixed==='undefined'){return false;}else if(mixed===undefined){return false;}else if(mixed===null){return false;}
return true;};sublime.isEmpty=function(mixed){if(mixed==null){return true;}
if(sublime.isArray(mixed)){return mixed.length===0;}
if(sublime.isObject(mixed)){return sublime.length(mixed)===0;}
return mixed?false:true;};sublime.length=function(obj){if('keys'in{}){return Object.keys(obj).length;}
var cnt=0;for(var k in obj){if(obj.hasOwnProperty(k)){cnt++;}}
return cnt;};sublime.inArray=Array.indexOf?function(needle,haystack,returnIndex){var index=haystack.indexOf(needle);return returnIndex?index:(index!==-1);}:function(needle,haystack,returnIndex){for(var i in haystack){if(!haystack.hasOwnProperty(i)){continue;}
if(haystack[i]==needle){return returnIndex?i:true;}}
return returnIndex?-1:false;};var BASECHAR_62="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz";sublime.base62Encode=function(integer){if(integer===0){return'0';}
var output='';while(integer>0){output=BASECHAR_62[integer%62]+output;integer=Math.floor(integer / 62);}
return output;};sublime.base62Decode=function(str){var output=0,chars=(''+str).split('').reverse();chars.forEach(function(c,i){output+=BASECHAR_62.indexOf(c)*Math.pow(62,i);});return output;};sublime.url={parse:function(url){var regex=/^(?:(https?):)?(?:\/\/)?([0-9a-z-._]+)?(\/[^?#]*)?(?:\?([^#]*))?(?:#(.*))?$/i;var parts=url.match(regex)||[];var output={url:url,scheme:parts[1]||'',host:parts[2]||'',path:parts[3]||'',query:parts[4]||'',hash:parts[5]||''};return output;},build:function(params){var output=(params.scheme?params.scheme+':':'')+'//'+
params.host+
params.path+
(params.query?'?'+params.query:'')+
(params.hash?'#'+params.hash:'');return output;},setProtocol:function(url,ssl){var parts=sublime.url.parse(url);if(ssl===true){parts.scheme='https';}else if(ssl===false){parts.scheme='http';}else{parts.scheme='';}
return sublime.url.build(parts);},merge:function(url,params){var qs,baseUrl;if(!sublime.isObject(params)||sublime.isEmpty(params)){return url;}
if(url.indexOf('?')>-1){baseUrl=url.substring(0,url.indexOf('?'));qs=sublime.qs.mergeAndBuild(url,params);}else{baseUrl=url;qs=sublime.qs.mergeAndBuild('',params);}
return baseUrl+(qs?'?'+qs:'');}};sublime.isUrl=function(url){var pattern=/^((https?:)?\/\/)/;return url&&!!pattern.test(url.toString()+'');};sublime.toArray=function(obj){return Array.prototype.slice.call(obj);};sublime.trim=function(string){return string.replace(/^\s+|\s+$/g,'');};sublime.applyJs=function(js){if(!js){log.error('sublime.applyJs(): empty js');return false;}
try{if(sublime.isFunction(js)){js();}else{eval(js);}
return true;}catch(e){log.error('sublime.applyJs() failed',{js:js},e);}
return false;};sublime.write=function(html,options){var defaults={id:'sublime-'+(new Date().getTime()).toString(16),iframeAttributes:{},iframeVars:{}};if(!options||!sublime.isObject(options)){options={};}
options=merge(defaults,options);log.info('sublime.write');var doc=sublime.document,i,iWin,iDoc,newId,idSuffix=1;do{newId=options.id+'-'+idSuffix;if(doc.getElementById(newId)){idSuffix++;}else{options.id=newId;break;}}while(true);i=doc.createElement('iframe');i.name=i.id=options.id;i.className=(sublime.env?sublime.env('sublime_prefix'):'sublime')+'-write';i.scrolling="no";i.frameBorder="0";i.hspace="0";i.vspace="0";i.marginwidth="0";i.marginheight="0";i.allowTransparency="true";i.width="1px";i.height="1px";if(sublime.length(options.iframeAttributes)){var attribute;for(var attr in options.iframeAttributes){attribute=doc.createAttribute(attr);attribute.value=options.iframeAttributes[attr];i.setAttributeNode(attribute);}}
if(options.targetElement){var locationElement=options.targetElement;if(locationElement.tagName==='BODY'){locationElement.appendChild(i);}else{locationElement.parentNode.insertBefore(i,locationElement.nextSibling);}}else{doc.body.appendChild(i);}
iWin=i.contentWindow;iDoc=i.contentDocument;iDoc.open();if(sublime.length(options.iframeVars)){for(var v in options.iframeVars){var value=options.iframeVars[v];if(sublime.isFunction(value)){iWin[v]=(function(value){return function(){return value.apply(iWin,arguments);};}(value));}else{iWin[v]=value;}}}
iWin.sublime=sublime;iDoc.write('<!doctype html><html><body>'+html+'</body></html>');iDoc.close();return i;};sublime.writeToIframe=function(target,html){var iframe=target;if(typeof target==='string'){iframe=sublime.document.getElementById(target);}else if(target.frameElement){iframe=target.frameElement;}
var iDoc=iframe.contentDocument;iDoc.open();iDoc.write(html);iDoc.close();};sublime.removeElement=function(element){if(element&&element.parentNode!==null){element.parentNode.removeChild(element);return true;}
return false;};sublime.writeAndEvalScripts=function(targetWindow,html,divId){divId=divId||(sublime.env?sublime.env('sublime_prefix'):'sublime')+'-waes';var win=targetWindow,doc=win.document,div=doc.getElementById(divId);if(!div){div=doc.createElement('div');div.id=divId;doc.body.appendChild(div);}
div.innerHTML=html;var scriptsTags=div.getElementsByTagName('script');for(var i=0;i<scriptsTags.length;i++){evalScriptTag(scriptsTags[i],win);}};var evalScriptTag=function(elem,targetWindow){var doc=targetWindow.document,data=(elem.text||elem.textContent||elem.innerHTML||''),head=doc.getElementsByTagName("head")[0]||doc.documentElement,script=doc.createElement("script");script.type="text/javascript";try{script.appendChild(doc.createTextNode(data));}catch(e){script.text=data;}
head.insertBefore(script,head.firstChild);head.removeChild(script);};var
cryptObj=sublime.window.crypto||sublime.window.msCrypto||null,rngU32;if(cryptObj&&'TypedArray'in sublime.window){var typedU32=new Uint32Array(1);rngU32=function(){cryptObj.getRandomValues(typedU32);return typedU32[0];};rngU32.isWeak=false;}else{rngU32=function(){return Math.floor(Math.random()*4294967295);};rngU32.isWeak=true;}
sublime.rngU32=rngU32;sublime.DOMReadyTime=null;sublime.computeDOMReadyTime=function(){if(sublime.window.performance&&sublime.window.performance.timing&&sublime.window.performance.timing.domInteractive){sublime.DOMReadyTime=sublime.window.performance.timing.domInteractive;}else if(!sublime.DOMReadyTime){sublime.DOMReadyTime=sublime.now();}
return sublime.DOMReadyTime;};sublime.getHash=function(){return(sublime.window.location.hash||'').replace(/^#/,'');};sublime.ucFirst=function(string){return string.toString().charAt(0).toUpperCase()+string.slice(1);};sublime.isFeatureEnabled=function isFeatureEnabled(featureName){const featFlippingZones={sskzGDPR:true,smartConsent:true,smartKeywordConsent:true,stickyConsent:[23651,19014,348,19342,2576,3408,3409,4428,4430,5733,5836,7131,7135,9466,16087,17392,17486,18516,19245,19688,20373,21551,21647,22921,21627,29433],improveConsent:[23651,19014,348,19342,2576,3408,3409,4428,4430,5733,5836,7131,7135,9466,16087,17392,17486,18516,19245,19688,20373,21551,21647,22921,21627,29433],cookieConsent:[23651,19014,348,19342,2576,3408,3409,4428,4430,5733,5836,7131,7135,9466,16087,17392,17486,18516,19245,19688,20373,21551,21647,22921,21627,29433],prebidMobile:[29433,32980,33274],appnexusSendImpressionId:[16235],smartSendImpressionId:[16235],noPixelBeforeRender:[],blankSJS:[]};const zoneId=347;let enabled=false;try{if(typeof featFlippingZones[featureName]==='boolean'&&featFlippingZones[featureName]===true){enabled=featFlippingZones[featureName];}else if(sublime.isArray(featFlippingZones[featureName])&&featFlippingZones[featureName].indexOf(zoneId)>-1){enabled=true;}}catch(e){log.error('Error happened when checking front feature flipping',{},e);enabled=false;}
return enabled;};sublime.watch=function sublimeWatch(prop,setterHandler){var currentValue=this[prop];Object.defineProperty(sublime,prop,{get:function getter(){return currentValue;},set:function setter(val){currentValue=val;setterHandler.call(this,val);},configurable:true,});};sublime.helpers={};const OPTIMAL_HEIGHT_FOR_MOBILE=3600;const OPTIMAL_HEIGHT_FOR_DESKTOP=2300;sublime.helpers.addCss=function addCss(css){const id=sublime.env('sublime_prefix')+'-style';let style=sublime.document.getElementById(id);if(!style){style=sublime.document.createElement('style');style.type='text/css';style.id=id;sublime.document.getElementsByTagName('head')[0].appendChild(style);}
if(style.styleSheet){style.styleSheet.cssText+=css;}else{style.appendChild(sublime.document.createTextNode(css));}};sublime.helpers.createNamespace=function createNamespace(objectPath){let parts=objectPath.split('.');let i;let parent=sublime;if(parts[0]!=='sublime'){return;}
for(parts=parts.slice(1),i=0;i<parts.length;i+=1){if(!parent[parts[i]]){parent[parts[i]]={};}
parent=parent[parts[i]];}};sublime.helpers.hasProperty=function hasProperty(element,path){if(!sublime.isDefined(element)||!(sublime.isObject(element)||sublime.isArray(element))){return false;}
const keys=path.split('.');let cursor=element;for(let i=0;i<keys.length;i+=1){if(!sublime.isDefined(cursor[keys[i]]))return false;cursor=cursor[keys[i]];}
return true;};sublime.helpers.tryParseJson=function tryParseJson(jsonStr){try{return JSON.parse(jsonStr);}catch(e){return false;}};sublime.helpers.tryParseXml=function tryParseXml(xmlStr){try{const parser=new sublime.window.DOMParser();const xml=parser.parseFromString(xmlStr,'text/xml');const parserErrors=xml.getElementsByTagName('parsererror');if(parserErrors.length){throw new Error(parserErrors[0].textContent);}
return xml;}catch(e){log.warn('XML parsing error:',e.message);return false;}};sublime.helpers.time2secs=function time2secs(time){const parts=time.toString().split(':');if(parts.length!==3){return 0;}
return(parseInt(parts[0],10)*3600
+parseInt(parts[1],10)*60
+parseInt(parts[2],10))||0;};sublime.helpers.getBrowserDimensions=function getBrowserDimensions(){const dimensions={};const w=sublime.window;dimensions.bw=Math.max(w.document.documentElement.clientWidth,w.innerWidth||0);dimensions.bh=Math.max(w.document.documentElement.clientHeight,w.innerHeight||0);return dimensions;};sublime.helpers.getScript=function getScript(url,options){return new sublime.Promise(function fulfill(resolve,reject){let w=sublime.window;if(options&&options.sandbox){const iframe=sublime.document.createElement('iframe');iframe.className='sublime-iframe';iframe.name='sublime-iframe';iframe.style.display='none';sublime.document.body.appendChild(iframe);iframe.contentDocument.open();iframe.contentDocument.write('<html><body></body></html>');iframe.contentDocument.close();w=iframe.contentWindow;}
const s=sublime.document.createElement('script');s.type='application/javascript';s.async=false;s.addEventListener('load',function onLoad(){resolve(w);});s.addEventListener('error',reject);s.src=url;w.document.body.appendChild(s);});};sublime.helpers.getPageHeight=function getPageHeight(){const body=sublime.document.body;const element=sublime.document.documentElement;if(typeof sublime.document.height!=='undefined'){return sublime.document.height;}
return Math.max(body.scrollHeight,body.offsetHeight,element.clientHeight,element.scrollHeight,element.offsetHeight);};sublime.helpers.isSublimeElement=function isSublimeElement(el){if(!el){return false;}
const sublimeReg=/^(ayads|sublime)/;if(el.id&&el.id.match(sublimeReg)){return true;}
for(let i=0;i<el.classList.length;i+=1){if(el.classList[i].match(sublimeReg)){return true;}}
return false;};sublime.helpers.isOptimalHeight=function isOptimalHeight(){if(sublime.device==='desktop'&&sublime.helpers.getPageHeight()<OPTIMAL_HEIGHT_FOR_DESKTOP){return false;}
if(sublime.device==='mobile'&&sublime.helpers.getPageHeight()<OPTIMAL_HEIGHT_FOR_MOBILE){return false;}
return true;};sublime.timer=sublime.timer||{};const timeoutIDS=[];const intervalIDS=[];sublime.timer.setTimeout=function setTimeout(){var tid=sublime.window.setTimeout.apply(null,arguments);timeoutIDS.push(tid);return tid;};sublime.timer.clearTimeout=function clearTimeout(){return sublime.window.clearTimeout.apply(null,arguments);};sublime.timer.clearAllTimeouts=function clearAllTimeouts(){for(let i=timeoutIDS.length-1;i>=0;i-=1){sublime.window.clearTimeout(timeoutIDS[i]);}};sublime.timer.setInterval=function setInterval(){var tid=sublime.window.setInterval.apply(null,arguments);intervalIDS.push(tid);return tid;};sublime.timer.clearInterval=function clearInterval(){return sublime.window.clearInterval.apply(null,arguments);};sublime.timer.clearAllIntervals=function clearAllIntervals(){for(let i=intervalIDS.length-1;i>=0;i-=1){sublime.window.clearInterval(intervalIDS[i]);}};const THROTTLE_MIN_DELAY=10;function throttle(func){let isRunning;let args;let lastTime=0;function run(){isRunning=false;func.apply(null,args);}
return function throttled(){args=arguments;const now=Date.now();if(isRunning||(now-lastTime<THROTTLE_MIN_DELAY)){return;}
lastTime=now;isRunning=true;window.sublime.window.requestAnimationFrame(run);};}
function debounce(func,wait,immediate){const timer=window.sublime.timer;let timeout;return function debounced(){const context=this;const args=arguments;function later(){timeout=null;if(!immediate){func.apply(context,args);}}
const callNow=immediate&&!timeout;timer.clearTimeout(timeout);timeout=timer.setTimeout(later,wait);if(callNow){func.apply(context,args);}};}
if(window){window.sublime=window.sublime||{};window.sublime.throttle=throttle;window.sublime.debounce=debounce;}
sublime.hook={};const hooks={};const calledHooks={};let domReady=false;let domReadyInteractive=false;let bodyReady=false;sublime.hook.call=function hookCall(namespace,context){calledHooks[namespace]=context;if(!Object.prototype.hasOwnProperty.call(hooks,namespace)||!hooks[namespace].length){log.info('Not registered namespace "'+namespace+'"');return false;}
log.info('Called namespace "'+namespace+'"');let isOverriden=false;hooks[namespace].forEach(function each(hook){if(typeof(hook)!=='object'||typeof(hook.callback)!=='function'||(!hook.multiple&&hook.called)){return;}
if(hook.async){sublime.timer.setTimeout(function delay(){sublime.hook.execute(hook,context);},0);}else{sublime.hook.execute(hook,context);}
if(hook.override){isOverriden=true;}});return isOverriden;};sublime.hook.execute=function hookExecute(hook,context){try{hook.callback(context);}catch(e){log.warn('Hook: error namespace '+hook.namespace,e);}
hook.called=true;return true;};sublime.hook.register=function hookRegister(namespace,callback){var options={};if(sublime.isObject(namespace)){options=namespace;}else{options={namespace:namespace,callback:callback,};}
const defaults={namespace:namespace,callback:sublime.noOp,only:false,override:false,async:false,called:false,multiple:false,once:false,};if(options.namespace.match(/^event\./)){defaults.multiple=true;}
if(options.once){defaults.multiple=false;}
options=merge(defaults,options);if(options.namespace.indexOf('dom.')===0){const executeDomCallback=options.namespace==='dom.ready'&&domReady;const executeDomInteractiveCallback=options.namespace==='dom.interactive'&&domReadyInteractive;const executeBodyCallback=options.namespace==='dom.bodyReady'&&bodyReady;if(executeDomCallback||executeBodyCallback||executeDomInteractiveCallback){options.callback();return;}}
if(options.only){hooks[options.namespace]=[options];return;}
if(!Object.prototype.hasOwnProperty.call(hooks,options.namespace)){hooks[options.namespace]=[];}
if(hooks[options.namespace][0]&&hooks[options.namespace][0].only){log.warn('Hook: namespace '+options.namespace+' already has only');return;}
hooks[options.namespace].push(options);if(Object.prototype.hasOwnProperty.call(calledHooks,options.namespace)){executeCalledHooks(options.namespace,calledHooks[options.namespace]);}};function executeCalledHooks(namespace,context){hooks[namespace].forEach(function each(hookCallback){if(!hookCallback.called){sublime.hook.call(namespace,context);}});}
sublime.hook.unregister=function hookUnregister(namespace){if(Object.prototype.hasOwnProperty.call(hooks,namespace)){hooks[namespace]=[];}
return true;};const fireBodyLoaded=function fireBodyLoaded(){if(!bodyReady&&sublime.document.body){bodyReady=true;sublime.hook.call('dom.bodyReady');}
if(!bodyReady){sublime.timer.setTimeout(fireBodyLoaded,42);}};fireBodyLoaded();const fireDOMContentLoadedInteractive=function fireDOMContentLoadedInteractive(){if(!domReadyInteractive&&(sublime.document.readyState==='complete'||sublime.document.readyState==='interactive')){domReadyInteractive=true;sublime.hook.call('dom.interactive');}
if(!domReadyInteractive){sublime.timer.setTimeout(fireDOMContentLoadedInteractive,42);}};fireDOMContentLoadedInteractive();sublime.document.addEventListener('DOMContentLoaded',fireDOMContentLoadedInteractive);const fireDOMContentLoaded=function fireDOMContentLoaded(){if((!domReady&&sublime.document.readyState==='complete')||(document.readyState!=='loading'&&!document.documentElement.doScroll)){domReady=true;sublime.computeDOMReadyTime();sublime.hook.call('dom.ready');}
if(!domReady){sublime.timer.setTimeout(fireDOMContentLoaded,42);}};fireDOMContentLoaded();sublime.document.addEventListener('DOMContentLoaded',fireDOMContentLoaded);const fireBeforeUnload=function fireBeforeUnload(){sublime.hook.call('step.beforeunload');};sublime.window.addEventListener('beforeunload',fireBeforeUnload);sublime.hook.register('event.cleanUp',function clearEventListener(){sublime.document.removeEventListener('DOMContentLoaded',fireDOMContentLoadedInteractive);sublime.document.removeEventListener('DOMContentLoaded',fireDOMContentLoaded);sublime.window.removeEventListener('beforeunload',fireBeforeUnload);});sublime.detectDevice=sublime.detectDevice||{};sublime.device=sublime.device||'';sublime.detectDevice.detectType=function detectDeviceDetectType(userAgent){const ua=userAgent||navigator.userAgent;const isMobile=ua.match(/(?:phone|windowss+phone|ipod|blackberry|Galaxy Nexus|SM-G892A|(?:android|bbd+|meego|silk|googlebot) .+?mobile|palm|windowss+ce|opera mini|avantgo|docomo)/i);if(isMobile){return'mobile';}
const isTablet=ua.match(/(?:ipad|playbook|Tablet|(?:android|bb\\d+|meego|silk)(?! .+? mobile))/i);if(isTablet){return'tablet';}
return'desktop';};sublime.detectDevice.detectMobileOS=function detectMobileOS(userAgent){const ua=userAgent||navigator.userAgent;const output={name:false,version:false,};const osNameMatch={windowsPhone:'Windows Phone',iOS:'\\biPhone.*Mobile|\\biPod|\\biPad',android:'Android',};const versionMatch={windowsPhone:'Windows Phone (?:OS\\s)?(\\d*.\\d*)',iOS:'CPU iPhone OS (\\d*_\\d*)',android:'Android (\\d*.\\d*)',};Object.keys(osNameMatch).some(function some(osTest){const regexp=new RegExp(osNameMatch[osTest]);if(!regexp.test(ua)){return false;}
output.name=osTest;const versionRegexp=new RegExp(versionMatch[osTest]);const version=versionRegexp.exec(ua);if(!version||version.length!==2){return true;}
output.version=parseFloat(version[1].replace('_','.'));return true;});return output;};sublime.detectDevice.isDataSaverEnabled=function isDataSaverEnabled(){return sublime.helpers.hasProperty(sublime,'window.navigator.connection')&&sublime.window.navigator.connection.saveData;};sublime.detectDevice.categorizedScreenSize=function categorizedScreenSize(){if(!sublime.window.innerWidth){return'unknown';}
const windowWidth=sublime.window.innerWidth / 1.01;if(windowWidth<=1024){return'small';}
if(windowWidth<=1299){return'medium';}
return'large';};sublime.device=sublime.detectDevice.detectType();function isPlaceableOnDesktop(ignoreClientWidth,maxDeviceWidth){const MINIMUM_SUPPORT_WIDTH=1200;const browserAllowed=(!sublime.IEVersion||sublime.IEVersion>9)&&!sublime.isWindowsSafari;const clientWidthAllowed=ignoreClientWidth?true:(maxDeviceWidth>MINIMUM_SUPPORT_WIDTH);return browserAllowed&&clientWidthAllowed;}
function isOSCompatible(osData){const iOSIsCompatible=osData.name==='iOS'&&osData.version>=9;const androidIsCompatible=osData.name==='android'&&osData.version>=4.4;const osIsCompatible=iOSIsCompatible||androidIsCompatible;if(!osIsCompatible){log.warn('OS is not compatible : '+osData);}
return osIsCompatible;}
function isPlaceableOnMobile(hasViewportMeta,userAgent,forceDevice,osData,isPortrait){const allowedUA=/\bCrMo\b|CriOS|Chrome|Firefox|Safari|iPhone/i.test(userAgent);let osIsCompatible=isOSCompatible(osData);if(forceDevice){log.warn('Previewing in forced mode with os : ',osData);osIsCompatible=true;}
return allowedUA&&osIsCompatible&&hasViewportMeta&&isPortrait;}
const isPlaceable=function isPlaceable(params){const config=sublime.merge({},{device:sublime.device,userAgent:navigator.userAgent,ignoreClientWidth:sublime.env('zoneIgnoreClientWidth'),maxDeviceWidth:sublime.window.innerWidth,hasViewportMeta:Boolean(sublime.document.querySelector('meta[name=viewport]')),forceDevice:Boolean(sublime.previewing&&sublime.isDefined(sublime.preview.params)&&sublime.preview.params.forceDevice),isPortrait:sublime.window.innerHeight>sublime.window.innerWidth,},params);config.osData=sublime.detectDevice.detectMobileOS(config.userAgent);if(config.device==='desktop'){return isPlaceableOnDesktop(config.ignoreClientWidth,config.maxDeviceWidth);}
if(config.device==='mobile'){return isPlaceableOnMobile(config.hasViewportMeta,config.userAgent,config.forceDevice,config.osData,config.isPortrait);}
return false;};var setTimeoutFunc=setTimeout;function noop(){}
function bind(fn,thisArg){return function(){fn.apply(thisArg,arguments);};}
function Promise(fn){if(!(this instanceof Promise)){throw new TypeError('Promises must be constructed via new');}
if(typeof fn!=='function'){throw new TypeError('not a function');}
this._state=0;this._handled=false;this._value=undefined;this._deferreds=[];doResolve(fn,this);}
function handle(self,deferred){while(self._state===3){self=self._value;}
if(self._state===0){self._deferreds.push(deferred);return;}
self._handled=true;Promise._immediateFn(function(){var cb=self._state===1?deferred.onFulfilled:deferred.onRejected;if(cb===null){(self._state===1?resolve:reject)(deferred.promise,self._value);return;}
var ret;try{ret=cb(self._value);}catch(e){reject(deferred.promise,e);return;}
resolve(deferred.promise,ret);});}
function resolve(self,newValue){try{if(newValue===self){throw new TypeError('A promise cannot be resolved with itself.');}
if(newValue&&(typeof newValue==='object'||typeof newValue==='function')){var then=newValue.then;if(newValue instanceof Promise){self._state=3;self._value=newValue;finale(self);return;}
if(typeof then==='function'){doResolve(bind(then,newValue),self);return;}}
self._state=1;self._value=newValue;finale(self);}catch(e){reject(self,e);}}
function reject(self,newValue){self._state=2;self._value=newValue;finale(self);}
function finale(self){if(self._state===2&&self._deferreds.length===0){Promise._immediateFn(function(){if(!self._handled){Promise._unhandledRejectionFn(self._value);}});}
for(var i=0,len=self._deferreds.length;i<len;i++){handle(self,self._deferreds[i]);}
self._deferreds=null;}
function Handler(onFulfilled,onRejected,promise){this.onFulfilled=typeof onFulfilled==='function'?onFulfilled:null;this.onRejected=typeof onRejected==='function'?onRejected:null;this.promise=promise;}
function doResolve(fn,self){var done=false;try{fn(function(value){if(done){return;}
done=true;resolve(self,value);},function(reason){if(done){return;}
done=true;reject(self,reason);});}catch(ex){if(done){return;}
done=true;reject(self,ex);}}
Promise.prototype['catch']=function(onRejected){return this.then(null,onRejected);};Promise.prototype.then=function(onFulfilled,onRejected){var prom=new this.constructor(noop);handle(this,new Handler(onFulfilled,onRejected,prom));return prom;};Promise.all=function(arr){return new Promise(function(resolve,reject){if(!arr||typeof arr.length==='undefined'){throw new TypeError('Promise.all accepts an array');}
var args=Array.prototype.slice.call(arr);if(args.length===0){return resolve([]);}
var remaining=args.length;function res(i,val){try{if(val&&(typeof val==='object'||typeof val==='function')){var then=val.then;if(typeof then==='function'){then.call(val,function(val){res(i,val);},reject);return;}}
args[i]=val;if(--remaining===0){resolve(args);}}catch(ex){reject(ex);}}
for(var i=0;i<args.length;i++){res(i,args[i]);}});};function reverse(promise){return new Promise(function(resolve,reject){return Promise.resolve(promise).then(reject,resolve);});}
Promise.any=function(promises){return reverse(Promise.all([].concat(promises).map(reverse)));};Promise.resolve=function(value){if(value&&typeof value==='object'&&value.constructor===Promise){return value;}
return new Promise(function(resolve){resolve(value);});};Promise.reject=function(value){return new Promise(function(resolve,reject){reject(value);});};Promise.race=function(values){return new Promise(function(resolve,reject){for(var i=0,len=values.length;i<len;i++){values[i].then(resolve,reject);}});};Promise._immediateFn=(typeof setImmediate==='function'&&function(fn){setImmediate(fn);})||function(fn){setTimeoutFunc(fn,0);};Promise._unhandledRejectionFn=function _unhandledRejectionFn(err){if(typeof console!=='undefined'&&console){console.warn('Possible Unhandled Promise Rejection:',err);}};if(sublime.window.Promise){sublime.Promise=sublime.window.Promise;if(!sublime.Promise.any){sublime.Promise.any=Promise.any;}}else{sublime.Promise=Promise;}
sublime.helpers.createNamespace('sublime.video');var EMPTY_VIDEO_SRC='data:video/mp4;base64,AAAAIGZ0eXBpc29tAAACAGlzb21pc28yYXZjMW1wNDEAAAAIZnJlZQAAAu1tZGF0AAACrQYF//+p3EXpvebZSLeWLNgg2SPu73gyNjQgLSBjb3JlIDE1NSByMjkwMSA3ZDBmZjIyIC0gSC4yNjQvTVBFRy00IEFWQyBjb2RlYyAtIENvcHlsZWZ0IDIwMDMtMjAxOCAtIGh0dHA6Ly93d3cudmlkZW9sYW4ub3JnL3gyNjQuaHRtbCAtIG9wdGlvbnM6IGNhYmFjPTEgcmVmPTMgZGVibG9jaz0xOjA6MCBhbmFseXNlPTB4MzoweDExMyBtZT1oZXggc3VibWU9NyBwc3k9MSBwc3lfcmQ9MS4wMDowLjAwIG1peGVkX3JlZj0xIG1lX3JhbmdlPTE2IGNocm9tYV9tZT0xIHRyZWxsaXM9MSA4eDhkY3Q9MSBjcW09MCBkZWFkem9uZT0yMSwxMSBmYXN0X3Bza2lwPTEgY2hyb21hX3FwX29mZnNldD0tMiB0aHJlYWRzPTMgbG9va2FoZWFkX3RocmVhZHM9MSBzbGljZWRfdGhyZWFkcz0wIG5yPTAgZGVjaW1hdGU9MSBpbnRlcmxhY2VkPTAgYmx1cmF5X2NvbXBhdD0wIGNvbnN0cmFpbmVkX2ludHJhPTAgYmZyYW1lcz0zIGJfcHlyYW1pZD0yIGJfYWRhcHQ9MSBiX2JpYXM9MCBkaXJlY3Q9MSB3ZWlnaHRiPTEgb3Blbl9nb3A9MCB3ZWlnaHRwPTIga2V5aW50PTI1MCBrZXlpbnRfbWluPTEgc2NlbmVjdXQ9NDAgaW50cmFfcmVmcmVzaD0wIHJjX2xvb2thaGVhZD00MCByYz1jcmYgbWJ0cmVlPTEgY3JmPTI4LjAgcWNvbXA9MC42MCBxcG1pbj0wIHFwbWF4PTY5IHFwc3RlcD00IGlwX3JhdGlvPTEuNDAgYXE9MToxLjAwAIAAAAAwZYiEAD//8m+P5OXfBeLGOfKE3xkODvFZuBflHv/+VwJIta6cbpIo4ABLoKBaYTkTAAAC7m1vb3YAAABsbXZoZAAAAAAAAAAAAAAAAAAAA+gAAAPoAAEAAAEAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAIAAAIYdHJhawAAAFx0a2hkAAAAAwAAAAAAAAAAAAAAAQAAAAAAAAPoAAAAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAQAAAAACgAAAAWgAAAAAAJGVkdHMAAAAcZWxzdAAAAAAAAAABAAAD6AAAAAAAAQAAAAABkG1kaWEAAAAgbWRoZAAAAAAAAAAAAAAAAAAAQAAAAEAAVcQAAAAAAC1oZGxyAAAAAAAAAAB2aWRlAAAAAAAAAAAAAAAAVmlkZW9IYW5kbGVyAAAAATttaW5mAAAAFHZtaGQAAAABAAAAAAAAAAAAAAAkZGluZgAAABxkcmVmAAAAAAAAAAEAAAAMdXJsIAAAAAEAAAD7c3RibAAAAJdzdHNkAAAAAAAAAAEAAACHYXZjMQAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAACgAFoASAAAAEgAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABj//wAAADFhdmNDAWQACv/hABhnZAAKrNlCjfkhAAADAAEAAAMAAg8SJZYBAAZo6+JLIsAAAAAYc3R0cwAAAAAAAAABAAAAAQAAQAAAAAAcc3RzYwAAAAAAAAABAAAAAQAAAAEAAAABAAAAFHN0c3oAAAAAAAAC5QAAAAEAAAAUc3RjbwAAAAAAAAABAAAAMAAAAGJ1ZHRhAAAAWm1ldGEAAAAAAAAAIWhkbHIAAAAAAAAAAG1kaXJhcHBsAAAAAAAAAAAAAAAALWlsc3QAAAAlqXRvbwAAAB1kYXRhAAAAAQAAAABMYXZmNTguMTIuMTAw';sublime.video.SUPPORTED_PLAY_TYPES=['video/webm','video/mp4'];sublime.video.SUPPORTED_PLAY_TYPE_3GPP=['video/3gpp'];sublime.video.BITRATE_REFERENCE=1000;function videoGetTestingVideo(){return sublime.document.createElement('video');}
sublime.video.canAutoplay=function videoCanAutoplay(){return new sublime.Promise(function(resolve){let element=videoGetTestingVideo();element.muted=true;element.setAttribute('muted','muted');element.setAttribute('playsinline','playsinline');element.src=EMPTY_VIDEO_SRC;const playResult=element.play();if(playResult!==undefined){playResult.then(function(){resolve(true);element=null;}).catch(function(){resolve(false);element=null;});}else{element=null;resolve(false);}});};sublime.video.canPlayType=function(type){const result=videoGetTestingVideo().canPlayType(type);switch(result){case'probably':return 2;case'maybe':return 1;default:return 0;}};sublime.base64url={};var b64u='ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_';var b64pad='=';function base64CharIndex(c){if(c=='+'){return 62;}
if(c=='/'){return 63;}
return b64u.indexOf(c);}
sublime.base64url.decode=function decode(data){var dst='';var i,a,b,c,d;for(i=0;i<data.length-3;i+=4){a=base64CharIndex(data.charAt(i+0));b=base64CharIndex(data.charAt(i+1));c=base64CharIndex(data.charAt(i+2));d=base64CharIndex(data.charAt(i+3));dst+=String.fromCharCode((a<<2)|(b>>>4));if(data.charAt(i+2)!=b64pad){dst+=String.fromCharCode(((b<<4)&0xF0)|((c>>>2)&0x0F))}
if(data.charAt(i+3)!=b64pad){dst+=String.fromCharCode(((c<<6)&0xC0)|d)}}
dst=decodeURIComponent(encodeURIComponent(dst));return dst;};sublime.helpers.createNamespace('sublime.gdpr.injected');sublime.gdpr.consentsProcessed=!!sublime.gdpr.consentsProcessed;const SOURCE_DEFAULT=0;const SOURCE_CMP=1;const SOURCE_GEO=2;const SOURCE_INJECTED=3;const PURPOSE_ONE='1';const SUBLIME_PURPOSES=['1','2','3','4','7','9','10',];let gdprApplies=false;let consentString=null;let consentStringVersion=null;const sspConsents={sublime:{id:114,consent:false},smartadserver:{id:45,consent:false},improve:{id:253,consent:false},appnexus:{id:32,consent:false},sticky:{id:285,consent:false},rubicon:{id:52,consent:false},criteo:{id:91,consent:false},};let cmpExists=false;let cmpReady=false;let gdprAppliesSource=SOURCE_DEFAULT;const cmpGetConsentTimeout=1000;const cmpWaitTimeout=1000;const cmpWaitInterval=100;const geolocTimeout=500;const geolocCaching=604800000;if(sublime.helpers.hasProperty(sublime.gdpr,'injected.gdprApplies')){gdprApplies=sublime.gdpr.injected.gdprApplies;gdprAppliesSource=SOURCE_INJECTED;}else if(sublime.isFeatureEnabled('sskzGDPR')){gdprApplies=true;}
sublime.gdpr.tcfVersion=null;sublime.helpers.createNamespace('sublime.gdpr.tcf.v1');sublime.gdpr.tcf.v1.getConsentData=function gdprTcfV1GetConsentData(){sublime.gdpr.tcfVersion=1;return new sublime.Promise(function fulfill(resolve,reject){var timeout=sublime.timer.setTimeout(function delay(){sublime.gdpr.isTooLate=true;return reject({message:'GDPR: cmp consent on timeout',executeGeoloc:true,});},cmpGetConsentTimeout);sublime.window.__cmp('getConsentData',null,function getConsent(VendorConsentData,success){if(sublime.gdpr.isTooLate){return reject({message:'GDPR: cmp consent retrieved too late',executeGeoloc:true,});}
log.info('GDPR: cmp consent retrieved');log.info(VendorConsentData);if(!success||!VendorConsentData){return reject({message:'GDPR: cmp consent response is on error',executeGeoloc:true,});}
consentString=VendorConsentData.consentData;consentStringVersion=VendorConsentData.vendorListVersion;gdprApplies=VendorConsentData.gdprApplies;gdprAppliesSource=SOURCE_CMP;cmpReady=true;sublime.timer.clearTimeout(timeout);return resolve();});});};sublime.gdpr.tcf.v1.getVendorConsents=function gdprTcfV1GetVendorConsents(vendorIds){return new sublime.Promise(function fulfill(resolve){try{sublime.window.__cmp('getVendorConsents',vendorIds,function getConsent(VendorConsents,success){log.info('GDPR: getVendorConsents response:',success,VendorConsents);if(!success||!sublime.isObject(VendorConsents)||VendorConsents.vendorConsents===undefined){log.warn('GDPR: getVendorConsents data invalid');log.warn(VendorConsents);resolve();return;}
Object.keys(sspConsents).forEach(function eachSsp(sspName){var sspId=sspConsents[sspName].id;var keyExists=sublime.isDefined(VendorConsents.vendorConsents[sspId]);var purposeOne=VendorConsents.purposeConsents[PURPOSE_ONE];if(keyExists&&purposeOne){sspConsents[sspName].consent=VendorConsents.vendorConsents[sspId];}});sublime.gdpr.consentsProcessed=true;resolve();});}catch(e){log.error('GDPR: Cannot process consent',{},e);resolve();}});};sublime.helpers.createNamespace('sublime.gdpr.tcf.v2');sublime.gdpr.tcf.v2.getConsentData=function gdprTcfV2GetConsentData(){return new sublime.Promise(function fulfill(resolve,reject){const timeout=sublime.timer.setTimeout(function delay(){sublime.gdpr.isTooLate=true;return reject({message:'GDPR: cmp consent on timeout',executeGeoloc:true,});},cmpGetConsentTimeout);sublime.window.__tcfapi('addEventListener',2,function listener(tcData,success){if(!success){reject({message:'Unable to have events from tcf provider',executeGeoloc:true,});return;}
sublime.gdpr.tcfVersion=tcData.tcfPolicyVersion||2;sublime.gdpr.tcf.v2.getTcString(tcData,timeout).then(function done(haveConsent){if(haveConsent){resolve();}}).catch(function error(){reject({message:'GDPR: cmp consent response is on error',executeGeoloc:true,});});});});};sublime.gdpr.tcf.v2.getTcString=function gdprTcfV2GetConsentData(tcData,timeout){return new sublime.Promise(function fulfill(resolve){if(tcData.tcString){if(sublime.gdpr.isTooLate){log.warn('GDPR: cmp consent retrieved too late');return resolve(false);}
log.info('GDPR: cmp consent retrieved');log.info(tcData);consentString=tcData.tcString;sublime.gdpr.injected.consentString=consentString;consentStringVersion=tcData.cmpVersion;gdprApplies=tcData.gdprApplies;sublime.gdpr.injected.gdprApplies=gdprApplies;gdprAppliesSource=SOURCE_CMP;cmpReady=true;sublime.timer.clearTimeout(timeout);sublime.window.__tcfapi('removeEventListener',2,function stopListening(success){if(success){log.info('GDPR: Successfully removed eventListener');}},tcData.listenerId);return resolve(tcData.tcString);}
return resolve(false);});};sublime.gdpr.tcf.v2.getVendorConsents=function gdprTcfV2GetVendorConsents(vendorIds){return new sublime.Promise(function gdprTcfV2GetVendorConsentsPromise(resolve){try{sublime.window.__tcfapi('getTCData',2,function getTCData(TCData,success){log.info('GDPR: getTCData response:',success,TCData);if(!success||!sublime.isObject(TCData)||TCData.vendor===undefined){log.warn('GDPR: getTCData data invalid');log.warn(TCData);return resolve(sspConsents);}
Object.keys(sspConsents).forEach(function eachSsp(sspName){var sspId=sspConsents[sspName].id;var keyExists=sublime.isDefined(TCData.vendor.consents[sspId]);var purposes=TCData.purpose.consents[PURPOSE_ONE];if(sspId===sspConsents.sublime.id){purposes=SUBLIME_PURPOSES.every(function every(value){return TCData.purpose.consents[value];});}
if(keyExists&&purposes){sspConsents[sspName].consent=TCData.vendor.consents[sspId];}else{sspConsents[sspName].consent=false;}});sublime.gdpr.consentsProcessed=true;return resolve(sspConsents);},vendorIds);}catch(e){log.error('GDPR: Cannot process consent',{},e);resolve(sspConsents);}});};sublime.gdpr.isActive=function isActive(){return gdprApplies;};sublime.gdpr.isTooLate=false;sublime.gdpr.getConsentString=function getConsentString(){return consentString;};sublime.gdpr.getSublimeConsent=function getSublimeConsent(){return sspConsents.sublime.consent;};sublime.gdpr.getVendorConsent=function getVendorConsent(vendor){return sspConsents[vendor];};sublime.gdpr.cmpHasAnswered=function cmpHasAnswered(){return cmpExists&&cmpReady;};sublime.gdpr.getAllConsentData=function getAllConsentData(){return{gdprApplies:gdprApplies,gdprAppliesSource:gdprAppliesSource,sublimeVendorConsent:sspConsents.sublime.consent,cmpExists:cmpExists,cmpReady:cmpReady,consentString:consentString,consentStringVersion:consentStringVersion,sspConsents:sspConsents,};};sublime.gdpr.run=function run(){log.info('GDPR: run');if(sublime.gdpr.consentsProcessed){log.info('GDPR: already have consents, no work needed');return sublime.Promise.resolve({consentString:sublime.gdpr.getConsentString(),isActive:sublime.gdpr.isActive(),});}
if(!sublime.isEmpty(sublime.gdpr.injected)){log.info('GDPR: consent injected...');consentString=sublime.gdpr.injected.consentString;gdprApplies=sublime.gdpr.injected.gdprApplies;gdprAppliesSource=SOURCE_INJECTED;cmpExists=true;cmpReady=true;}
return sublime.gdpr.waitForCmp().then(function checkCmp(cmpFramework){cmpExists=!!cmpFramework;log.info('GDPR: isFramework present ?',cmpFramework);sublime.gdpr.framework=cmpFramework.framework;if(!consentString){return sublime.gdpr.framework.getConsentData();}
return sublime.Promise.resolve();}).then(sublime.gdpr.processConsents).then(function getConsentString(){log.info(sublime.gdpr.getAllConsentData());return sublime.Promise.resolve({consentString:sublime.gdpr.getConsentString(),isActive:sublime.gdpr.isActive(),});}).catch(function catchError(error){log.warn('GDPR: Error in cmp',error);if(error.message){log.warn(error.message);}
if(error.executeGeoloc){log.info('GDPR: cmp consent fallback via geoloc',error);return sublime.gdpr.getGeolocConsent().then(function processGeolocConsent(){Object.keys(sspConsents).forEach(function eachSsp(vendor){sspConsents[vendor].consent=!sublime.gdpr.isActive();});return sublime.Promise.resolve({consentString:sublime.gdpr.getConsentString(),isActive:sublime.gdpr.isActive(),});});}
log.info('GDPR: gdprApplies ?',sublime.gdpr.isActive());return sublime.Promise.resolve({consentString:sublime.gdpr.getConsentString(),isActive:sublime.gdpr.isActive(),});});};sublime.gdpr.waitForCmp=function waitForCmp(){log.info('GDPR: wait for cmp framework...');return new sublime.Promise(function fulfill(resolve,reject){const i=sublime.timer.setInterval(function tick(){const framework=sublime.gdpr.getFramework();if(framework){sublime.timer.clearInterval(i);sublime.timer.clearTimeout(t);resolve(framework);}},cmpWaitInterval);const t=sublime.timer.setTimeout(function delay(){sublime.timer.clearInterval(i);return reject({executeGeoloc:true});},cmpWaitTimeout);});};sublime.gdpr.getFramework=function getFramework(){if(sublime.isFunction(sublime.window.__tcfapi)){return{framework:sublime.gdpr.tcf.v2,};}
if(sublime.isFunction(sublime.window.__cmp)){return{framework:sublime.gdpr.tcf.v1,};}
return null;};sublime.gdpr.getCachedGeolocConsent=function getCachedGeolocConsent(){return storage.get('is_eea');};sublime.gdpr.getGeolocConsent=function getGeolocConsent(){log.info('GDPR: call geoloc endpoint...');return new sublime.Promise(function fulfill(resolve){var cachedGeoConsent=sublime.gdpr.getCachedGeolocConsent();if(cachedGeoConsent!==null){gdprApplies=cachedGeoConsent;gdprAppliesSource=SOURCE_GEO;log.info('GDPR: geoloc endpoint caching on success, gdpr applies ? '+gdprApplies);resolve();return;}
function onError(){log.warn('GDPR: geoloc endpoint on error');return resolve();}
function onTimeout(){log.warn('GDPR: geoloc endpoint on timeout');return resolve();}
function onSuccess(response){try{if(response===''){throw new Error('Geoloc response is empty');}
gdprApplies=!!sublime.pInt(response);gdprAppliesSource=SOURCE_GEO;storage.set('is_eea',gdprApplies,geolocCaching);log.info('GDPR: geoloc endpoint on success, gdpr applies ? '+gdprApplies);}catch(error){log.warn('GDPR: geoloc endpoint response unreadable',{},error);}
return resolve();}
try{sublime.xhr('https://'+sublime.env('geoloc_eeu_host'),{timeout:geolocTimeout,async:true,success:onSuccess,error:onError,onTimeout:onTimeout,});}catch(error){log.error('GDPR: geoloc endpoint execution on error',{},error);resolve();}});};sublime.gdpr.processConsents=function processConsents(){var vendorIds=[];log.info('GDPR: processConsents');if(!cmpReady||!consentString){sspConsents.sublime.consent=!sublime.gdpr.isActive();return sublime.Promise.resolve();}
Object.keys(sspConsents).forEach(function eachSsp(sspName){vendorIds.push(sspConsents[sspName].id);});return sublime.gdpr.framework.getVendorConsents(vendorIds);};if(sublime.isFeatureEnabled('sskzGDPR')){if(true&&sublime.gdpr.getCachedGeolocConsent()!==null){gdprApplies=sublime.gdpr.getCachedGeolocConsent();gdprAppliesSource=SOURCE_GEO;}}
sublime.gdpr.resetValues=function resetValues(){log.info('GDPR: reset default values');consentString=null;gdprApplies=false;gdprAppliesSource=SOURCE_DEFAULT;cmpExists=false;cmpReady=false;storage.unset('is_eea');if(sublime.isFeatureEnabled('sskzGDPR')){gdprApplies=true;}
return{consentString:consentString,isActive:gdprApplies,};};sublime.gdpr.setValue=function setValue(key,value){if(sublime.env('app_env')!=='prod'){switch(key){case'isActive':gdprApplies=value;break;case'consentString':consentString=value;break;case'cmpExists':cmpExists=value;break;case'cmpReady':cmpReady=value;break;case'sublimeConsent':sspConsents.sublime.consent=value;break;default:}}};sublime.uuid=sublime.uuid||{};const uuidTypes={p:1,s:1,u:1,};const uuidRegex=/^[a-z][0-9]+$/i;let uuids={};sublime.uuid.generate=function generateUUID(type){let uuidType=type;if(!(uuidType in uuidTypes)){log.warn('Unspecified Uniquid');uuidType='U';}
return uuidType+(sublime.rngU32()*sublime.rngU32());};sublime.uuid.get=function getUUID(type){return type&&type in uuids?uuids[type]:null;};sublime.uuid.isValid=function isValidUUID(uuid){return uuid&&typeof uuid==='string'&&uuidRegex.test(uuid);};function initUuids(){const localSuid=storage.get('suid');uuids={s:localSuid||sublime.uuid.generate('s'),p:sublime.uuid.generate('p'),};}
initUuids();const GDPR_CONSTANTS=Object.freeze({NO_CMP:0,CMP_NOT_READY:1,CMP_READY:2,});function commonsPrefire(){const isFeatureEnabled=sublime.isFeatureEnabled;const gdpr=sublime.gdpr;this.qs=this.qs||{};if(isFeatureEnabled('sskzGDPR')){const gdprData=gdpr.getAllConsentData();const sublimeConsent=gdpr.getVendorConsent('sublime');this.qs.gc=sublimeConsent&&sublimeConsent.consent?1:0;if(gdprData.cmpExists&&gdprData.cmpReady){this.qs.gm=GDPR_CONSTANTS.CMP_READY;}else if(gdprData.cmpExists){this.qs.gm=GDPR_CONSTANTS.CMP_NOT_READY;}else{this.qs.gm=GDPR_CONSTANTS.NO_CMP;}
this.qs.ga=gdprData.gdprApplies?1:0;this.qs.gs=gdprData.gdprAppliesSource;}
if(gdpr&&gdpr.tcfVersion){this.qs.gv=gdpr.tcfVersion;}}
function commonsSkinzPrefire(){const isFeatureEnabled=sublime.isFeatureEnabled;const gdpr=sublime.gdpr;const helpers=sublime.helpers;if(sublime.ad||!sublime.isEmpty(sublime.creativeAd)){this.qs=this.qs||{};if(helpers.hasProperty(sublime,'creativeAd.id')){this.qs.a=sublime.creativeAd.id;}else if(helpers.hasProperty(sublime,'ad.id')){this.qs.a=sublime.ad.id;}
if(helpers.hasProperty(sublime,'creativeAd.raid')){this.qs.ra=sublime.creativeAd.raid;}else if(helpers.hasProperty(sublime,'ad.raid')){this.qs.ra=sublime.ad.raid;}else{delete this.qs.ra;}
if(helpers.hasProperty(sublime,'creativeAd.rcid')){this.qs.rcid=sublime.creativeAd.rcid;}else if(helpers.hasProperty(sublime,'ad.rcid')){this.qs.rcid=sublime.ad.rcid;}else{delete this.qs.rcid;}
if(helpers.hasProperty(sublime,'creativeAd.type')){this.qs.at=sublime.creativeAd.type;}else if(helpers.hasProperty(sublime,'ad.type')){this.qs.at=sublime.ad.type;}
if(helpers.hasProperty(sublime,'creativeAd.creative_id')&&sublime.creativeAd.creative_id!=='[sas_creativeId]'){this.qs.creaid=sublime.creativeAd.creative_id;}else if(helpers.hasProperty(sublime,'ad.creative_id')&&sublime.ad.creative_id!=='[sas_creativeId]'){this.qs.creaid=sublime.ad.creative_id;}else{delete this.qs.creaid;}
if(helpers.hasProperty(sublime,'creativeAd.placementType')){this.qs.pt=sublime.creativeAd.placementType;}
if(helpers.hasProperty(sublime,'creativeAd.deal_id')){this.qs.di=sublime.creativeAd.deal_id;}else if(helpers.hasProperty(sublime,'ad.deal_id')){this.qs.di=sublime.ad.deal_id;}else{delete this.qs.di;}
if(helpers.hasProperty(sublime,'creativeAd.insertion_id')){this.qs.ii=sublime.creativeAd.insertion_id;}else if(helpers.hasProperty(sublime,'ad.insertion_id')){this.qs.ii=sublime.ad.insertion_id;}else{delete this.qs.ii;}
if(helpers.hasProperty(sublime,'creativeAd.response_format')){this.qs.ssprf=sublime.creativeAd.response_format;}else if(helpers.hasProperty(sublime,'ad.response_format')){this.qs.ssprf=sublime.ad.response_format;}else{delete this.qs.ssprf;}
if(helpers.hasProperty(sublime.creativeAd,'vpaid.provider')){this.qs.vtpp=sublime.creativeAd.vpaid.provider;}
if(helpers.hasProperty(sublime,'ad.ssp_name')){this.qs.sspname='sspv3-'+sublime.ad.ssp_name;}else{delete this.qs.sspname;}}
if(isFeatureEnabled('sskzGDPR')){if(helpers.hasProperty(sublime,'ad.ssp_name')){const vendorConsent=gdpr.getVendorConsent(sublime.ad.ssp_name);this.qs.gcp=vendorConsent&&vendorConsent.consent?1:0;}}
if(helpers.hasProperty(sublime,'prebider.pbav')){this.qs.pbav=sublime.prebider.pbav;}}
function commonsExternalPrefire(){const macros=sublime.macros;if(this.url){this.url=macros.replace(this.url);}}
function commonsVideoQuartilePrefire(){if('video_duration'in sublime.creativeAd){this.qs.avd=sublime.creativeAd.video_duration;}}
function commonsPlacePrefire(){const gdpr=sublime.gdpr;if(sublime.isFeatureEnabled('sskzGDPR')){const gdprData=gdpr.getAllConsentData();this.qs.gd=gdprData.consentString;this.qs.gdv=gdprData.consentStringVersion;}}
function commonsImpressionMonetizedOnFire(){sublime.hook.call('step.impression.monetized');}
function commonsImpressionMonetizedMembersOnFire(){sublime.hook.call('step.impression.monetized');}
function computeCommonsPixels(data){const pixels={_common:{preFireCallback:commonsPrefire,qs:{src:data.mode,t:data.timeStart,ver:data.versionId,device:data.device.charAt(0),puid:data.puid,suid:data.suid,},},_commonSkinz:{inherit:'_common',preFireCallback:commonsSkinzPrefire,qs:{},},_external:{isInternal:false,preFireCallback:commonsExternalPrefire,qs:{},},_videoQuartile:{inherit:'_commonSkinz',qs:{},preFireCallback:commonsVideoQuartilePrefire,},call:{inherit:'_commonSkinz',qs:{e:'l',},addBrowserDimensions:true,},unload:{inherit:'_commonSkinz',qs:{e:'ul',},},place:{preFireCallback:commonsPlacePrefire,inherit:'_commonSkinz',addBrowserDimensions:true,addPageHeightDimension:true,qs:{e:'p',},},impression:{inherit:'_commonSkinz',qs:{e:'i0',mm:0,},addBrowserDimensions:true,addPageHeightDimension:true,members:{sec1:{delay:1000,inherit:'impression',qs:{e:'i1',mm:0,},},sec3:{delay:3000,inherit:'impression',qs:{e:'i3',mm:0,},},sec4:{delay:4000,inherit:'impression',qs:{e:'i4',mm:0,},},sec5:{delay:5000,inherit:'impression',qs:{e:'i5',mm:0,},},},},click:{url:'data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==',repeat:1337,addBrowserDimensions:true,addPageHeightDimension:true,},vpaid_error:{inherit:'_commonSkinz',qs:{e:'ve',},},};let mi;if(data.device==='mobile'){mi=3;}else{mi=5;}
if(mi&&pixels.impression.members['sec'+mi]){pixels.impression.members['sec'+mi].qs.mm=1;pixels.impression.members['sec'+mi].onFire=commonsImpressionMonetizedMembersOnFire;}else{pixels.impression.qs.mm=1;pixels.impression.onFire=commonsImpressionMonetizedOnFire;}
return pixels;}
const commonsPixels=computeCommonsPixels({device:sublime.device||'',puid:sublime.uuid.get('p'),suid:sublime.uuid.get('s'),timeStart:sublime.timeStart,mode:"wf",versionId:20210301151955,});if(window){window.sublime=window.sublime||{};window.sublime.pixels=commonsPixels;}
sublime.helpers.createNamespace('sublime.vpaid');sublime.vpaid.hookNames={adLoaded:'step.vpaid.adLoaded',adError:'step.vpaid.adError',adStopped:'step.vpaid.adStopped',adPaused:'event.vpaid.adPaused',adPlaying:'event.vpaid.adPlaying',adClickThru:'event.vpaid.adClickThru',pauseAd:'event.vpaid.pauseAd',resumeAd:'event.vpaid.resumeAd',};sublime.vpaid.defaultInitAdParams={width:0,height:0,viewMode:'normal',bitrate:10000,};sublime.vpaid.render=function vpaidRender(vpaidData,vpaidPlayer){const scriptSandbox=sublime.helpers.getScript(vpaidData.mediaFile,{sandbox:true});const player=vpaidPlayer;return scriptSandbox.then(function scriptSandboxThen(window){return new sublime.Promise(function renderPromise(resolve,reject){const vpaidAd=window.getVPAIDAd();const vpaidWrapper=sublime.vpaid.create(vpaidAd);vpaidWrapper.config=vpaidData;player.video.isVpaid=true;player.video.vpaid=vpaidWrapper;vpaidWrapper.initAd(vpaidData.config.width,vpaidData.config.height,vpaidData.config.viewMode,vpaidData.config.bitrate,{AdParameters:vpaidData.adParameters},{slot:player.container,videoSlot:player.video,videoSlotCanAutoPlay:true});sublime.hook.register({namespace:sublime.vpaid.hookNames.adLoaded,callback:function adLoadedCallback(){vpaidWrapper.startAd();resolve(vpaidWrapper);},});sublime.hook.register({namespace:sublime.vpaid.hookNames.adError,callback:function adErrorCallback(message){let data=JSON.stringify(vpaidData);if(data.length>3584){data=JSON.stringify({provider:vpaidData.provider,adSystem:vpaidData.adSystem,mediaFile:vpaidData.mediaFile,});}
log.error('AdError from vpaid.',{adUnitMessage:message,adUnit:data,});reject(vpaidWrapper);},});});}).catch(function scriptSandboxCatch(e){delete sublime.creativeAd.vpaid;player.container.remove();log.error('Could not load VPAID media.',{adUnit:JSON.stringify(vpaidData),},e);});};sublime.vpaid.clean=function clean(videoContainer){const children=videoContainer.children;const toRemove=[];for(let i=0;i<children.length;i+=1){if(!sublime.helpers.isSublimeElement(children[i])){toRemove.push(children[i]);}}
for(let i=0;i<toRemove.length;i+=1){videoContainer.removeChild(toRemove[i]);}};sublime.vpaid.addExtraCss=function addExtraCss(provider){let css='';switch(provider){case'ias':css='#'+sublime.display.elements.VIDEO_ID[sublime.device]
+' ~ .play-button {background-color: rgba(0, 0, 0, 0.4); background-size: 60px;}'
+'#'+sublime.display.elements.VIDEO_ID[sublime.device]
+' + div {position: absolute !important;}'
+'#'+sublime.display.elements.VIDEO_ID[sublime.device]
+' + svg {top: 0;}';break;case'doubleverify':case'moat':case'adledge':break;default:break;}
if(sublime.device==='mobile'){css=''
+'#'+sublime.display.elements.VIDEO_CONTAINER_ID[sublime.device]+' > div:first-of-type '
+'{ position: absolute;transform: translateY(0); z-index: 0 !important; }'
+'#'+sublime.display.elements.VIDEO_CONTAINER_ID[sublime.device]+' > div:first-of-type > video '
+'{ position: initial !important; }'
+'div[class*=" integral-vid-"] '
+'{ top: 0 }';}
if(css!==''){sublime.display.addCss(css);}};function Wrapper(){this.isDeleted=false;this.isPaused=false;this.config={};this.init=function init(vpaidCreative){this.creative=vpaidCreative;this.isVideoFinished=false;this.version=this.creative.handshakeVersion();this.setCallbacksForCreative();this.checkVPAIDInterface(this.creative);return this;};this.collapseAd=function collapseAd(){log.info('VPAID > Emit collapseAd');sublime.hook.register({namespace:sublime.vpaid.hookNames.adLoaded,callback:this.creative.collapseAd(),});};this.expandAd=function expandAd(){log.info('VPAID > Emit expandAd');sublime.hook.register({namespace:sublime.vpaid.hookNames.adLoaded,callback:this.creative.expandAd(),});};this.initAd=function initAd(width,height,viewMode,desiredBitrate,creativeData,environmentVars){this.creative.initAd(width,height,viewMode,desiredBitrate,creativeData,environmentVars);};this.pauseAd=function pauseAd(){log.info('VPAID > Emit pauseAd');if(!this.isPaused){sublime.hook.call(sublime.vpaid.hookNames.pauseAd);}};this.resizeAd=function resizeAd(width,height,viewMode){log.info('VPAID > Emit resizeAd');sublime.hook.register({namespace:sublime.vpaid.hookNames.adLoaded,callback:function adLoaded(){log.info('VPAID > Resizing ad w='+width+' h='+height+' v='+viewMode);this.creative.resizeAd(width,height,viewMode);}.bind(this),});};this.resumeAd=function resumeAd(){log.info('VPAID > Emit resumeAd');if(this.isPaused){sublime.hook.call(sublime.vpaid.hookNames.resumeAd);}};this.startAd=function startAd(){log.info('VPAID > startAd');this.creative.startAd();};this.stopAd=function stopAd(){this.creative.stopAd();};this.on=function on(eventName,callback){log.info('VPAID > New subscribtion on event : ',eventName,callback);this.creative.subscribe(callback,eventName,this);};this.onAdClickThru=function onAdClickThru(url,id,playerHandles){let playerReallyHandles=playerHandles;log.info('VPAID > Clickthrough portion of the ad was clicked, url: ',url);sublime.ad.url=url||sublime.ad.url;sublime.creativeAd.url=url||sublime.creativeAd.url;if(!sublime.ad.isExternal){const shouldOpenTargetUrlProviders=['ias','doubleverify','moat'];playerReallyHandles=playerHandles&&sublime.inArray(sublime.ad.vpaid.provider,shouldOpenTargetUrlProviders);}
if(playerReallyHandles&&!this.isVideoFinished){sublime.hook.call(sublime.vpaid.hookNames.adClickThru);}else{sublime.analytics.fire(347,'click');}};this.onAdDurationChange=function onAdDurationChange(){};this.onAdError=function onAdError(message){log.info('VPAID > onAdError >',message);sublime.analytics.fire(347,'vpaid_error');emitter.info('rendering.vpaid.adError',{adUnitMessage:message,adUnit:this.config,});sublime.hook.call(sublime.vpaid.hookNames.adError,message);};this.onAdExpandedChange=function onAdExpandedChange(){log.info('VPAID > Ad Expanded Changed to: '+this.creative.getAdExpanded());};this.onAdImpression=function onAdImpression(){log.info('VPAID > Ad Impression');};this.onAdInteraction=function onAdInteraction(id){log.info('VPAID > A non-clickthrough event has occured');};this.onAdLinearChange=function onAdLinearChange(){log.info('VPAID > Ad linear has changed: '+this.creative.getAdLinear());};this.onAdLoaded=function onAdLoaded(){log.info('VPAID > ad has been loaded');sublime.hook.call(sublime.vpaid.hookNames.adLoaded);if(window.google&&window.google.ima){window.google.ima.settings.setVpaidMode(window.google.ima.ImaSdkSettings.VpaidMode.INSECURE);}};this.onAdLog=function onAdLog(message){log.info('VPAID > onAdLog: '+message);};this.onAdPaused=function onAdPaused(){log.info('VPAID > onAdPaused');sublime.hook.call(sublime.vpaid.hookNames.adPaused);this.isPaused=true;};this.onAdPlaying=function onAdPlaying(){log.info('VPAID > onAdPlaying');sublime.hook.call(sublime.vpaid.hookNames.adPlaying);this.isPaused=false;};this.onAdRemainingTimeChange=function onAdRemainingTimeChange(){};this.onAdSizeChange=function onAdSizeChange(){log.info('VPAID > Ad size changed to: w='+this.creative.getAdWidth()+' h ='+this.creative.getAdHeight());};this.onAdSkippableStateChange=function onAdSkippableStateChange(){log.info('VPAID > Ad Skippable State Changed to: '+this.creative.getAdSkippableState());};this.onAdUserAcceptInvitation=function onAdUserAcceptInvitation(){log.info('VPAID > onAdUserAcceptInvitation');};this.onAdUserClose=function onAdUserClose(){log.info('VPAID > onAdUserClose');sublime.clean();};this.onAdUserMinimize=function onAdUserMinimize(){log.info('VPAID > onAdUserMinimize');};this.onAdVideoStart=function onAdVideoStart(){log.info('VPAID > Video 0% completed');sublime.analytics.fire(347,'videoQ0');sublime.hook.call('step.video.quartile0',{quartile:0,quartileName:'start',});};this.onAdVideoFirstQuartile=function onAdVideoFirstQuartile(){log.info('VPAID > Video 25% completed');sublime.analytics.fire(347,'videoQ1');sublime.hook.call('step.video.quartile1',{quartile:1,quartileName:'firstQuartile',});};this.onAdVideoMidpoint=function onAdVideoMidpoint(){log.info('VPAID > Video 50% completed');sublime.analytics.fire(347,'videoQ2');sublime.hook.call('step.video.quartile2',{quartile:2,quartileName:'midpoint',});};this.onAdVideoThirdQuartile=function onAdVideoThirdQuartile(){log.info('VPAID > Video 75% completed');sublime.analytics.fire(347,'videoQ3');sublime.hook.call('step.video.quartile3',{quartile:3,quartileName:'thirdQuartile',});};this.onAdVideoComplete=function onAdVideoComplete(){log.info('VPAID > Video 100% completed');sublime.analytics.fire(347,'videoQ4');sublime.hook.call('step.video.quartile4',{quartile:4,quartileName:'complete',});};this.onAdVolumeChange=function onAdVolumeChange(){log.info('VPAID > Ad Volume has changed to - '+this.creative.getAdVolume());};this.onStartAd=function onStartAd(){log.info('VPAID > Ad has started');this.isPaused=false;sublime.hook.register({namespace:sublime.vpaid.hookNames.pauseAd,callback:this.creative.pauseAd.bind(this.creative),});sublime.hook.register({namespace:sublime.vpaid.hookNames.resumeAd,callback:this.creative.resumeAd.bind(this.creative),});};this.onStopAd=function onStopAd(){log.info('VPAID > Ad has stopped');this.isVideoFinished=true;sublime.hook.call(sublime.vpaid.hookNames.adStopped);};this.onSkipAd=function onSkipAd(){log.info('VPAID > Ad was skipped');};this.getAdExpanded=function getAdExpanded(){log.info('VPAID > getAdExpanded');return this.creative.getAdExpanded();};this.getAdLinear=function getAdLinear(){log.info('VPAID > getAdLinear');return this.creative.getAdLinear();};this.getAdRemainingTime=function getAdRemainingTime(){log.info('VPAID > getAdRemainingTime');return this.creative.getAdRemainingTime();};this.getAdSkippableState=function getAdSkippableState(){log.info('VPAID > getAdSkippableState');return this.creative.getAdSkippableState();};this.getAdVolume=function getAdVolume(){return this.creative.getAdVolume();};this.setAdVolume=function setAdVolume(val){this.creative.setAdVolume(val);};this.setCallbacksForCreative=function setCallbacksForCreative(){var callbacks={AdStarted:this.onStartAd,AdStopped:this.onStopAd,AdSkipped:this.onSkipAd,AdLoaded:this.onAdLoaded,AdLinearChange:this.onAdLinearChange,AdSizeChange:this.onAdSizeChange,AdExpandedChange:this.onAdExpandedChange,AdSkippableStateChange:this.onAdSkippableStateChange,AdDurationChange:this.onAdDurationChange,AdRemainingTimeChange:this.onAdRemainingTimeChange,AdVolumeChange:this.onAdVolumeChange,AdImpression:this.onAdImpression,AdClickThru:this.onAdClickThru,AdInteraction:this.onAdInteraction,AdVideoStart:this.onAdVideoStart,AdVideoFirstQuartile:this.onAdVideoFirstQuartile,AdVideoMidpoint:this.onAdVideoMidpoint,AdVideoThirdQuartile:this.onAdVideoThirdQuartile,AdVideoComplete:this.onAdVideoComplete,AdUserAcceptInvitation:this.onAdUserAcceptInvitation,AdUserMinimize:this.onAdUserMinimize,AdUserClose:this.onAdUserClose,AdPaused:this.onAdPaused,AdPlaying:this.onAdPlaying,AdError:this.onAdError,AdLog:this.onAdLog,};Object.keys(callbacks).forEach(function cb(eventName){log.info('VPAID > Subscribe to ',eventName);this.creative.subscribe(callbacks[eventName],eventName,this);},this);};this.checkVPAIDInterface=function checkVPAIDInterface(vpaidCreative){if(!vpaidCreative.handshakeVersion||typeof vpaidCreative.handshakeVersion!=='function'||!vpaidCreative.initAd||typeof vpaidCreative.initAd!=='function'||!vpaidCreative.startAd||typeof vpaidCreative.startAd!=='function'||!vpaidCreative.stopAd||typeof vpaidCreative.stopAd!=='function'||!vpaidCreative.skipAd||typeof vpaidCreative.skipAd!=='function'||!vpaidCreative.resizeAd||typeof vpaidCreative.resizeAd!=='function'||!vpaidCreative.pauseAd||typeof vpaidCreative.pauseAd!=='function'||!vpaidCreative.resumeAd||typeof vpaidCreative.resumeAd!=='function'||!vpaidCreative.expandAd||typeof vpaidCreative.expandAd!=='function'||!vpaidCreative.collapseAd||typeof vpaidCreative.collapseAd!=='function'||!vpaidCreative.subscribe||typeof vpaidCreative.subscribe!=='function'||!vpaidCreative.unsubscribe||typeof vpaidCreative.unsubscribe!=='function'){log.error('VPAID > The creative doesn\'t conform to the VPAID spec',{adUnit:JSON.stringify(this.creative),});return false;}
log.info('VPAID > The creative is conform to the VPAID spec');return true;};}
sublime.vpaid.create=function vpaidCreate(vpaidCreative){return(new Wrapper()).init(vpaidCreative);};sublime.moat={};const MOAT_TRACKING={disabled:0,display:1,video:2,both:3,};sublime.moat.register=function register(){if(347===803){log.log('Moat: disabled on preview zone');return;}
sublime.hook.register('step.creativeContainerAdded',function onContainerAdded(){if(!sublime.creativeAd){return;}
switch(sublime.creativeAd.moat){case MOAT_TRACKING['display']:log.log('Moat: Inject script `Display`');injectScriptDisplay(sublime.creativeAd);break;case MOAT_TRACKING['video']:log.log('Moat: Inject script `Video`');injectScriptVideo(sublime.creativeAd);break;case MOAT_TRACKING['both']:log.log('Moat: Inject scripts `Display` & `Video`');injectScriptDisplay(sublime.creativeAd);injectScriptVideo(sublime.creativeAd);break;default:log.log('Moat: disabled in Ad');break;}});};function getApiParams(ad,scriptType){const p={moatClientLevel1:ad.rcid||ad.campaign_id||'0',moatClientLevel2:ad.raid||ad.id||'0',moatClientLevel3:ad.ssp_name?ad.ssp_name+'_'+(ad.creative_id||'0'):'',moatClientLevel4:347||'0',};if(scriptType==='video'){p.slicer1="www.footeo.com";p.slicer2="www.footeo.com";}
log.log('Moat: '+scriptType+' params generated',p);return p;}
function injectScriptDisplay(creativeAd){try{let creativeContainer;if(creativeAd.creative_type==='mobile kargo sticky'){creativeContainer=sublime.display.getKargoCreativeContainer().contentWindow.document.getElementsByClassName('celtra-ad-v3')[0];}else{creativeContainer=sublime.display.getCreativeContainer();}
if(!creativeContainer){throw new Error('Can\'t inject Moat display, creativeContainer is not available');}
const isSkin=sublime.device==='desktop';const moatParams=getApiParams(creativeAd,'display');const scriptElement=createDisplayScript(moatParams,isSkin);if(!scriptElement){throw new Error('Moat Display script not available');}
creativeContainer.appendChild(scriptElement);log.log('Moat: tracking display script injected');}catch(e){log.error('Error on Moat Display script injection',{creativeAd:creativeAd,},e);}}
function createDisplayScript(params,isSkin){try{if(isSkin){params.skin=1;}
const src="https://z.moatads.com/sublimeskinz337986118618/moatad.js"+'#'+sublime.qs.build(params);const s=sublime.document.createElement('script');s.type='text/javascript';s.src=src;return s;}catch(e){log.error('Error on Moat Video initialization',{params:params},e);return null;}}
function createVideoScript(a,c,d){try{const f=sublime.document.createElement('script');let b=[];let e;let g;c={adData:{ids:c,duration:d,url:a.src,},dispatchEvent:function dispatchEvent(a){if(this.sendEvent){if(b){b.push(a);a=b;b=false;}
this.sendEvent(a);}else{b.push(a);}},};d='_moatApi'+Math.floor(1E8*Math.random());try{e=a.ownerDocument;g=e.defaultView||e.parentWindow;}catch(l){e=document;g=window;}
g[d]=c;f.type='text/javascript';if(a){a.insertBefore(f,a.childNodes[0]||null);}
f.src="https://z.moatads.com/sublimeskinzjsvidint156314443957/moatvideo.js"+'#'+d;return c;}catch(e){log.error('Error on Moat Display script injection',{params:c},e);return null;}}
function injectScriptVideo(creativeAd){try{if(creativeAd.creative_type==='mobile kargo sticky'){log.log('Moat: video tracking is disabled due to Celtra integration');return;}
let player=sublime.display.getVideoPlayer();if(sublime.previewing&&sublime.preview.params.device){player=sublime.display.getVideoPlayer(sublime.preview.params.device);}
if(typeof player==='undefined'||player===null){log.log('Moat: video not ready');sublime.timer.setTimeout(function injectScriptVideoNewAttempt(){injectScriptVideo(creativeAd);},50);return;}
const params=getApiParams(creativeAd,'video');const duration='41';const moatVideoApiService=createVideoScript(player,params,duration);if(!moatVideoApiService){throw new Error('moatVideoApiService not available');}
registerVideoEvents(player,moatVideoApiService);log.log('Moat: tracking video script injected');}catch(e){log.error('Error on Moat Video script injection',{creativeAd:creativeAd},e);}}
function registerVideoEvents(player,moatVideoApiService){sublime.hook.register('step.video.quartile0',function registerQ0(){try{moatVideoApiService.dispatchEvent({type:'AdVideoStart',adVolume:player.volume,});}catch(e){log.error('Moat event `AdVideoStart` failed',{player:player,moatVideoApiService:moatVideoApiService,},e);}});sublime.hook.register('step.video.quartile1',function registerQ1(){try{moatVideoApiService.dispatchEvent({type:'AdVideoFirstQuartile',adVolume:player.volume,});}catch(e){log.error('Moat event `AdVideoFirstQuartile` failed',{player:player,moatVideoApiService:moatVideoApiService,},e);}});sublime.hook.register('step.video.quartile2',function registerQ2(){try{moatVideoApiService.dispatchEvent({type:'AdVideoMidpoint',adVolume:player.volume,});}catch(e){log.error('Moat event `AdVideoMidpoint` failed',{player:player,moatVideoApiService:moatVideoApiService,},e);}});sublime.hook.register('step.video.quartile3',function registerQ3(){try{moatVideoApiService.dispatchEvent({type:'AdVideoThirdQuartile',adVolume:player.volume,});}catch(e){log.error('Moat event `AdVideoThirdQuartile` failed',{player:player,moatVideoApiService:moatVideoApiService,},e);}});sublime.hook.register('step.video.quartile4',function registerQ4(){try{moatVideoApiService.dispatchEvent({type:'AdVideoComplete',adVolume:player.volume,});}catch(e){log.error('Moat event `AdVideoComplete` failed',{player:player,moatVideoApiService:moatVideoApiService,},e);}});}
sublime.moat.register();sublime.pixels=sublime.pixels||{};var pixelsWaterfall={place_passback:{inherit:'_commonSkinz',qs:{e:'ppb'}},impression_passback:{inherit:'_commonSkinz',qs:{e:'ipb'}},script_passback:{inherit:'_commonSkinz',qs:{e:'spb'}}};sublime.pixels=merge(sublime.pixels,pixelsWaterfall);var configCookie={ttl:0,expires:null,path:'/',domain:sublime.env('cookie_domain'),secure:''};configCookie=sublime.mergeConfig(configCookie,'cookie');var decodeCookieValue=function(value){try{value=decodeURIComponent(value);if(value.charAt(0)==='{'&&value.slice(-1)==='}'){value=JSON.parse(value);}
return value;}catch(e){return null;}};var encodeCookieValue=function(value){try{if(!sublime.isScalar(value)){value=JSON.stringify(value);}
return encodeURIComponent(value);}catch(e){return null;}};sublime.cookie={get:function(name){var result=name?null:{},cookies=document.cookie?document.cookie.split('; '):[];for(var i in cookies){var parts=cookies[i].split('='),key=parts[0],value=decodeCookieValue(parts[1]);if(key===name){return value;}else if(!name){result[key]=value;}}
return result;},set:function(name,value,options){options=merge(configCookie,options);if(options.ttl){options.expires=new Date();options.expires.setTime(sublime.now()+options.ttl);}
try{document.cookie=[name,'=',encodeCookieValue(value),options.expires?'; expires='+options.expires.toUTCString():'',options.path?'; path='+options.path:'',options.domain?'; domain='+options.domain:'',options.secure?'; secure':''].join('');return true;}catch(e){return false;}},del:function(name){return sublime.cookie.set(name,null,{ttl:-1e12});},config:configCookie};let nonce=sublime.now();const jsonpCallbackFnPrefix='sublimeCb';const XMLHTTPRequestObject=XMLHttpRequest;sublime.xhr=function xhr(url,params){const defaults={jsonp:false,timeout:false,async:false,success:null,error:null,cacheBuster:false,onTimeout:sublime.noOp,qs:{},};if(!sublime.isUrl(url)){log.warn('Invalid url');if(sublime.isFunction(params.error)){params.error();}
return false;}
const options=merge({},defaults,params);const isAbs=url.indexOf('http')===0||url.indexOf('https')===0||url.indexOf('//')===0;if(!isAbs){log.error('Invalid url: non absolute url');if(sublime.isFunction(options.error)){options.error();}
return false;}
const extraUrlParam=options.qs||{};if(options.cacheBuster){extraUrlParam._=nonce;nonce+=1;}
const fullUrl=sublime.url.merge(url,extraUrlParam);if(options.jsonp){return jsonpRequest(fullUrl,options);}
return xmlRequest(fullUrl,options);};const xmlRequest=function xmlRequest(url,params){const options=merge({method:'GET',headers:{},},params);let requestBody=null;if(options.headers['Content-Type']==='application/x-www-form-urlencoded'){requestBody=sublime.qs.build(options.data);}else if(sublime.isObject(options.data)){requestBody=JSON.stringify(options.data);}
const request=new XMLHTTPRequestObject();let ironFlag=false;let fullUrl=url;if(url.match(/^\/\//)){fullUrl=sublime.isSSL?'https:'+url:'http:'+url;}
log.info('xhr.xmlRequest call',fullUrl);request.open(options.method,fullUrl,options.async);Object.keys(options.headers).forEach(function each(prop){request.setRequestHeader(prop,options.headers[prop]);});if(options.withCredentials){request.withCredentials=!!options.withCredentials;}
if(!options.async&&navigator.userAgent.indexOf('Gecko')===-1){request.withCredentials=true;}
request.onload=function onLoad(){if(sublime.isFunction(options.success)){if(ironFlag){return;}
ironFlag=true;options.success.call(this,this.responseText);}};if(options.async&&options.timeout){request.timeout=options.timeout;request.ontimeout=function onTimeout(){if(sublime.isFunction(options.onTimeout)){if(ironFlag){return;}
ironFlag=true;options.onTimeout.call(this);}};}
if(sublime.isFunction(options.error)){request.onerror=function onError(){if(ironFlag){return;}
ironFlag=true;options.error.call(this,this.responseText);};}
sublime.hook.register('event.cleanUp',function abortXHR(){request.abort();});try{request.send(requestBody);}catch(e){if(sublime.isFunction(options.error)){if(ironFlag){return false;}
ironFlag=true;return options.error.call(request,request.responseText);}
return false;}
return request.responseText;};const jsonpRequest=function jsonpRequest(url,options){const jsonpCallbackFnName=options.callbackName||jsonpCallbackFnPrefix+nonce++;let timeoutTimer;let abort=false;let fullUrl=url;if(sublime.isFunction(options.success)){const callbackGetVar=sublime.isString(options.jsonp)&&options.jsonp.length>1?options.jsonp:'callback';const extraUrlParam={};extraUrlParam[callbackGetVar]=jsonpCallbackFnName;fullUrl=sublime.url.merge(url,extraUrlParam);sublime.window[jsonpCallbackFnName]=function cb(result){if(abort){return;}
if(timeoutTimer){sublime.timer.clearTimeout(timeoutTimer);}
try{options.success(result);}catch(e){if(sublime.isFunction(options.error)){if(abort){return;}
options.error(e);}}};sublime.hook.register('event.cleanUp',function abortXHR(){abort=true;delete sublime.window[jsonpCallbackFnName];});}else{log.error("xhr: can't run a jsonp request without success callback");return;}
const h=sublime.document.getElementsByTagName('head')[0];const s=sublime.document.createElement('script');s.type='text/javascript';s.id=jsonpCallbackFnName;s.async=options.async||false;s.src=fullUrl;if(sublime.isFunction(options.error)){s.onerror=function onError(e){if(abort){return;}
if(timeoutTimer){sublime.timer.clearTimeout(timeoutTimer);}
options.error(e);};}
if(options.timeout&&options.timeout>0&&options.onTimeout){timeoutTimer=sublime.timer.setTimeout(options.onTimeout,options.timeout);}
log.info('xhr.jsonpRequest call',fullUrl);h.appendChild(s);};if(!sublime.analytics){sublime.analytics={};let pixels={};let slotIdx=1;let renderPassed=false;const pixelDefault={url:sublime.env('antenna_url'),qs:{},repeat:false,delay:0,fired:0,parent:null,members:{},inherit:'',slot:'',isInternal:true,preFireCallback:function preFireCallback(){},onFire:function onFire(){},addBrowserDimensions:false,addPageHeightDimension:false,};let sequenceId=0;const getPixelDefault=function getPixelDefault(){return JSON.parse(JSON.stringify(pixelDefault));};sublime.analytics.getPixels=function getPixels(){return pixels;};const setIsInternal=function setIsInternal(pixel){if(!sublime.helpers.hasProperty(pixel,'isInternal')){if(pixel.url){const urlParts=sublime.url.parse(pixel.url);pixel.isInternal=(urlParts.host===sublime.env('antenna_host')||urlParts.host===sublime.env('ayads_host'));}else{pixel.isInternal=true;}}
return pixel;};sublime.analytics.setPixels=function setPixels(zoneId,modulePixels,slotPrefix){if(!zoneId){log.error('Can\'t set pixel with empty zoneId');return[];}
let pixelsList={};const newPixels={};const addedParentSlot=[];if(modulePixels.qs||modulePixels.url){if(!modulePixels.slot){modulePixels.slot='slot'+slotIdx;slotIdx+=1;}
pixelsList[modulePixels.slot]=modulePixels;}else{pixelsList=modulePixels;}
Object.keys(pixelsList).forEach(function eachPixel(name){let pixel=pixelsList[name];if(!sublime.isObject(pixel)||(!pixel.qs&&!pixel.url)){log.warn('Can\'t setup pixel, must have a `qs` or `url`',pixel);return;}
pixel=setIsInternal(pixel);if(!pixel.isInternal){delete pixel.qs;}else{pixel.qs=pixel.qs||{};pixel.qs.z=zoneId;}
if(!pixel.slot){pixel.slot=name;}
if(slotPrefix){pixel.slot=slotPrefix+pixel.slot;}
if(pixel.members){Object.keys(pixel.members).forEach(function eachPixelMembers(key){let p=pixel.members[key];p=setIsInternal(p);if(!p.isInternal){delete p.qs;}else{p.qs=p.qs||{};p.qs.z=zoneId;}});}
if(pixel.slot.indexOf('.')>-1){const parts=pixel.slot.split('.');const parent=parts[0];const slot=parts[1];pixel.slot=slot;pixel.parent=parent;if(!sublime.isDefined(newPixels[parent])){newPixels[parent]={members:{}};}
newPixels[parent].members[slot]=pixel;addedParentSlot.push(parent);}else{newPixels[pixel.slot]=pixel;addedParentSlot.push(pixel.slot);}});pixels[zoneId]=pixels[zoneId]||{};pixels[zoneId]=merge(pixels[zoneId],newPixels);return addedParentSlot;};sublime.analytics.fire=function fire(zoneId,slot,param){if(sublime.isFeatureEnabled('noPixelBeforeRender')){if(slot==='render'){renderPassed=true;}
let bypass=false;switch(slot){case'place':case'bid':bypass=true;break;default:break;}
if(!bypass&&!renderPassed){return false;}}
if(!sublime.isNum(zoneId)){param=slot;slot=zoneId;zoneId=sublime.helpers.hasProperty(param,'qs.z')?param.qs.z:null;}
if(!zoneId){log.error('Can\'t send pixel with empty zoneId');return false;}
if(typeof slot==='string'&&sublime.isUrl(slot)){const pixel={url:slot,};slot=sublime.analytics.setPixels(zoneId,pixel)[0];}
if(param&&sublime.isObject(param)){param.slot=param.slot||slot;sublime.analytics.setPixels(zoneId,param);}
if(!pixels[zoneId]){log.error('Tried to fire non registered zoneId',{zoneId:zoneId,pixels:pixels});return false;}
if(!(slot in pixels[zoneId])){log.warn('Tried to fire non registered slot',{slot:slot,pixels:pixels});return false;}
if(slot.charAt(0)==='_'){log.error('Tried to fire a config');return false;}
return executeFire(pixels[zoneId][slot]);};const executeFire=function executeFire(pixelDefinition){let pixel=merge(getPixelDefault(),pixelDefinition);pixel=sublime.analytics.handleInheritance(pixel);pixel.url=sublime.url.merge(pixel.url,pixel.qs||'');const canFire=!pixel.fired||(pixel.repeat&&pixel.repeat>pixel.fired);if(!canFire){return pixel;}
const slotNamespace=(pixel.parent?pixel.parent+'.':'')+pixel.slot;const message='Analytics: Fire (delay '+pixel.delay+') '+slotNamespace;log.info(message+' #'+pixel.fired);sublime.timer.setTimeout(function delay(){sendPixel(pixel);},pixel.delay||0);if(!pixel.parent){if(sublime.helpers.hasProperty(pixel,'qs.z')&&sublime.helpers.hasProperty(pixels,pixel.qs.z.toString())){pixels[pixel.qs.z][pixel.slot]=pixel;}}
if(!pixel.parent&&pixel.members&&sublime.length(pixel.members)){Object.keys(pixel.members).forEach(function eachPixelMember(id){if(!pixel.members[id].parent){pixel.members[id].parent=pixel.slot;}
pixel.members[id].slot=id;pixel.members[id]=executeFire(pixel.members[id]);});}
return pixel;};sublime.analytics.clearAllPixels=function clearAllPixels(){pixels={};sequenceId=0;};const sendPixel=function sendPixel(pixel){const isInternal=pixel.isInternal;const tfz=elapsedSinceInvocation();let url=pixel.url;pixel.fired=(pixel.fired||0)+1;if(isInternal){url+='&tse='+sublime.now();url+='&et='+Math.round(elapsed());url+='&tfz='+tfz;pixel.qs.tfz=tfz;sequenceId+=1;url+='&sqid='+sequenceId;pixel.qs.sqid=sequenceId;}
if(pixel.addBrowserDimensions&&sublime.isUrl(url)){const dimensions=sublime.helpers.getBrowserDimensions();url+='&bw='+dimensions.bw;url+='&bh='+dimensions.bh;}
if(pixel.addPageHeightDimension&&sublime.isUrl(url)){const pageHeight=sublime.helpers.getPageHeight();url+='&ph='+pageHeight;}
if(sublime.isFunction(pixel.onFire)){pixel.onFire();}
if(sublime.previewing){log.info('Preview: pixel send to '+url);return null;}
const img=new sublime.window.Image(1,1);img.src=url;log.info('Analytics: fired pixel "'+pixel.slot+'"',pixel.qs);return img;};const applyPrefire=function applyPrefire(pixel){if(sublime.isFunction(pixel.preFireCallback)){pixel.preFireCallback.apply(pixel);}};sublime.analytics.handleInheritance=function handleInheritance(pixel){if(!pixel.inherit){applyPrefire(pixel);return merge({},pixel);}
if(sublime.helpers.hasProperty(pixel,'qs.z')&&sublime.helpers.hasProperty(pixels,pixel.qs.z+'.'+pixel.inherit)){const parentPixel=sublime.analytics.handleInheritance(pixels[pixel.qs.z][pixel.inherit]);delete parentPixel.members;delete parentPixel.onFire;const inherit=merge({},parentPixel);applyPrefire(pixel);return merge(inherit,pixel);}
return merge({},pixel);};}
sublime.helpers.createNamespace('sublime.macros');sublime.macros.replace=function macrosReplace(string,data){const PREVIEW_ZONE_ID=803;const gdpr=sublime.gdpr;if(typeof string!=='string'){log.error('macrosReplace first argument MUST be of "string" type');return'';}
const defaultConfig={id:'',raid:'',campaign_id:'',ssp_name:'',creative_type:'',type:'',deal_id:'',insertion_id:'',click_url:'',url:'',click_macro:'',rcid:'',originalUrl:'',html:'',};const config=merge(defaultConfig,data);const zone={id:347,site_id:259,main_category_id:81,sub_category_id:36,html:"<style>\niframe[id^=\"ayads-pull-creative-\"], #Footeo_ATF_1x1 {display:none !important;}\n#background{background:none !important}\n.nav-drawer-container{display:none  !important}\n#content{background-color: white !important;margin-top: 0px !important;}\n#blockadd{width: 1010px !important;background-color: white !important;display: none !important;}\n#content .container{width: 1010px !important;}\n</style>\n\n<script>\nfunction init(){\n    /* Init variables */\n    var html = sublime.window.document.querySelector(\'html\'),\n        body = sublime.window.document.body,\n        isSafari = navigator.userAgent.indexOf(\'Safari\') != -1 && navigator.userAgent.indexOf(\'Chrome\') == -1,\n        IsEdge = navigator.userAgent.indexOf(\'Edge\') != -1,\n        isChrome = navigator.userAgent.indexOf(\'Chrome\') != -1 && !IsEdge,\n        isMac = navigator.appVersion.indexOf(\"Mac\") != -1,\n        isVideo = !sublime.isEmpty(sublime.creativeAd.videos),\n        bgfix = sublime.creativeAd.fixed,\n        format = \'\',\n        ayadsVideoLayer,\n        firstCall,\n        i = 0,\n        /* Edit variables */\n        maxHeightHeader = 41,\n        minHeightHeader = 41;\n    /**************** ADAPT MARGIN TO HTML AND LAUNCH FUNCTION FOR OTHERS ELEMENTS ****************/\n    function fixSkin(){\n        isChrome ? html.style.cssText = \'padding-top:\' + maxHeightHeader + \'px !important;\' : html.style.cssText = \'margin-top:\' + maxHeightHeader + \'px !important;\';\n        if ((bgfix && !isVideo) || (!bgfix && isMac && isSafari)  || (!bgfix && isChrome)) {\n            body.style.cssText = \'background-position: center \'+maxHeightHeader+\'px !important;\';\n        }\n        if (bgfix) {\n            fixSkinOnScrollEvent();\n            if (firstCall) {\n                sublime.window.addEventListener(\'scroll\', fixSkinOnScrollEvent);\n                firstCall = false;\n            }\n        }\n    }\n    /**************** ADAPT MARGIN TO OTHERS ELEMENTS ****************/\n    function fixSkinOnScrollEvent(){\n        var y = sublime.window.pageYOffset,\n            newMarginTop;\n \n        if (y === 0) {\n            newMarginTop = maxHeightHeader;\n        } else if (y > 0 && y < (maxHeightHeader - minHeightHeader)) {\n            newMarginTop = Math.floor(maxHeightHeader - y);\n        } else {\n            newMarginTop = minHeightHeader;\n        }\n \n        if (isVideo && ayadsVideoLayer) {\n            ayadsVideoLayer.style.cssText = \'top:\' + newMarginTop + \'px !important;\';\n        } else {\n            body.style.cssText = \'background-position:center \' + newMarginTop + \'px !important;\';\n        }\n    }\n    /**************** CHECK IF ELEMENT IS PRESENT ****************/\n    function checkDivPresence(div, callback, bool){\n        myDiv = sublime.window.document.querySelector(div);\n        if (myDiv) {\n            if (bool) {\n                if (isVideo && div === \"#ayads-video-layer\") {\n                    ayadsVideoLayer = myDiv;\n                }\n                firstCall = true;\n            }\n            callback(myDiv);\n        } else {\n            top.sublime.timer.setTimeout(function(){\n                if (i > 30) {\n                    top.sublime.timer.clearTimeout(function() {\n                        checkDivPresence();\n                    });\n                } else {\n                checkDivPresence(div, callback, bool);\n                }\n                i += 1;\n            }, 100);\n        }\n    }\n    /**************** ADAPT MARGIN TO HEADER WITH A DYNAMIC HEIGHT (OPTION) ****************/\n    function getHeightDynamicHeader(headerDyn){\n        maxHeightHeader = headerDyn.offsetHeight;\n        fixSkin();\n    }\n    /**************** LAUNCH FUNCTION CHECK ****************/\n    //html.style.cssText = \'margin-top:\' + maxHeightHeader + \'px !important;\';\n    isChrome ? html.style.cssText = \'padding-top:\' + maxHeightHeader + \'px !important;\' : html.style.cssText = \'margin-top:\' + maxHeightHeader + \'px !important;\';\n    if (isVideo){\n        checkDivPresence(\'#ayads-video-layer\', fixSkin, true);\n    } else {\n        checkDivPresence(\'body\', fixSkin, true);\n    };\n    sublime.hook.register(\"event.cleanUp\", function(){\n        sublime.window.removeEventListener(\'scroll\', fixSkinOnScrollEvent);\n        isChrome ? html.style.paddingTop = \'\' : html.style.marginTop = \'\';\n    });\n    /* checkDivPresence(\'header\', getHeightDynamicHeader); */\n}\n/**************** LAUNCH GLOBAL FUNCTION ****************/\ninit();\n</script>",passback:"",mobilepassback:"",premium:0,block_cookies:0,scale:1.01,url:"www.footeo.com",width:0,mobile_setup:{footer_fixed:1},sticky_setup:{js:"",css:""},mobilecss:"",mobilejs:"",mobile_bottom_selector:"",mobile_bottom_append_position:"",tag_type:"waterfall",video_mute:0,video_autoplay:1,passback_render:"",sjs_debug:0,country:"FR",site_url:"www.footeo.com",company_id:1121,autoskinz:0,autovideo:0,supported_devices:["mobile","desktop"],main_category_name:"Sport",sub_category_name:"Football",nortb:0,novideo:0,noreminder:0,host:"www.footeo.com",cappings:{impressions:0,impressions_mobile:0,duration:86400},accepted_placement_types:{skinz:1},ignore_client_width:false,scaleCompat:101,continent:"EU",mmd:5,mmm:3};const gdprConsentString=gdpr.getConsentString()||'';let replacements={'\\[timezone_offset\\]':(new Date().getTimezoneOffset()),'\\[REFERRER_URL\\]':encodeURIComponent(sublime.window.location.href),'\\[Ref_Url\\]':encodeURIComponent(sublime.window.location.href),'\\[Random_Number\\]':sublime.now(),'\\[timestamp\\]':sublime.now(),'\\${CACHEBUSTER}':sublime.now(),'\\$\\[CACHEBUSTER\\]':sublime.now(),'\\[CACHEBUSTER\\]':sublime.now(),'\\${sub:timestamp}':sublime.now(),'\\${sub:puid}':sublime.uuid.get('p'),'\\${sub:suid}':sublime.uuid.get('s'),'\\${sub:zone_id}':347,'\\${sub:site_id}':259,'\\${sub:zone_reminder}':!zone.noreminder,'\\${sub:domain}':encodeURIComponent(sublime.window.location.hostname),'\\${sub:ad_id}':config.raid||config.id,'\\${sub:campaign_id}':config.rcid||config.campaign_id,'\\${sub:ssp}':config.ssp_name,'\\${sub:creative_type}':config.creative_type,'\\${sub:ad_type}':config.type,'\\${sub:deal_id}':config.deal_id,'\\${sub:insertion_id}':config.insertion_id,'\\${CLICK_URL}':config.click_url,'\\${sub:click_url_encoded}':config.click_url?encodeURIComponent(config.click_url):'','\\${sub:landing_page}':config.originalUrl,'\\${sub:landing_page_encoded}':config.originalUrl?encodeURIComponent(config.originalUrl):'','\\${ext:clickmacro}':config.click_macro,'\\${ext:clickmacro_encoded}':config.click_macro?encodeURIComponent(config.click_macro):'',};if(zone.id!==PREVIEW_ZONE_ID){replacements=merge(replacements,{'\\${GDPR}':Number(gdpr.isActive()),'\\${GDPR_CONSENT_\\d+}':gdprConsentString,'\\${GDPR_PD}':1,});}
const creativeExternalData=sublime.creativeExternalData;if(typeof creativeExternalData==='object'){Object.keys(creativeExternalData).forEach(function externalDataReplacement(key){const replacementKey='\\${ext:'+key+'}';if(replacementKey in replacements){return;}
replacements[replacementKey]=creativeExternalData[key];});}
let newString=string;Object.keys(replacements).forEach(function dataReplacement(regexString){newString=newString.replace(new RegExp(regexString,'gi'),replacements[regexString]);});return newString;};function storeFormatCallData(call){return{call:{id:call.id,zoneId:call.zoneId,userAgent:call.userAgent,contentLanguage:call.contentLanguage,},};}
function storeFormatConnectorData(ad){const connector={ssp:{name:ad.ssp_name,placementId:ad.ssp_id,connectorId:ad.id,},};if(ad.traffic_type){connector.type=ad.traffic_type;}
if(ad.insertion_id){connector.ssp.insertionId=ad.insertion_id;}
if(ad.deal_id){connector.ssp.dealId=ad.deal_id;}
if(ad.creative_id){connector.ssp.creativeId=ad.creative_id;}
if(ad.vpaid){connector.vpaid=merge({},ad.vpaid);}
if(ad.response_format){connector.creativeWrapper=ad.response_format;}
if(ad.buyerId){connector.buyerId=ad.buyerId;}
const output={connectors:{},};output.connectors[ad.id]=connector;return output;}
function storeFormatCreativeData(creative,connectorId){const output={creative:{id:creative.id,type:creative.creative_type,},};if(creative.placementType){output.creative.placementType=creative.placementType;}
if(connectorId){output.creative.connectorId=connectorId;}
return output;}
let state={connectors:{},};function storeSetCall(call){state=merge({},state,storeFormatCallData(call));}
function storePushConnector(ad){state=merge({},state,storeFormatConnectorData(ad));}
function storeSetCreative(creative,connectorId){state=merge({},state,storeFormatCreativeData(creative,connectorId));}
function storeGetState(){return merge({device:window.sublime.device,zoneId:env('zoneId'),},state);}
const store={getState:storeGetState,pushConnector:storePushConnector,setCall:storeSetCall,setCreative:storeSetCreative,};let sessionInsideSampling;function isInsideSampling(){if(typeof sessionInsideSampling==='undefined'){sessionInsideSampling=Math.random()<env('eventEmitterSampling');}
return sessionInsideSampling;}
const EVENT_TEMPLATES={log:{name:'log',eventVersion:'1.0',data:{level:'',message:'',},},timer:{name:'timer',eventVersion:'1.0',data:{name:'',},},};function getEventDataFromState(){const state=store.getState();const creative=state.creative;const output={call:state.call,};if(creative){output.rendering={creative:creative,};if(state.connectors[creative.connectorId]){const connector=state.connectors[creative.connectorId];output.trafficking={traffic:connector,};output.rendering.traffic=connector;}}
return output;}
function getEvent(eventTemplate,eventData,timestamp){if(!(eventTemplate in EVENT_TEMPLATES)){log.warn('Incorrect template');return;}
return merge({},EVENT_TEMPLATES[eventTemplate],{createdTs:timestamp,data:eventData,},getEventDataFromState());}
function getDefaultPayload(){return{payloadVersion:'1.0',sendTs:Date.now(),emitter:{domain:'delivery',service:'sjs_trafficking',component:'tag_'+env('mode'),version:env('versionId'),deviceType:sublime.device,},events:[],};}
function getPayloadFromEvents(events){const DEFAULT_PAYLOAD_DATA=getDefaultPayload();return merge({},DEFAULT_PAYLOAD_DATA,{sendTs:Date.now(),},{events:events,});}
function sendToEndpoint(events){const payload=getPayloadFromEvents(events);const endpoint=env('eventCollectorEndpoint');if(sublime.isEmpty(endpoint)){log.info('Emitter no endpoint',payload);return;}
sublime.xhr(endpoint,{method:'POST',data:payload,});}
function fireEvent(eventTemplate,eventData,timestamp){if(!isInsideSampling()){log.info('emitter outside sampling rate');return;}
const event=getEvent(eventTemplate,eventData,timestamp);sendToEndpoint([event]);}
const emitter={info:function emitterInfo(message,contextData){fireEvent('log',{level:'info',message:message,context:contextData,},Date.now());},timer:function emitterTimer(name,duration,contextData){fireEvent('timer',{duration:duration,name:name,context:contextData,},Date.now());},};const translations={de:{swipeBack:'Wischen Sie zurück',shopDiscover:'Ich entdecke',enableFullscreen:'Zum Vollbildmodus wechseln',topRollCTA:'Mehr erfahren',},en:{swipeBack:'Swipe back',shopDiscover:'Discover',enableFullscreen:'Switch to fullscreen',topRollCTA:'Visit website',},es:{swipeBack:'Swipe para regresar',shopDiscover:'Yo descubro',enableFullscreen:'Cambiar a pantalla completa',topRollCTA:'Infórmate más',},fr:{swipeBack:'Swipe pour revenir',shopDiscover:'Je découvre',enableFullscreen:'Passer en plein écran',topRollCTA:'Visitez le site',},it:{swipeBack:'Scorri per tornare indietro',shopDiscover:'Mi decovero',enableFullscreen:'Passa a schermo intero',topRollCTA:'Scopri di più',},};function i18n(namespace){let language=sublime.window.navigator.language;language=language.split('-')[0];if(!language||!translations[language]){language='en';}
return translations[language][namespace];}
if(typeof window!=='undefined'){window.sublime=window.sublime||{};window.sublime.i18n=i18n;}
sublime.preview={};sublime.previewing=false;sublime.preview.params={};const hashPrefix=env('sublime_prefix');const adTestCard={id:14,url:'https://cdn.ayads.co/creatives/redirectUrl/index.html',images:{bg:'https://cdn.ayads.co/creatives/redirectUrl/test.jpg',},supported_devices:['desktop'],top:220,type:'skinz',noCookieMatch:true,};sublime.preview.init=function init(){let previewData=storage.get('sublime-preview');if(!previewData){previewData=sublime.getHash();}
if(previewData){const args=sublime.qs.parse(previewData);if(args[hashPrefix+'-aid']){args.adId=sublime.pInt(args[hashPrefix+'-aid']);delete args[hashPrefix+'-aid'];}else if(hashPrefix+'-test'in args){args.testCard=true;delete args[hashPrefix+'-test'];}else if(hashPrefix+'-ssp'in args){args.ssp=args[hashPrefix+'-ssp'];delete args[hashPrefix+'-ssp'];}
if(hashPrefix+'-traffic_type'in args){args.trafficType=args[hashPrefix+'-traffic_type'];delete args[hashPrefix+'-traffic_type'];}
if(hashPrefix+'-vast'in args){args.vastUrl=args[hashPrefix+'-vast'];delete args[hashPrefix+'-vast'];log.info('Previewing VAST',args.vastUrl);}
Object.keys(args).forEach(function(param){if(args[param]===undefined){args[param]=true;}});if(!sublime.isEmpty(args)){sublime.preview.params=args;sublime.previewing=true;log.level=40;}}};sublime.preview.init();sublime.preview.run=function previewRun(){if(sublime.preview.params.adId===0){sublime.adServer.passback('preview_passback');return;}
if(sublime.preview.params.adId){const url=env('sublime_url')+'ad/'+sublime.preview.params.adId+'/'+347;sublime.xhr(url,{jsonp:true,success:sublime.preview.callback,});}else if(sublime.preview.params.testCard){const url=env('sublime_url')+'ad/0/'+347;sublime.xhr(url,{jsonp:true,success:sublime.preview.callback,});sublime.adServer.displayAd();}else if(sublime.preview.params.ssp){let url=env('sublime_url')+'ad/ssp/'+sublime.preview.params.ssp+'/'+347;if(sublime.preview.params.trafficType){url+='/'+sublime.preview.params.trafficType;}
sublime.xhr(url,{jsonp:true,success:sublime.preview.callback,});}else if(sublime.preview.params.vastUrl){sublime.parseVast.query(sublime.preview.params.vastUrl,{successCallback:function successPreviewCallback(ad){ad.video_autoplay=true;return sublime.preview.callback({ad:ad});},errorCallback:function errorPreviewCallback(error){log.warn('Preview > Error in XHR call',error);},});}};sublime.preview.callback=function previewCallback(response){sublime.previewing=true;if(!response.ad){sublime.ad=adTestCard;}else{sublime.ad=response.ad;}
sublime.preview.zone=response.zone;log.level=40;sublime.adServer.serveAd();};sublime.display=sublime.display||{};sublime.creativeAd={};sublime.zone={id:347,site_id:259,main_category_id:81,sub_category_id:36,html:"<style>\niframe[id^=\"ayads-pull-creative-\"], #Footeo_ATF_1x1 {display:none !important;}\n#background{background:none !important}\n.nav-drawer-container{display:none  !important}\n#content{background-color: white !important;margin-top: 0px !important;}\n#blockadd{width: 1010px !important;background-color: white !important;display: none !important;}\n#content .container{width: 1010px !important;}\n</style>\n\n<script>\nfunction init(){\n    /* Init variables */\n    var html = sublime.window.document.querySelector(\'html\'),\n        body = sublime.window.document.body,\n        isSafari = navigator.userAgent.indexOf(\'Safari\') != -1 && navigator.userAgent.indexOf(\'Chrome\') == -1,\n        IsEdge = navigator.userAgent.indexOf(\'Edge\') != -1,\n        isChrome = navigator.userAgent.indexOf(\'Chrome\') != -1 && !IsEdge,\n        isMac = navigator.appVersion.indexOf(\"Mac\") != -1,\n        isVideo = !sublime.isEmpty(sublime.creativeAd.videos),\n        bgfix = sublime.creativeAd.fixed,\n        format = \'\',\n        ayadsVideoLayer,\n        firstCall,\n        i = 0,\n        /* Edit variables */\n        maxHeightHeader = 41,\n        minHeightHeader = 41;\n    /**************** ADAPT MARGIN TO HTML AND LAUNCH FUNCTION FOR OTHERS ELEMENTS ****************/\n    function fixSkin(){\n        isChrome ? html.style.cssText = \'padding-top:\' + maxHeightHeader + \'px !important;\' : html.style.cssText = \'margin-top:\' + maxHeightHeader + \'px !important;\';\n        if ((bgfix && !isVideo) || (!bgfix && isMac && isSafari)  || (!bgfix && isChrome)) {\n            body.style.cssText = \'background-position: center \'+maxHeightHeader+\'px !important;\';\n        }\n        if (bgfix) {\n            fixSkinOnScrollEvent();\n            if (firstCall) {\n                sublime.window.addEventListener(\'scroll\', fixSkinOnScrollEvent);\n                firstCall = false;\n            }\n        }\n    }\n    /**************** ADAPT MARGIN TO OTHERS ELEMENTS ****************/\n    function fixSkinOnScrollEvent(){\n        var y = sublime.window.pageYOffset,\n            newMarginTop;\n \n        if (y === 0) {\n            newMarginTop = maxHeightHeader;\n        } else if (y > 0 && y < (maxHeightHeader - minHeightHeader)) {\n            newMarginTop = Math.floor(maxHeightHeader - y);\n        } else {\n            newMarginTop = minHeightHeader;\n        }\n \n        if (isVideo && ayadsVideoLayer) {\n            ayadsVideoLayer.style.cssText = \'top:\' + newMarginTop + \'px !important;\';\n        } else {\n            body.style.cssText = \'background-position:center \' + newMarginTop + \'px !important;\';\n        }\n    }\n    /**************** CHECK IF ELEMENT IS PRESENT ****************/\n    function checkDivPresence(div, callback, bool){\n        myDiv = sublime.window.document.querySelector(div);\n        if (myDiv) {\n            if (bool) {\n                if (isVideo && div === \"#ayads-video-layer\") {\n                    ayadsVideoLayer = myDiv;\n                }\n                firstCall = true;\n            }\n            callback(myDiv);\n        } else {\n            top.sublime.timer.setTimeout(function(){\n                if (i > 30) {\n                    top.sublime.timer.clearTimeout(function() {\n                        checkDivPresence();\n                    });\n                } else {\n                checkDivPresence(div, callback, bool);\n                }\n                i += 1;\n            }, 100);\n        }\n    }\n    /**************** ADAPT MARGIN TO HEADER WITH A DYNAMIC HEIGHT (OPTION) ****************/\n    function getHeightDynamicHeader(headerDyn){\n        maxHeightHeader = headerDyn.offsetHeight;\n        fixSkin();\n    }\n    /**************** LAUNCH FUNCTION CHECK ****************/\n    //html.style.cssText = \'margin-top:\' + maxHeightHeader + \'px !important;\';\n    isChrome ? html.style.cssText = \'padding-top:\' + maxHeightHeader + \'px !important;\' : html.style.cssText = \'margin-top:\' + maxHeightHeader + \'px !important;\';\n    if (isVideo){\n        checkDivPresence(\'#ayads-video-layer\', fixSkin, true);\n    } else {\n        checkDivPresence(\'body\', fixSkin, true);\n    };\n    sublime.hook.register(\"event.cleanUp\", function(){\n        sublime.window.removeEventListener(\'scroll\', fixSkinOnScrollEvent);\n        isChrome ? html.style.paddingTop = \'\' : html.style.marginTop = \'\';\n    });\n    /* checkDivPresence(\'header\', getHeightDynamicHeader); */\n}\n/**************** LAUNCH GLOBAL FUNCTION ****************/\ninit();\n</script>",passback:"",mobilepassback:"",premium:0,block_cookies:0,scale:1.01,url:"www.footeo.com",width:0,mobile_setup:{footer_fixed:1},sticky_setup:{js:"",css:""},mobilecss:"",mobilejs:"",mobile_bottom_selector:"",mobile_bottom_append_position:"",tag_type:"waterfall",video_mute:0,video_autoplay:1,passback_render:"",sjs_debug:0,country:"FR",site_url:"www.footeo.com",company_id:1121,autoskinz:0,autovideo:0,supported_devices:["mobile","desktop"],main_category_name:"Sport",sub_category_name:"Football",nortb:0,novideo:0,noreminder:0,host:"www.footeo.com",cappings:{impressions:0,impressions_mobile:0,duration:86400},accepted_placement_types:{skinz:1},ignore_client_width:false,scaleCompat:101,continent:"EU",mmd:5,mmm:3}||{};var stampImageUrl='https://cdn.ayads.co/creatives/watermark803-v3.png';sublime.display.elements={VIDEO_ID:{desktop:'ayads-video',mobile:'sublime-mobile-video',},VIDEO_CONTAINER_ID:{desktop:'ayads-video-container',mobile:'sublime-mobile-video-container'}};sublime.display.adIsReady=function(ad){if(!ad||!sublime.isObject(ad)){log.warn('display: Ad is not ready, missing ad');return false;}
var displayClass=getDisplayClass(ad);if(!displayClass){return false;}
if(!sublime.isFunction(displayClass.adIsReady)||!displayClass.adIsReady(ad)){log.warn('Ad NOT complete',merge({},ad));return false;}
return true;};sublime.display.adIsCompatibleWithDevice=function(ad,device){var displayClass=getDisplayClass(ad);if(!displayClass){return false;}
if(sublime.adServer.isRedirectPreview){return true;}
if(ad.supported_devices.indexOf(device)<0){log.warn('Ad IS NOT compatible with device',merge({},ad));return false;}
return true;};sublime.display.adIsClickable=function adIsClickable(ad){if(ad.disableClick){return{clickable:false,message:'Click disabled',};}
if(!ad.url||!sublime.isUrl(ad.url)){return{clickable:false,message:'No url',};}
return{clickable:true,};};sublime.display.render=function displayRender(ad){if(sublime.preview&&sublime.preview.zone){sublime.zone=sublime.preview.zone;}
const displayClass=getDisplayClass(ad);if(!displayClass){return false;}
if(!sublime.isFunction(displayClass.render)){log.warn('Display Class has no render function');return false;}
sublime.creativeAd=merge({placementType:'skinz',},sublime.creativeAd,ad);sublime.creativeAd.click_url=sublime.adServer.clickurlizeAntenna(sublime.creativeAd.click_macro);store.setCreative(sublime.creativeAd,sublime.ad.id);sublime.ad=merge(sublime.ad,sublime.creativeAd);emitter.info('rendering.display.before_render');displayClass.render(sublime.creativeAd);return true;};function getDisplayClass(ad){if(!ad||sublime.isEmpty(ad)){return false;}
var className='',desktopAdType=['skinz','video','html5'],isDesktop=desktopAdType.indexOf(ad.type)>-1;if(ad.type==='mobile'){className='mobile';}else if(ad.format==='generic'){className='generic';}else if(isDesktop){className='desktop';}
if(sublime.display[className]){return sublime.display[className];}
log.error('Display type not supported',{ad:ad,className:className});return false;}
sublime.display.addCreativeContainer=function(){var divId=sublime.env('sublime_prefix')+'-html',div=sublime.document.getElementById(divId);if(!div){div=sublime.document.createElement('div');div.id=divId;sublime.document.body.insertBefore(div,sublime.document.body.firstChild);sublime.hook.call('step.creativeContainerAdded');}
return div;};sublime.display.getCreativeContainer=function(){var divId=sublime.env('sublime_prefix')+'-html',div=sublime.document.getElementById(divId);return div;};sublime.display.getKargoCreativeContainer=function(){var divId=sublime.env('sublime_prefix')+'-kargo-1',div=sublime.document.getElementById(divId);return div;};sublime.display.writeToContainer=function(html,toTopId){toTopId=toTopId||sublime.env('sublime_prefix')+'-html';var globalVar=sublime.env('sublime_prefix');var stampHtml='';if(347===803){stampHtml='<div class="sublime-preview-stamp"'+'style="width: 100%; height: 100%; max-width: 1800px; max-height: 1800px; margin: 0px auto;'+'background:url('+stampImageUrl+') no-repeat top center;'+'z-index:0; pointer-events:none;">'+'</div>';var stampedIframeCss='#ayads-html #iframe-container, #ayads-html #sublime-iframe-container {z-index:-1;} #ayads-html {height:0;}';sublime.display.addCss(stampedIframeCss);}
html='<script class="dont-pull">window.'+globalVar+' = top.'+globalVar+';<\/script>'+
html+
stampHtml;var iframe=sublime.write(html,{id:sublime.env('sublime_prefix')+'-pull-creative'});sublime.display.pullToCreativeContainer(iframe,toTopId);};sublime.display.pullToCreativeContainer=function(iframe,toTopId){var element=iframe.contentDocument.body,elementsToMove=[],child,i;for(i=0;i<element.childNodes.length;i++){child=element.childNodes[i];if(!child||(child.className&&child.className.match(/dont-pull/))){continue;}
if(child.classList){child.classList.add(sublime.env('sublime_prefix')+'-pulled');}
elementsToMove.push(child);}
if(347===803){var stampCss='#sublime-day-overlay {'+'content: url('+stampImageUrl+');'+'}';sublime.display.addCss(stampCss);}
for(i=0;i<elementsToMove.length;i++){child=elementsToMove[i];sublime.document.getElementById(toTopId).appendChild(child);}};sublime.display.addCssLinkToHead=function(src){var link=sublime.document.createElement('link');link.href=src;link.type='text/css';link.rel='stylesheet';sublime.document.head.append(link);return link;};sublime.display.addJavascriptToHead=function(src){var script=sublime.document.createElement('script');script.src=src;sublime.document.head.append(script);return script;};sublime.display.addCss=function(css){sublime.helpers.addCss(css);};sublime.display.loadImage=function(src,callback){var img=new Image(),isLoaded=false;img.onload=function(){isLoaded=true;callback.apply(this);};img.onerror=function(){log.warn("display: couldn't load image",src);};img.src=src;sublime.timer.setTimeout(function(){if(isLoaded){return true;}
img.onload();img.onload=sublime.noOp;},500);};sublime.display.getFinalClickUrl=function(creativeAd,targetUrl,event,extraParams){var clickMacro='';targetUrl=targetUrl||null;if(targetUrl===null&&sublime.isObject(creativeAd)){targetUrl=creativeAd.originalUrl;}
if(targetUrl){targetUrl=sublime.macros.replace(targetUrl,creativeAd);}
if(sublime.isObject(creativeAd)&&creativeAd.click_macro){clickMacro=creativeAd.click_macro;targetUrl=window.encodeURIComponent(targetUrl);}
var globalEvent=event||'c';return sublime.adServer.clickurlizeAntenna(clickMacro,globalEvent,extraParams)+targetUrl;};sublime.display.openTargetUrl=function(domEvent,creativeAd,targetUrl,event,extraParams){sublime.adServer.incrementCappings('clicks');sublime.hook.call('event.click',{x:domEvent.clientX,y:domEvent.pageY,click_area:creativeAd.click_area});sublime.analytics.fire(347,'click');sublime.window.open(sublime.display.getFinalClickUrl(creativeAd,targetUrl,event,extraParams));};sublime.display.getVideoPlayer=function getVideoPlayer(device){return sublime.document.getElementById(sublime.display.elements.VIDEO_ID[device||sublime.device]);};sublime.compat={};sublime.window.ayads={};sublime.compat.toAyads=function toAyads(){var output={additionalScriptsLoaded:sublime.window.ayads.additionalScriptsLoaded||false,ads_url:sublime.env('delivery_url'),antenna_url:sublime.env('antenna_url'),criteoData:sublime.criteoData||false,addcss:sublime.helpers.addCss,adSspName:function adSspName(){return sublime.ad.ssp_name;},applyJs:sublime.applyJs,call_antenna:function callAntenna(e){if(e==='c'){sublime.analytics.fire(347,'click');return true;}
return false;},clickurlize:sublime.adServer.clickurlize,cookiesBlocked:sublime.cookiesBlocked,debounce:debounce,detectDevice:sublime.adServer.detectDevice,elapsedSinceLastCall:elapsedSinceLastCall,get:function get(u,p){if(p.callback){p.error=p.callback;p.success=p.callback;}
return sublime.xhr(u,p);},getItem:function getItem(k){return storage.get('ayads-'+k)||storage.get(k);},getWindow:function getWindow(){return sublime.window;},is_secure:function isSecure(){return sublime.window.location.protocol==='https:';},isArray:sublime.isArray,isPlaceable:sublime.adServer.isPlaceable,isUrl:sublime.isUrl,matchSupported:function matchSupported(){log.error('Function matchSupported deprecated',{ad:sublime.ad.id,zone:347,});},merge:merge,relativize:function relativize(u){return sublime.url.setProtocol(u);},removeItem:function removeItem(k){if(!storage.unset('ayads-'+k)){storage.unset(k);}},setItem:function setItem(k,v,d){var name=k;var value=v;var ttl;if(d){ttl=parseInt(d,10)*1000;}
storage.set(name,value,ttl);storage.unset('ayads-'+name);},setWindow:sublime.noOp,write:sublime.write,};sublime.window.ayads=output;sublime.originWindow.ayads=output;return output;};sublime.hook.register('step.setupZoneAd.before',sublime.compat.toAyads);sublime.compat.toAd=function toAd(){if(!sublime.ad){return null;}
const ad=sublime.ad;const output={aid:ad.id,cid:ad.campaign_id,creative_type:ad.creative_type,format:1,moat:ad.moat,name:ad.name,type:ad.type,viewability:ad.viewability,data:{capping_duration:ad.cappings&&ad.cappings.duration,capping_clicks:ad.cappings&&ad.cappings.clicks,capping_impressions:ad.cappings&&ad.cappings.impressions,click_area:ad.click_area||'double',color:ad.color,conversion:false,criteo_id:ad.criteo_id||null,fixed:ad.fixed||false,html:ad.html||null,iframe:ad.iframe||null,image:(ad.images&&ad.images.bg)||null,improve_id:null,optimize_viewability:ad.optimize_viewability,shop:null,soar_id:null,sticky:null,top:ad.top,url:ad.url,video:(ad.videos&&ad.videos.top)||undefined,width:ad.width||null,},};switch(ad.ssp_name){case'appnexus':output.data.improve_id='appnexus3:'+ad.ssp_id;break;case'criteo':output.data.criteo_id=ad.ssp_id;break;case'sticky':if(ad.vast_url){output.data.sticky=ad.vast_url;}else{output.data.sticky=ad.ssp_id;}
break;case'rubicon':output.data.improve_id='rubicon:'+ad.ssp_id;break;case'improve':if(ad.script_url){output.data.improve_id=ad.script_url;}else{output.data.improve_id=ad.ssp_id;}
break;default:if(ad.script_url){output.data.script_url=ad.script_url;}else if(ad.vast_url){output.data.vast_url=ad.vast_url;}
break;}
sublime.window.ayads.ad=output;return output;};sublime.hook.register('step.setupZoneAd.before',sublime.compat.toAd);sublime.compat.toZone=function toZone(){const zone={id:347,site_id:259,main_category_id:81,sub_category_id:36,html:"<style>\niframe[id^=\"ayads-pull-creative-\"], #Footeo_ATF_1x1 {display:none !important;}\n#background{background:none !important}\n.nav-drawer-container{display:none  !important}\n#content{background-color: white !important;margin-top: 0px !important;}\n#blockadd{width: 1010px !important;background-color: white !important;display: none !important;}\n#content .container{width: 1010px !important;}\n</style>\n\n<script>\nfunction init(){\n    /* Init variables */\n    var html = sublime.window.document.querySelector(\'html\'),\n        body = sublime.window.document.body,\n        isSafari = navigator.userAgent.indexOf(\'Safari\') != -1 && navigator.userAgent.indexOf(\'Chrome\') == -1,\n        IsEdge = navigator.userAgent.indexOf(\'Edge\') != -1,\n        isChrome = navigator.userAgent.indexOf(\'Chrome\') != -1 && !IsEdge,\n        isMac = navigator.appVersion.indexOf(\"Mac\") != -1,\n        isVideo = !sublime.isEmpty(sublime.creativeAd.videos),\n        bgfix = sublime.creativeAd.fixed,\n        format = \'\',\n        ayadsVideoLayer,\n        firstCall,\n        i = 0,\n        /* Edit variables */\n        maxHeightHeader = 41,\n        minHeightHeader = 41;\n    /**************** ADAPT MARGIN TO HTML AND LAUNCH FUNCTION FOR OTHERS ELEMENTS ****************/\n    function fixSkin(){\n        isChrome ? html.style.cssText = \'padding-top:\' + maxHeightHeader + \'px !important;\' : html.style.cssText = \'margin-top:\' + maxHeightHeader + \'px !important;\';\n        if ((bgfix && !isVideo) || (!bgfix && isMac && isSafari)  || (!bgfix && isChrome)) {\n            body.style.cssText = \'background-position: center \'+maxHeightHeader+\'px !important;\';\n        }\n        if (bgfix) {\n            fixSkinOnScrollEvent();\n            if (firstCall) {\n                sublime.window.addEventListener(\'scroll\', fixSkinOnScrollEvent);\n                firstCall = false;\n            }\n        }\n    }\n    /**************** ADAPT MARGIN TO OTHERS ELEMENTS ****************/\n    function fixSkinOnScrollEvent(){\n        var y = sublime.window.pageYOffset,\n            newMarginTop;\n \n        if (y === 0) {\n            newMarginTop = maxHeightHeader;\n        } else if (y > 0 && y < (maxHeightHeader - minHeightHeader)) {\n            newMarginTop = Math.floor(maxHeightHeader - y);\n        } else {\n            newMarginTop = minHeightHeader;\n        }\n \n        if (isVideo && ayadsVideoLayer) {\n            ayadsVideoLayer.style.cssText = \'top:\' + newMarginTop + \'px !important;\';\n        } else {\n            body.style.cssText = \'background-position:center \' + newMarginTop + \'px !important;\';\n        }\n    }\n    /**************** CHECK IF ELEMENT IS PRESENT ****************/\n    function checkDivPresence(div, callback, bool){\n        myDiv = sublime.window.document.querySelector(div);\n        if (myDiv) {\n            if (bool) {\n                if (isVideo && div === \"#ayads-video-layer\") {\n                    ayadsVideoLayer = myDiv;\n                }\n                firstCall = true;\n            }\n            callback(myDiv);\n        } else {\n            top.sublime.timer.setTimeout(function(){\n                if (i > 30) {\n                    top.sublime.timer.clearTimeout(function() {\n                        checkDivPresence();\n                    });\n                } else {\n                checkDivPresence(div, callback, bool);\n                }\n                i += 1;\n            }, 100);\n        }\n    }\n    /**************** ADAPT MARGIN TO HEADER WITH A DYNAMIC HEIGHT (OPTION) ****************/\n    function getHeightDynamicHeader(headerDyn){\n        maxHeightHeader = headerDyn.offsetHeight;\n        fixSkin();\n    }\n    /**************** LAUNCH FUNCTION CHECK ****************/\n    //html.style.cssText = \'margin-top:\' + maxHeightHeader + \'px !important;\';\n    isChrome ? html.style.cssText = \'padding-top:\' + maxHeightHeader + \'px !important;\' : html.style.cssText = \'margin-top:\' + maxHeightHeader + \'px !important;\';\n    if (isVideo){\n        checkDivPresence(\'#ayads-video-layer\', fixSkin, true);\n    } else {\n        checkDivPresence(\'body\', fixSkin, true);\n    };\n    sublime.hook.register(\"event.cleanUp\", function(){\n        sublime.window.removeEventListener(\'scroll\', fixSkinOnScrollEvent);\n        isChrome ? html.style.paddingTop = \'\' : html.style.marginTop = \'\';\n    });\n    /* checkDivPresence(\'header\', getHeightDynamicHeader); */\n}\n/**************** LAUNCH GLOBAL FUNCTION ****************/\ninit();\n</script>",passback:"",mobilepassback:"",premium:0,block_cookies:0,scale:1.01,url:"www.footeo.com",width:0,mobile_setup:{footer_fixed:1},sticky_setup:{js:"",css:""},mobilecss:"",mobilejs:"",mobile_bottom_selector:"",mobile_bottom_append_position:"",tag_type:"waterfall",video_mute:0,video_autoplay:1,passback_render:"",sjs_debug:0,country:"FR",site_url:"www.footeo.com",company_id:1121,autoskinz:0,autovideo:0,supported_devices:["mobile","desktop"],main_category_name:"Sport",sub_category_name:"Football",nortb:0,novideo:0,noreminder:0,host:"www.footeo.com",cappings:{impressions:0,impressions_mobile:0,duration:86400},accepted_placement_types:{skinz:1},ignore_client_width:false,scaleCompat:101,continent:"EU",mmd:5,mmm:3}||{};const output={format:zone.format,name:zone.name,nortb:zone.nortb,novideo:zone.novideo,sid:zone.site_id,zid:zone.id,data:{block_cookies:zone.block_cookies,capping_impressions:zone.cappings&&zone.cappings.impressions?zone.cappings.impressions:0,capping_impressions_mobile:zone.cappings&&zone.cappings.impressions_mobile?zone.cappings.impressions_mobile:0,html:zone.html||'',main_channel:zone.main_category_id,mobilecss:zone.mobilecss||'',mobilejs:zone.mobilejs||'',passback:zone.passback||'',mobilepassback:zone.mobilepassback||'',premium:zone.premium,scale:zone.scaleCompat,sub_channel:zone.sub_category_id,'sublime:state':zone.status||'',url:zone.url,width:zone.width||0,},};sublime.window.ayads.zone=output;return output;};sublime.hook.register('step.setupZoneAd.before',sublime.compat.toZone);sublime.compat.fromAyadsAd=function fromAyadsAd(ad,exclude){const regexNoBgVideo=/#ayads-video-bg[\r\n\t ]{[\r\n\t ].*?display:\s*none.*?[\r\n\t ]}/;let hideBgVideo=false;if(sublime.isObject(ad.data)){ad.aid=ad.data.aid||0;ad.raid=ad.data.raid||0;ad.cid=ad.data.cid||0;ad.moat=ad.moat||ad.data.moat||0;ad.viewability=ad.viewability||ad.data.viewability||0;ad.rtype=ad.data.rtype||null;if(sublime.isDefined(ad.data.type)){ad.type=ad.data.type;if(ad.data.type==='mobile'){ad.mobile_setup=ad.data.mobile_setup;ad.supported_devices=['mobile'];}else{ad.desktop_setup=ad.data.desktop_setup;ad.supported_devices=['desktop'];}}}else{ad.data={};}
const output={campaign_id:ad.cid,cappings:{clicks:ad.data.capping_clicks,impressions:ad.data.capping_impressions,duration:ad.data.capping_duration,},click_area:ad.data.click_area||'double',click_macro:ad.data.click_macro,color:ad.data.color,creative_type:ad.data.creative_type,creative_id:ad.data.creative_id,fixed:ad.data.fixed,html:ad.data.html,html_usage:ad.data.html_usage,id:ad.aid,image:ad.data.image,images:{bg:ad.data.image,},moat:ad.moat,mobile_setup:ad.mobile_setup||null,desktop_setup:ad.desktop_setup||null,name:ad.name,priority:ad.priority||1,ssp_id:'',ssp_name:'',swipe_macro:ad.data.swipe_macro,supported_devices:ad.supported_devices||['desktop'],top:ad.data.top,type:ad.type||'skinz',url:ad.data.url,originalUrl:ad.data.original_url||null,videos:{},viewability:ad.viewability||0,weight:10,};if(ad.raid){output.raid=ad.raid;}
if(ad.rtype){output.rtype=ad.rtype;}
if(ad.data.criteo_id){output.ssp_name='criteo';output.ssp_id=ad.data.criteo_id;}else if(ad.data.sticky){output.ssp_name='sticky';if(ad.data.sticky.toString().indexOf('://')>-1){output.vast_url=ad.data.sticky;}else{output.vast_url='https://ads.stickyadstv.com/www/delivery/swfIndex.php?reqType=AdsSetup&protocolVersion=2.0&zoneId='+ad.data.sticky;}
output.ssp_id=null;}else if(ad.data.improve_id){if(ad.data.improve_id.match(/^rubicon:/)){output.ssp_name='rubicon';output.ssp_id=ad.data.improve_id.split(':')[1];}else if(ad.data.improve_id&&ad.data.improve_id.match(/^appnexus3:/)){output.ssp_name='appnexus';output.ssp_id=ad.data.improve_id.split(':')[1];}else if(ad.data.improve_id.toString().indexOf('://')>-1){output.script_url=ad.data.improve_id;}else{output.ssp_name='improve';output.ssp_id=ad.data.improve_id;}}
if(ad.data.video){let videoSrc=sublime.env('delivery_url');let videoBg;let videoId;const matchedVideoId=String(ad.data.video).match(/^video-(\d+)\.mp4/);if(matchedVideoId&&matchedVideoId[1]){log.error('Erroneous video format in Redirect: bad format',{from:'fromAyadsAd',redirect:ad,tags:{level:'debug'},});ad.data.video=matchedVideoId[1];}
if(sublime.isUrl(ad.data.video)){const regex=new RegExp(sublime.env('delivery_url').replace('/','\\/'));if(ad.data.video.match(regex)){videoSrc=ad.data.video;if(sublime.isUrl(ad.data.video_bg)&&ad.data.video_bg.match(regex)){videoBg=ad.data.video_bg;}}else{videoBg='';}}else{log.error('Erroneous video format in Redirect: noUrl',{from:'fromAyadsAd',redirect:ad,tags:{level:'debug'},});videoSrc+='/delivery/video-';videoBg=videoSrc+'bg-';videoId=ad.data.video?(ad.raid||ad.aid):ad.data.video;videoSrc+=videoId+'.mp4';videoBg+=videoId+'.mp4';}
output.videos.top=videoSrc;output.videos.bg=videoBg;hideBgVideo=(ad.data.html&&ad.data.html.match(regexNoBgVideo));if(hideBgVideo){output.videos.bg=null;}}
if(ad.data.shop&&ad.data.shop.products){output.shopData={url:'',showProduct:true,showPrice:true,products:ad.data.shop.products,prependWings:{left:'',right:'',},appendWings:{left:'',right:'',},privacy:{optout_click_url:'',optout_image_url:'',},};output.type='html5';}
function recursiveClean(adObject){Object.keys(adObject).forEach(function each(i){if(sublime.isObject(adObject[i])){recursiveClean(adObject[i]);}
if(sublime.inArray(i,['top','fixed','footer_fixed','top_sticky','moat'])){return;}
if(!adObject[i]){delete adObject[i];}});}
if(exclude){recursiveClean(output);}
return output;};sublime.compat.windowHasAds=function windowHasAds(someWindow){let hasAds=someWindow.ayads_ads||null;if(!hasAds||!sublime.isArray(hasAds)){if(someWindow.ayads_data){hasAds=[{data:someWindow.ayads_data,}];}}
if(sublime.isEmpty(hasAds)){const childrenIframe=someWindow.document.querySelector('iframe[id^="tm_ad_"]');if(childrenIframe){const childrenIframeWindow=childrenIframe.contentWindow;if(childrenIframeWindow.ayads_data){hasAds=[{data:childrenIframeWindow.ayads_data,}];}}}
if(sublime.isEmpty(hasAds)){return[];}
const sublimeAds=[];hasAds.forEach(function each(rawAd){const ad=sublime.compat.fromAyadsAd(rawAd,true);ad.response_format='html';if(ad.raid){ad.isRedirect=true;}else{ad.isAdserving=true;}
sublimeAds.push(ad);});if(typeof someWindow.sublimeExternalData==='object'){sublime.creativeExternalData=merge({},someWindow.sublimeExternalData);}
return sublimeAds;};sublime.compat.windowHasRedirect=function windowHasRedirect(someWindow){var sublimeAds=sublime.compat.windowHasAds(someWindow);if(sublimeAds&&sublimeAds[0]){return sublimeAds[0];}
return null;};sublime.hook.register('step.creativeContainerAdded',function register(){sublime.window.ayads.additionalScriptsLoaded=true;});sublime.helpers.createNamespace('sublime.display.desktop');function isReminder(creativeAd){var creativeHasReminder=sublime.helpers.hasProperty(creativeAd,'desktop_setup.reminder')&&sublime.pInt(creativeAd.desktop_setup.reminder);var creativeHasVideo=creativeAd.videos&&creativeAd.videos.top;var creativeIsVpaid=!!creativeAd.vpaid;return!0&&creativeHasReminder&&(creativeHasVideo||creativeIsVpaid);}
function desktopRenderVPaid(ad){const VIDEO_RATIO=16 / 9;log.info('VPAID > AdUnit provided by '+(ad.vpaid.provider||ad.vpaid.mediaFile));ad.vpaid.config={width:ad.top*VIDEO_RATIO,height:ad.top,viewMode:'normal',bitrate:100000,};sublime.display.desktop.skinz.commonsVideo.registerPixels();const player=sublime.display.desktop.skinz.commonsVideo.createPlayerElement(ad,ad.vpaid.config.width);sublime.vpaid.render(ad.vpaid,player).then(function vpaidRenderSuccess(vpaidWrapper){sublime.hook.call('step.impression.before');sublime.vpaid.addExtraCss(ad.vpaid.provider);vpaidWrapper.on('AdStopped',function AdStopped(message){vpaidWrapper.onStopAd();log.info('VPAID > Ad has stopped',message);log.info('Reload video.');sublime.vpaid.clean(player.container);const ayadsVideo=sublime.document.getElementById(sublime.display.elements.VIDEO_ID.desktop);if(sublime.isUrl(ad.videos.top)){ayadsVideo.src=ad.videos.top;ayadsVideo.loop=true;ayadsVideo.play();}});if(isReminder(ad)){sublime.display.desktop.skinz.videoReminder.render(ad);}else{sublime.display.desktop.skinz.video.render(ad);}
sublime.hook.call('step.impression.after');});}
sublime.display.desktop.adIsReady=function adIsReady(ad){if(ad.creative_type==='video toproll classic'){return topRollAdIsReady(ad);}
if(ad.shopData){return sublime.display.desktop.skinz.shop.adIsReady(ad);}
if(isReminder(ad)){return sublime.display.desktop.skinz.videoReminder.adIsReady(ad);}
if((ad.videos&&ad.videos.top)||ad.vpaid){return sublime.display.desktop.skinz.video.adIsReady(ad);}
if(ad.type==='html5'){return sublime.display.desktop.skinz.html5.adIsReady(ad);}
return sublime.display.desktop.skinz.classic.adIsReady(ad);};sublime.display.desktop.render=function render(ad){log.info('sublime.display.desktop');ad.top=Object.prototype.hasOwnProperty.call(ad,'top')?sublime.pInt(ad.top||0):220;ad.top=Math.round(ad.top*1.01);if(ad.creative_type==='video toproll classic'){topRollRender(ad,sublime.window);return;}
if(ad.vpaid){desktopRenderVPaid(ad);return;}
sublime.hook.call('step.impression.before');if(ad.shopData){sublime.display.desktop.skinz.shop.render(ad);}else if(isReminder(ad)){sublime.display.desktop.skinz.videoReminder.render(ad);}else if(ad.videos&&ad.videos.top){sublime.display.desktop.skinz.video.render(ad);}else if(ad.type==='html5'){sublime.display.desktop.skinz.html5.render(ad);}else{sublime.display.desktop.skinz.classic.render(ad);}
sublime.hook.call('step.impression.after');};sublime.display.desktop.setupZoneAd=function setupZoneAd(ad){sublime.hook.call('step.setupZoneAd.before');let html="<style>\niframe[id^=\"ayads-pull-creative-\"], #Footeo_ATF_1x1 {display:none !important;}\n#background{background:none !important}\n.nav-drawer-container{display:none  !important}\n#content{background-color: white !important;margin-top: 0px !important;}\n#blockadd{width: 1010px !important;background-color: white !important;display: none !important;}\n#content .container{width: 1010px !important;}\n</style>\n\n<script>\nfunction init(){\n    /* Init variables */\n    var html = sublime.window.document.querySelector(\'html\'),\n        body = sublime.window.document.body,\n        isSafari = navigator.userAgent.indexOf(\'Safari\') != -1 && navigator.userAgent.indexOf(\'Chrome\') == -1,\n        IsEdge = navigator.userAgent.indexOf(\'Edge\') != -1,\n        isChrome = navigator.userAgent.indexOf(\'Chrome\') != -1 && !IsEdge,\n        isMac = navigator.appVersion.indexOf(\"Mac\") != -1,\n        isVideo = !sublime.isEmpty(sublime.creativeAd.videos),\n        bgfix = sublime.creativeAd.fixed,\n        format = \'\',\n        ayadsVideoLayer,\n        firstCall,\n        i = 0,\n        /* Edit variables */\n        maxHeightHeader = 41,\n        minHeightHeader = 41;\n    /**************** ADAPT MARGIN TO HTML AND LAUNCH FUNCTION FOR OTHERS ELEMENTS ****************/\n    function fixSkin(){\n        isChrome ? html.style.cssText = \'padding-top:\' + maxHeightHeader + \'px !important;\' : html.style.cssText = \'margin-top:\' + maxHeightHeader + \'px !important;\';\n        if ((bgfix && !isVideo) || (!bgfix && isMac && isSafari)  || (!bgfix && isChrome)) {\n            body.style.cssText = \'background-position: center \'+maxHeightHeader+\'px !important;\';\n        }\n        if (bgfix) {\n            fixSkinOnScrollEvent();\n            if (firstCall) {\n                sublime.window.addEventListener(\'scroll\', fixSkinOnScrollEvent);\n                firstCall = false;\n            }\n        }\n    }\n    /**************** ADAPT MARGIN TO OTHERS ELEMENTS ****************/\n    function fixSkinOnScrollEvent(){\n        var y = sublime.window.pageYOffset,\n            newMarginTop;\n \n        if (y === 0) {\n            newMarginTop = maxHeightHeader;\n        } else if (y > 0 && y < (maxHeightHeader - minHeightHeader)) {\n            newMarginTop = Math.floor(maxHeightHeader - y);\n        } else {\n            newMarginTop = minHeightHeader;\n        }\n \n        if (isVideo && ayadsVideoLayer) {\n            ayadsVideoLayer.style.cssText = \'top:\' + newMarginTop + \'px !important;\';\n        } else {\n            body.style.cssText = \'background-position:center \' + newMarginTop + \'px !important;\';\n        }\n    }\n    /**************** CHECK IF ELEMENT IS PRESENT ****************/\n    function checkDivPresence(div, callback, bool){\n        myDiv = sublime.window.document.querySelector(div);\n        if (myDiv) {\n            if (bool) {\n                if (isVideo && div === \"#ayads-video-layer\") {\n                    ayadsVideoLayer = myDiv;\n                }\n                firstCall = true;\n            }\n            callback(myDiv);\n        } else {\n            top.sublime.timer.setTimeout(function(){\n                if (i > 30) {\n                    top.sublime.timer.clearTimeout(function() {\n                        checkDivPresence();\n                    });\n                } else {\n                checkDivPresence(div, callback, bool);\n                }\n                i += 1;\n            }, 100);\n        }\n    }\n    /**************** ADAPT MARGIN TO HEADER WITH A DYNAMIC HEIGHT (OPTION) ****************/\n    function getHeightDynamicHeader(headerDyn){\n        maxHeightHeader = headerDyn.offsetHeight;\n        fixSkin();\n    }\n    /**************** LAUNCH FUNCTION CHECK ****************/\n    //html.style.cssText = \'margin-top:\' + maxHeightHeader + \'px !important;\';\n    isChrome ? html.style.cssText = \'padding-top:\' + maxHeightHeader + \'px !important;\' : html.style.cssText = \'margin-top:\' + maxHeightHeader + \'px !important;\';\n    if (isVideo){\n        checkDivPresence(\'#ayads-video-layer\', fixSkin, true);\n    } else {\n        checkDivPresence(\'body\', fixSkin, true);\n    };\n    sublime.hook.register(\"event.cleanUp\", function(){\n        sublime.window.removeEventListener(\'scroll\', fixSkinOnScrollEvent);\n        isChrome ? html.style.paddingTop = \'\' : html.style.marginTop = \'\';\n    });\n    /* checkDivPresence(\'header\', getHeightDynamicHeader); */\n}\n/**************** LAUNCH GLOBAL FUNCTION ****************/\ninit();\n</script>"+(ad.html||'');if(html){html=sublime.macros.replace(html,ad);sublime.display.writeToContainer(html);}
sublime.hook.call('step.setupZoneAd.after');};sublime.helpers.createNamespace('sublime.display.desktop.skinz');var stampImageUrlDesktop=sublime.env('delivery_url')+'creatives/watermark803-v3.png';sublime.display.desktop.skinz.adIsReady=function adIsReady(ad){return!sublime.isEmpty(ad);};sublime.display.desktop.skinz.render=function render(ad){var clickCallback=clickCallbackCreator(ad);if(0&&ad.html&&typeof ad.html==='string'){ad.html=ad.html.replace(/(\<!-- Start video reminder.*?\<!-- End video reminder -->)/gm,'');}
sublime.display.addCreativeContainer();sublime.document.documentElement.addEventListener('click',clickCallback,false);sublime.hook.register('event.cleanUp',function clearEventListener(){sublime.document.documentElement.removeEventListener('click',clickCallback,false);});sublime.display.desktop.setupZoneAd(ad);addCommonCss(ad);};sublime.display.desktop.skinz.addBgImage=function addBgImage(imageUrl,selector){selector=selector||'body';var cssBackgroundImgProperty='background-image: url("'+imageUrl+'") !important;';if(347===803){cssBackgroundImgProperty='background-image:url('+stampImageUrlDesktop+'), url("'+imageUrl+'") !important;';}
sublime.display.loadImage(imageUrl,function(){var width=this.width||1800,css=selector+' {'+
cssBackgroundImgProperty+'background-size:'+Math.round(width*1.01)+'px auto !important;'+'background-position: center top;'+'background-repeat: no-repeat;'+'}';sublime.display.addCss(css);});};function addCommonCss(ad){var scale=1.01;ad.color=ad.color||'#fff';if(ad.fixed){ad.bgPosition='50% '+sublime.window.getComputedStyle(sublime.document.documentElement).marginTop;ad.bgAttachement='fixed';}else{ad.bgPosition='center top';ad.bgAttachement='scroll';}
var css='body {'+'cursor:default;'+'background-position:'+ad.bgPosition+' !important;'+'background-repeat:no-repeat !important;'+'background-image:none;'+'background-color:'+ad.color+' !important;'+'background-attachment:'+ad.bgAttachement+' !important;'+'margin-left:auto !important;'+'margin-right:auto !important;'+'margin-top:'+ad.top+'px !important;'+'max-width:'+(1000*scale)+'px'+'}'+'html {'+'background-image:none !important;'+'background-color:transparent !important;'+'cursor:pointer'+'}';sublime.display.addCss(css);}
var DEFAULT_SKINZ_WIDTH=1800;function getMouseRelativePosition(absoluteX,absoluteY){var scale=1.01,w=sublime.window||window,d=w.document,browserwidth=Math.max(d.body.parentNode.clientWidth,d.body.clientWidth),scrolltop=Math.max(d.body.scrollTop,w.pageYOffset),marginLeft=Math.round((browserwidth-DEFAULT_SKINZ_WIDTH*scale)/ 2),html=d.body.parentElement,style=html.currentStyle||window.getComputedStyle(html),marginTop=sublime.pInt(style.marginTop),x=absoluteX-marginLeft,y=!document.documentMode?(absoluteY-marginTop):absoluteY;if(sublime.ad.fixed){y-=scrolltop;}
return{x:Math.round(x / scale),y:Math.round(y / scale)};}
function clickCallbackCreator(ad){return function clickCallback(e){let target=false;const videoTargets=['ayads-video','ayads-video-bg','ayads-video-layer'];const allowedClickAreas=['double','full','strict'];const pos=getMouseRelativePosition(e.clientX,e.pageY);let clickheight=ad.height||1000;let clickInSideGutter=false;let clickInBottom=false;const gutterWidth=0;const adIsClickable=sublime.display.adIsClickable(ad);if(adIsClickable.clickable===false){log.warn(adIsClickable.message);return;}
if(e.target===sublime.document.documentElement){target='html';}else if(sublime.inArray(e.target.id,videoTargets)){target='video';}
if(!target){return;}
log.info('Sublime click',e.clientX,e.pageY);if(!ad.click_area||!sublime.inArray(ad.click_area,allowedClickAreas)){ad.click_area=allowedClickAreas[0];}
if(ad.click_area==='double'){clickheight*=2;}
if(ad.click_area==='strict'||ad.click_area==='double'){if(!ad.fixed){clickInBottom=pos.y<0||pos.y>clickheight;}}
clickInSideGutter=sublime.document.documentElement.clientWidth-e.clientX<gutterWidth;if(clickInSideGutter||clickInBottom){return;}
sublime.adServer.incrementCappings('clicks');sublime.hook.call('event.click',{x:e.clientX,y:e.pageY,click_area:ad.click_area,});log.info(ad.click_area);const positionQueryString={clickx:pos.x,clicky:pos.y};sublime.analytics.fire(347,'click');sublime.window.open(sublime.display.getFinalClickUrl(ad,null,null,positionQueryString));};}
var hoverMetricsSent=false,hoverMetricsTimeout=null,videoTop=null,skinzVideoContainer=null,videoTopControls=null,videoBg=null,muteBtn=null,triggeredQuartiles=[],defaultVideoBgSrc='https://cdn.ayads.co/17/07/video-bg-170781.mp4';sublime.helpers.createNamespace('sublime.display.desktop.skinz.commonsVideo');var videoPixelsDesktop={videoQ0:{inherit:'_videoQuartile',qs:{e:'q0'},addBrowserDimensions:true,addPageHeightDimension:true,},videoQ1:{inherit:'_videoQuartile',qs:{e:'q1'},addBrowserDimensions:true,addPageHeightDimension:true,},videoQ2:{inherit:'_videoQuartile',qs:{e:'q2'},addBrowserDimensions:true,addPageHeightDimension:true,},videoQ3:{inherit:'_videoQuartile',qs:{e:'q3'},addBrowserDimensions:true,addPageHeightDimension:true,},videoQ4:{inherit:'_videoQuartile',qs:{e:'q4'},addBrowserDimensions:true,addPageHeightDimension:true,},videoHover:{inherit:'_commonSkinz',qs:{e:'h'}},videoStartedLoading:{inherit:'_commonSkinz',qs:{e:'vsl'}},videoCanplaythrough:{inherit:'_commonSkinz',qs:{e:'dicpt'}},videoLoadeddata:{inherit:'_commonSkinz',qs:{e:'dild'}},videoPlaying:{inherit:'_commonSkinz',qs:{e:'dip'}},};sublime.display.desktop.skinz.commonsVideo.adIsReady=function adIsReady(ad){var isReadableAd=sublime.isUrl(ad.url)&&ad.videos&&sublime.isUrl(ad.videos.top);var isExternalVPAID=ad.vpaid&&ad.isExternal;return isReadableAd||isExternalVPAID;};sublime.display.desktop.skinz.commonsVideo.render=function render(ad){if(!ad.vpaid){sublime.display.desktop.skinz.commonsVideo.registerPixels();sublime.display.desktop.skinz.commonsVideo.createPlayerElement(ad);}else{sublime.document.getElementById(sublime.display.elements.VIDEO_CONTAINER_ID.desktop).style.marginTop='-'+ad.top+'px';}
if(ad.images.bg){sublime.display.desktop.skinz.addBgImage(ad.images.bg,'#ayads-video-layer');}
addEventsOnVideoTop();if(!ad.vpaid){videoTop.src=ad.videos.top;}
if(ad.videos.bg||ad.isExternal){videoBg=createVideoBgElement();addEventsOnVideoBg();if(ad.videos.bg){videoBg.src=ad.videos.bg;}else if(ad.isExternal){var videoTopMutationPromise=new sublime.Promise(function(resolve,reject){var videoTopMutationObserver=new MutationObserver(function(mutationsList){mutationsList.forEach(function(mutation){if(mutation.type==='attributes'&&mutation.attributeName==='src'&&sublime.isUrl(videoTop.src)&&videoBg.src!==videoTop.src){videoTopMutationObserver.disconnect();resolve(videoTop.src);}});});videoTopMutationObserver.observe(videoTop,{attributes:true});});var adPlayingPromise=new sublime.Promise(function(resolve){sublime.hook.register({namespace:sublime.vpaid.hookNames.adPlaying,callback:function(){resolve(defaultVideoBgSrc);}});});if(sublime.isUrl(videoTop.src)){videoBg.src=videoTop.src;}else{sublime.Promise.any([videoTopMutationPromise,adPlayingPromise]).then(function(src){videoBg.src=src;videoBg.play();});}
videoBg.classList.add('blurred');}
sublime.document.body.insertBefore(videoBg,sublime.document.body.firstChild);}
sublime.hook.call('step.videoContainerAdded');};sublime.display.desktop.skinz.commonsVideo.registerPixels=function(){sublime.analytics.setPixels(347,videoPixelsDesktop);};sublime.display.desktop.skinz.commonsVideo.createPlayerElement=function createPlayerElement(ad,width){videoTop=createVideoTopElement();skinzVideoContainer=createVideoControlsContainer(ad.top,width);videoTopControls=createVideoControls();skinzVideoContainer.appendChild(videoTopControls);var loadingBar=createVideoLoadingBar();skinzVideoContainer.appendChild(loadingBar);muteBtn=createvideoMuteButton();skinzVideoContainer.appendChild(muteBtn);addCommonVideoCss(ad);skinzVideoContainer.appendChild(videoTop);sublime.document.body.insertBefore(skinzVideoContainer,sublime.document.body.firstChild);var layer=createVideoLayer(skinzVideoContainer.style.marginTop);sublime.document.body.insertBefore(layer,sublime.document.body.firstChild);videoTop.addEventListener('loadstart',function(){sublime.analytics.fire(347,'videoStartedLoading');});videoTop.addEventListener('ended',computeVideoMetrics);videoTop.addEventListener('loadeddata',function videoLoadeddataCallback(){sublime.analytics.fire(347,'videoLoadeddata');});videoTop.addEventListener('playing',function videoPlayingCallback(){sublime.analytics.fire(347,'videoPlaying');});return{video:videoTop,container:skinzVideoContainer}};function createVideoTopElement(){var doc=sublime.document,ayadsVideo=doc.getElementById(sublime.display.elements.VIDEO_ID.desktop);var video=ayadsVideo?ayadsVideo:doc.createElement('video');video.id=sublime.display.elements.VIDEO_ID.desktop;if(!sublime.creativeAd.vpaid){video.loop=true;}
video.autoplay=true;video.preload=true;video.muted=true;video.volume=0;return video;}
function createVideoBgElement(){var video=sublime.document.createElement('video');video.id='ayads-video-bg';video.preload=true;video.loop=true;video.muted=true;video.volume=0;return video;}
function createVideoControlsContainer(top,width){var container=sublime.document.getElementById(sublime.display.elements.VIDEO_CONTAINER_ID.desktop);if(!container){container=sublime.document.createElement('div');container.id=sublime.display.elements.VIDEO_CONTAINER_ID.desktop;}
container.style.height=top+'px';container.style.marginTop='-'+container.style.height;if(width){container.style.width=width+'px';}
container.addEventListener('mouseover',function(){videoTop.volume=.75;if(!hoverMetricsSent){sublime.timer.clearTimeout(hoverMetricsTimeout);hoverMetricsTimeout=sublime.timer.setTimeout(function(){hoverMetricsSent=true;sublime.analytics.fire(347,'videoHover');},2000);}});container.addEventListener('mouseout',function(){videoTop.volume=0;sublime.timer.clearTimeout(hoverMetricsTimeout);});return container;}
function createVideoLoadingBar(){var loadingBar=sublime.document.createElement('div'),progressBar=sublime.document.createElement('div');loadingBar.classList.add('sublime-loading-bar');progressBar.classList.add('sublime-loading-bar-progress');loadingBar.appendChild(progressBar);videoTop.addEventListener('timeupdate',function(){var loadingBarPercentage=Math.abs((((videoTop.duration-videoTop.currentTime)/ videoTop.duration)*100)-100);progressBar.style.width=loadingBarPercentage+'%';});return loadingBar;}
function createVideoLayer(marginTop){var layer=sublime.document.createElement('div');layer.id='ayads-video-layer';layer.style.marginTop=marginTop;layer.addEventListener('mouseover',videoMouseOver);layer.addEventListener('mouseout',videoMouseOut);return layer;}
function createVideoControls(){var controls=sublime.document.createElement('div');controls.id='ayads-video-controls';controls.classList.add('ayads-video-buttons');controls.addEventListener('click',function(){playPause();});return controls;}
function createvideoMuteButton(){var muteBtn=sublime.document.createElement('div');muteBtn.id='ayads-video-controls-sound';muteBtn.classList.add('ayads-video-buttons','ayads-video-controls-sound','mute','pulsing-sound-button');muteBtn.addEventListener('click',function(e){e.stopPropagation();e.preventDefault();muteBtn.classList.remove('pulsing-sound-button');toggleMute(!muteBtn.classList.contains('mute'));});return muteBtn;}
function addEventsOnVideoTop(){videoTop.addEventListener('mouseover',videoMouseOver);videoTop.addEventListener('mouseout',videoMouseOut);videoTop.addEventListener('canplaythrough',videoTopCanplaythroughCallback);videoTop.addEventListener('play',function(){pausePlayElementsRender('playing');});videoTop.addEventListener('pause',function(){pausePlayElementsRender('paused');});var isIE=/*@cc_on!@*/ false||!!document.documentMode;if(isIE){sublime.window.document.querySelector('html').addEventListener('mousemove',soundVideoIE);sublime.window.document.querySelector('html').addEventListener('mouseout',soundVideoIE);}
sublime.hook.register(sublime.vpaid.hookNames.adClickThru,function(){sublime.display.openTargetUrl({},sublime.creativeAd,sublime.ad.url);});}
function addEventsOnVideoBg(){videoBg.addEventListener('mouseover',videoMouseOver);videoBg.addEventListener('mouseout',videoMouseOut);videoBg.addEventListener('canplaythrough',videoBgCanplaythroughCallback);}
function videoMouseOver(){videoTop.volume=0.2;}
function videoMouseOut(){videoTop.volume=0;}
function videoTopCanplaythroughCallback(){var computeInterval=500
sublime.creativeAd.video_duration=parseInt(videoTop.duration,10);sublime.analytics.fire(347,'videoCanplaythrough');playPause(1&&!!sublime.creativeAd.video_autoplay);videosSynchronizer();computeVideoMetrics();sublime.timer.setInterval(function(){if(!videoTop.paused){videosSynchronizer();computeVideoMetrics();}},computeInterval);sublime.hook.call('step.videoCanplaythrought',{video:videoTop});videoTop.removeEventListener('canplaythrough',videoTopCanplaythroughCallback);}
function videoBgCanplaythroughCallback(){sublime.hook.call('step.videoBgCanplaythrought',{video:videoBg});videoBg.removeEventListener('canplaythrough',videoBgCanplaythroughCallback);}
function soundVideoIE(e){if(e.toElement===this){videoTop.volume=0.2;}else if(e.toElement!==videoTop||e.type==="mouseout"){videoTop.volume=0;}}
function playPause(play){play=typeof(play)!=='undefined'?play:videoTop.paused;if(play){videoTop.play();videoBg&&videoBg.play();videoTop.isVpaid&&videoTop.vpaid.resumeAd();}else{videoTop.pause();videoBg&&videoBg.pause();videoTop.isVpaid&&videoTop.vpaid.pauseAd();}}
function computeVideoMetrics(){if(sublime.ad.vpaid){return;}
var quartileNames=['start','firstQuartile','midpoint','thirdQuartile','complete'];if(!sublime.isDefined(videoTop.currentTime)||!sublime.isDefined(videoTop.duration)){log.error('video.currentTime or video.duration is not defined, no metrics sent.');return;}
if(videoTop.paused&&videoTop.duration!==videoTop.currentTime){log.warn('Video is paused, no metrics sent.');return;}
var quartileLength=videoTop.duration / 4,unroundedQuartile=videoTop.currentTime / quartileLength,quartile=Math.floor(unroundedQuartile),quartileName;if(unroundedQuartile<3&&triggeredQuartiles[3]){quartile=4;}
if(quartile>4||triggeredQuartiles[quartile]){return;}
for(var index=0;index<quartile;index++){var quartileIndex='videoQ'+index;var pixels=sublime.analytics.getPixels();if(sublime.helpers.hasProperty(pixels,347+'.'+quartileIndex)&&pixels[347][quartileIndex].fired!==1){sublime.analytics.fire(347,quartileIndex);}}
sublime.analytics.fire(347,'videoQ'+quartile);quartileName=quartileNames[quartile];sublime.hook.call('step.video.quartile'+quartile,{duration:videoTop.duration,quartile:quartile,quartileName:quartileName,currentTime:videoTop.currentTime});triggeredQuartiles[quartile]=true;};function pausePlayElementsRender(videoStatus){if(videoTop.isVpaid){return;}
if(videoStatus==='playing'){var playButton=sublime.document.getElementById('ayads-video-buttons-play');var pauseButtonPulseCircle=sublime.document.getElementById('play-video-pulsar');var vidOverlay=sublime.document.getElementById('ayads-video-overlay');videoTopControls.classList.add('ayads-video-buttons');if(playButton){playButton.remove();}
if(pauseButtonPulseCircle){pauseButtonPulseCircle.remove();}
if(vidOverlay){vidOverlay.remove();}}else{var playButton=sublime.document.createElement('div');playButton.id='ayads-video-buttons-play';playButton.classList.add('ayads-video-buttons','play');videoTopControls.classList.add('ayads-video-buttons','paused');videoTopControls.appendChild(playButton);var pauseButtonPulseCircle=sublime.document.createElement('div');pauseButtonPulseCircle.id='play-video-pulsar';videoTopControls.appendChild(pauseButtonPulseCircle);var vidOverlay=sublime.document.createElement('div');vidOverlay.id='ayads-video-overlay';skinzVideoContainer.appendChild(vidOverlay);}}
function toggleMute(mute){if(mute){muteBtn.classList.add('mute');videoTop.muted=true;}else{muteBtn.classList.remove('mute');videoTop.muted=false;}};function videosSynchronizer(){if(!videoBg){return false;}
if(videoTop.readyState!==4||videoBg.readyState!==4){return false;}
if(videoTop.duration!==videoBg.duration){return false;}
var timeDiff=Math.abs(videoBg.currentTime-videoTop.currentTime);if(timeDiff<.1){return false;}
videoBg.currentTime=videoTop.currentTime;if(!videoTop.paused&&videoBg.paused){videoBg.play();}}
function addCommonVideoCss(ad){const fixed=ad.fixed;const top=ad.top;const adIsClickable=sublime.display.adIsClickable(ad);const css='body {position:static !important}'
+'#ayads-video {height:100%;min-height:80px}'
+'#ayads-video-bg {min-width:100%;min-height:100%;position:fixed;top:0;left:0;right:0;z-index:-2147483648;cursor:pointer;}'
+'#ayads-video-bg.blurred {filter: blur(5px) brightness(75%); transform: scale(1.06);}'
+'#ayads-video-layer {position:'+(fixed?'fixed':'absolute')+';z-index:-2147483647;margin:auto;width:100%;'
+'height:'+(1000*1.01)+'px;left:0;right:0;-webkit-transform:translate3d(0,0,0);cursor:'+(adIsClickable.clickable===true?'pointer':'default')+'}'
+'#ayads-video-container {position:absolute;margin:auto;left:50%;transform:translate3d(-50%,0,0);-webkit-transform:translate3d(-50%,0,0);-webkit-transform:translate3d(-50%,0,0);cursor:pointer;height:'+top+'px;}'
+'#ayads-video-overlay {height:100%;width:100%;position:fixed;top:0;left:0;background-color:black;opacity:0.5}'
+'#ayads-video-controls {display:flex;justify-content:center;align-items:center;position:absolute;z-index:1;bottom:0;margin:auto;}'
+'#ayads-video-controls.paused {height:100%;width:100%;position:fixed;top:0;left:0}'
+'#ayads-video-controls-sound {opacity:.5;-webkit-transition:opacity .2s;transition:opacity .3s;position:absolute;right: 10px; bottom: 10px; height: 25px; width: 25px; margin:0; background-image: url(https://cdn.ayads.co/creatives/commons/volume-up.svg); }'
+'#ayads-video-controls-sound.mute {opacity:1;background-image: url(https://cdn.ayads.co/creatives/commons/volume-off.svg);}'
+'#ayads-video-controls-sound.mute.pulsing-sound-button {transition: opacity .2s cubic-bezier(0.4, 0, 1, 1);animation-name: pulsing-sound-button;animation-duration: 1s;animation-iteration-count: infinite;animation-direction: alternate-reverse;animation-timing-function: cubic-bezier(0.4, 0, 1, 1);cursor: pointer;}'
+'@keyframes pulsing-sound-button {from {transform: scale(1);} to {transform: scale(1.4);}}'
+'.ayads-video-buttons {background:no-repeat center;position:absolute;background-size:contain;z-index:1;bottom:0;margin:10px 12px;}'
+'#ayads-video-buttons-play {height:37px;width:37px;position:initial;background-image:url(https://cdn.ayads.co/creatives/commons/icon-play.svg)}'
+'#play-video-pulsar{position:absolute;background:transparent;border:1px solid white;width:35px;border-radius:50%;height:35px;z-index:5;transform-origin:center;animation-name:play-video-pulsar;animation-duration:.5s;animation-iteration-count:infinite;animation-direction:alternate-reverse;animation-timing-function:cubic-bezier(0.4,0,1,1);}'
+'@keyframes play-video-pulsar{ from {transform:scale(1.5);opacity:.2;} to {transform:scale(1.2);opacity:1;}}'
+'.sublime-loading-bar {position: absolute;bottom:0;height: 5px;width: 100%;background-color:white}'
+'.sublime-loading-bar-progress {position: relative;height: 5px;width: 0%;background-color:#e9531d}';sublime.display.addCss(css);}
sublime.hook.register('event.cleanUp',function clearEventListener(){var isIE=/*@cc_on!@*/ false||!!document.documentMode;if(isIE){sublime.window.document.querySelector('html').removeEventListener('mousemove',soundVideoIE);sublime.window.document.querySelector('html').removeEventListener('mouseout',soundVideoIE);}});sublime.helpers.createNamespace('sublime.display.desktop.skinz.classic');sublime.display.desktop.skinz.classic.adIsReady=function adIsReady(ad){var hasValidUrl=sublime.isUrl(ad.url),hasImage=ad.images&&sublime.isUrl(ad.images.bg);return sublime.display.desktop.skinz.adIsReady(ad)&&hasImage&&hasValidUrl;};sublime.display.desktop.skinz.classic.render=function render(ad){log.info('sublime.display.desktop.skinz.classic');sublime.display.desktop.skinz.render(ad);sublime.display.desktop.skinz.addBgImage(ad.images.bg);};sublime.helpers.createNamespace('sublime.display.desktop.skinz.video');sublime.display.desktop.skinz.video.adIsReady=function adIsReady(ad){return sublime.display.desktop.skinz.adIsReady(ad)&&sublime.display.desktop.skinz.commonsVideo.adIsReady(ad);};sublime.display.desktop.skinz.video.render=function render(ad){log.info('sublime.display.desktop.skinz.video');sublime.display.desktop.skinz.render(ad);sublime.display.desktop.skinz.commonsVideo.render(ad);};sublime.helpers.createNamespace('sublime.display.desktop.skinz.videoReminder');sublime.window=sublime.window||window;var videoTop,skinzVideoContainer,originalVideoWidth=0,originalVideoHeight=0,originalVideoRatio,fullVideoWidth,fullVideoHeight,videoIsReminder=false,videoClosed=false,videoTopCss,skinzVideoContainerCss,switchVideoScrollPosition,BASE_SITE_WIDTH=1000,MAX_VIDEO_WIDTH=400*1.01,MIN_WING_SIZE=140,PERCENTAGE_TO_DISPLAY_REMINDER=40;var videoReminderPixels={reminderClose:{inherit:'_commonSkinz',qs:{e:'vdrc'}},noVideoReminder:{inherit:'_commonSkinz',qs:{e:'vdrn',},addBrowserDimensions:true},};sublime.display.desktop.skinz.videoReminder.adIsReady=function adIsReady(ad){return sublime.display.desktop.skinz.adIsReady(ad)&&sublime.display.desktop.skinz.commonsVideo.adIsReady(ad);};sublime.display.desktop.skinz.videoReminder.render=function render(ad){log.info('sublime.display.desktop.skinz.videoReminder');sublime.analytics.setPixels(347,videoReminderPixels);ad.html=ad.html.replace(/(\<!-- Start video reminder.*?\<!-- End video reminder -->)/gm,'');sublime.display.desktop.skinz.render(ad);sublime.display.desktop.skinz.commonsVideo.render(ad);videoTop=sublime.document.getElementById(sublime.display.elements.VIDEO_ID.desktop);skinzVideoContainer=sublime.document.getElementById(sublime.display.elements.VIDEO_CONTAINER_ID.desktop);createCloseVideoReminderBtn();addVideoReminderCss();if(ad.vpaid){videoTop.vpaid.on('AdStarted',function(){videoReady.apply(videoTop);});}
videoTop.addEventListener("loadedmetadata",videoReady,false);};function videoReady(){videoTopCss=videoTopCss||videoTop.style.cssText;skinzVideoContainerCss=skinzVideoContainerCss||skinzVideoContainer.style.cssText;originalVideoWidth=originalVideoWidth||videoTop.offsetWidth;originalVideoHeight=originalVideoHeight||videoTop.offsetHeight;fullVideoWidth=this.videoWidth*1.01;fullVideoHeight=this.videoHeight*1.01;originalVideoRatio=fullVideoWidth / fullVideoHeight;videoReminderScrollCallback();sublime.window.addEventListener('scroll',videoReminderScrollCallback);sublime.window.addEventListener('resize',debounce(videoReminderResizeCallback,100));}
function createCloseVideoReminderBtn(){var closeBtn=sublime.document.createElement('div');closeBtn.id='sublime-video-close';closeBtn.className='ayads-video-buttons';skinzVideoContainer.insertBefore(closeBtn,skinzVideoContainer.firstChild);closeBtn.addEventListener('click',function(){videoClosed=true;closeBtn.classList.add('hide');closeBtn.classList.remove('show');displayVideoAtTop();sublime.analytics.fire(347,'reminderClose')});}
function videoReminderScrollCallback(){if(videoClosed){return;}
if(!canDisplayVideoAsReminder()){sublime.analytics.fire(347,'noVideoReminder');return;}
if(!videoIsReminder&&!videoIsVisibleEnough(getViewablePointsToCheck())){switchVideoScrollPosition=sublime.window.pageYOffset;displayVideoAsReminder();videoIsReminder=true;return;}
if(videoIsReminder&&sublime.window.pageYOffset<switchVideoScrollPosition){displayVideoAtTop()
videoIsReminder=false;}}
function videoReminderResizeCallback(){if(videoClosed||!videoIsReminder){return;}
if(!canDisplayVideoAsReminder()){sublime.analytics.fire(347,'noVideoReminder');videoIsReminder=false;displayVideoAtTop();return;}
resizeVideoReminder();}
function canDisplayVideoAsReminder(){var siteWidth=Math.ceil(1.01*BASE_SITE_WIDTH);return sublime.window.document.documentElement.clientWidth-siteWidth>MIN_WING_SIZE*2;}
function getViewablePointsToCheck(){var videoTopY=videoTop.getBoundingClientRect().y||videoTop.getBoundingClientRect().top,videoTopX=videoTop.getBoundingClientRect().x||videoTop.getBoundingClientRect().left,originalVideoMidPointY=videoTopY+(videoTop.offsetHeight / 2),originalVideoMidPointX=videoTopX+(videoTop.offsetWidth / 2),percentageToCheckFromMid=Math.abs(50-PERCENTAGE_TO_DISPLAY_REMINDER),distanceFromMid=videoTop.offsetHeight / percentageToCheckFromMid;return{topPointX:originalVideoMidPointX,topPointY:originalVideoMidPointY-distanceFromMid,bottomPointX:originalVideoMidPointX,bottomPointY:originalVideoMidPointY+distanceFromMid,};}
function videoIsVisibleEnough(pointsToCheck){var elementOnTopPoint=sublime.document.elementFromPoint(pointsToCheck.topPointX,pointsToCheck.topPointY),elementOnBottomPoint=sublime.document.elementFromPoint(pointsToCheck.bottomPointX,pointsToCheck.bottomPointY);return skinzVideoContainer.contains(elementOnTopPoint)&&skinzVideoContainer.contains(elementOnBottomPoint);}
function displayVideoAsReminder(){skinzVideoContainer.classList.add('sublime-reminder');videoTop.classList.add('sublime-reminder');resizeVideoReminder();}
function displayVideoAtTop(){if(videoTop.vpaid){videoTop.vpaid.resizeAd(originalVideoWidth,originalVideoHeight,'normal');}
skinzVideoContainer.classList.remove('sublime-reminder');videoTop.style.cssText=videoTopCss;skinzVideoContainer.style.cssText=skinzVideoContainerCss;videoTop.classList.remove('sublime-reminder');}
function resizeVideoReminder(){var siteWidth=Math.ceil(1.01*BASE_SITE_WIDTH),sideWidth=(sublime.window.document.documentElement.clientWidth-siteWidth)/ 2;var videoWidth=Math.max(originalVideoWidth,fullVideoWidth);videoWidth=Math.min(sideWidth,videoWidth);videoWidth=Math.min(MAX_VIDEO_WIDTH,videoWidth);var videoHeight=videoWidth / originalVideoRatio;if(videoTop.vpaid){videoTop.vpaid.resizeAd(videoWidth,videoHeight,'thumbnail');}
skinzVideoContainer.style.right=sideWidth+'px';skinzVideoContainer.style.marginRight=-videoWidth+'px';skinzVideoContainer.style.setProperty('width',videoWidth+'px','important');skinzVideoContainer.style.setProperty('height',videoHeight+'px','important');}
function addVideoReminderCss(){var css='#ayads-video-container{margin-right: 0;transition:margin-right 0.5s ease-out;box-shadow:none!important;}'+'#ayads-video-container.sublime-reminder{position:fixed!important;bottom:0!important;margin-top:auto!important;z-index:100000000!important;transform:translate3d(0%,0,0)!important;left:inherit;}'+'#ayads-video{width:inherit;display:block;}'+'#ayads-video.sublime-reminder{width:100%!important;height:initial!important;min-height:initial!important;}'+'#sublime-video-close{transition:opacity 0.2s ease-out, top 0.3s ease-out;top:10px;right:0;width:20px;height:20px;opacity:0;background-image:url("https://cdn.ayads.co/creatives/commons/close-up.svg");}'+'#ayads-video-container.sublime-reminder:hover #sublime-video-close{opacity:1;top:0;}'+'#sublime-video-close.show{display:inherit!important;}'+'#sublime-video-close.hide{display:none!important;}';sublime.display.addCss(css);}
sublime.helpers.createNamespace('sublime.display.desktop.skinz.html5');sublime.display.desktop.skinz.html5.adIsReady=function adIsReady(ad){var hasValidUrl=sublime.isUrl(ad.url),hasHTML=!sublime.isEmpty(ad.html);return sublime.display.desktop.skinz.adIsReady(ad)&&hasHTML&&hasValidUrl;};sublime.display.desktop.skinz.html5.render=function render(ad){log.info('sublime.display.desktop.skinz.html5');sublime.display.desktop.skinz.render(ad);if(ad.images.bg){sublime.display.desktop.skinz.addBgImage(ad.images.bg);}};sublime.helpers.createNamespace('sublime.display.desktop.skinz.shop');sublime.display.desktop.skinz.shop.adIsReady=function adIsReady(ad){var hasShop=!sublime.isEmpty(ad.shopData);return sublime.display.desktop.skinz.adIsReady(ad)&&sublime.isUrl(ad.url)&&hasShop;};sublime.display.desktop.skinz.shop.render=function render(ad){log.info('sublime.display.desktop.skinz.shop');sublime.display.desktop.skinz.render(ad);if(ad.images.bg){sublime.display.desktop.skinz.addBgImage(ad.images.bg);}
displayShop(ad);};function displayShop(ad){var data=ad.shopData,i=0;if(!data.showProduct){log.info("displayShop: don't show products");return;}
if(!data.products||!data.products.length){log.info("displayShop: no products");return;}
data.gutterWidth=data.gutterWidth||180;data.repeatProducts=sublime.isDefined(data.repeatProducts)?data.repeatProducts:10;data.showCurrency=sublime.isDefined(data.showCurrency)?data.showCurrency:true;var siteWidth=1.01*1000,sideWidth=Math.ceil((sublime.document.documentElement.clientWidth-siteWidth)/ 2),gutterWidth=Math.ceil(data.gutterWidth*1.01),position,wings={left:null,right:null};var css='body{position: static!important;}'+'#sublime-ad-shop-left, #sublime-ad-shop-right {z-index: -1; position: absolute; transition: all 0.7s linear;  -webkit-box-sizing: border-box; -moz-box-sizing: border-box; box-sizing: border-box; padding:0;}'+'#sublime-ad-shop-left {-webkit-transform: translateX(-100%); -ms-transform: translateX(-100%); transform: translateX(-100%); }'+'#sublime-ad-shop-right {-webkit-transform: translateX(100%); -ms-transform: translateX(100%); transform: translateX(100%); }'+'.sublime-ad-item { text-align: center; transition: all 0.3s linear;  /*box-sizing: border-box;*/ }'+'.sublime-ad-item a {display: block; position: relative; }'+'.sublime-ad-item-title {font-weight: 600; font-size: 12px; margin: 5px 0 0 0; padding: 0 30%; }'+'.sublime-ad-privacy-link {position: absolute; }'+'.sublime-ad-item { background: #FFF; color: #000; font-size: 12px; overflow: hidden; text-align: center; }'+'.sublime-ad-item a { box-sizing: border-box; color: #555; display: block; text-decoration: none; width: 100%; }'+'.sublime-ad-item img.sublime-ad-item-image { display: inline; }'+'.sublime-ad-item-name { height: 28px; overflow: hidden; font-family: Arial,sans-serif !important; margin-top: 2px; }'+'.sublime-ad-item-price-container { font-weight: bold; font-family: Arial,sans-serif !important; }'+'img.sublime-ad-item-logo { height: 20px !important; vertical-align: middle; border: none; display: inline-block; }'+'.sublime-ad-item-discount_price {text-decoration:line-through;color:#999}'+'.sublime-ad-item-discount{color: #FFF;position: absolute;top: 10px;left: 10px;background: #fe0d54;border-radius: 20px;font-size: 15px;line-height: 40px;width: 40px;}';sublime.display.addCss(css);if(!sublime.isString(data.css)||!data.css.length){data.css=''+'#sublime-ad-shop-left, #sublime-ad-shop-right { padding: 0 2px;}'+'.sublime-ad-item { border-radius: 6px; box-shadow: 0 0 7px rgba(0,0,0,.8); margin-bottom: 30px; height: 180px; line-height: 14px;}'+'.sublime-ad-item a { box-sizing: border-box; color: #555; display: block; padding: 23px 18px; position: absolute; text-decoration: none; width: 100%; }'+'.sublime-ad-item-price-container { color: red; }'+'img.sublime-ad-item-image {height: 85px; }'+'.sublime-ad-item:hover {-webkit-transform: scale(1.1); transform: scale(1.1); }'+'.sublime-ad-item-price {margin-left: 5px;}';}
sublime.display.addCss(data.css);if(data.privacy&&data.privacy.optout_click_url&&data.privacy.optout_image_url){var privacyLink=sublime.document.createElement('a');privacyLink.id='sublime-ad-privacy-link';privacyLink.href=data.privacy.optout_click_url;privacyLink.classList.add('sublime-ad-privacy-link');privacyLink.style.marginTop=(ad.top*-1)+"px";privacyLink.target="_blank";privacyLink.innerHTML='<img src="'+data.privacy.optout_image_url+'">';privacyLink.style.right=sideWidth+"px";sublime.document.body.insertBefore(privacyLink,sublime.document.body.firstChild);}
for(position in wings){if(!wings.hasOwnProperty(position)){continue;}
wings[position]=sublime.document.createElement('div');wings[position].id="sublime-ad-shop-"+position;wings[position].style.width=gutterWidth+"px";sublime.document.body.insertBefore(wings[position],sublime.document.body.firstChild);if(data.prependWings&&data.prependWings[position]){wings[position].innerHTML=data.prependWings[position];wings[position].style.display='inline-block';}}
if(data.repeatProducts){data.repeatProducts=sublime.pInt(data.repeatProducts);var repeat=Math.ceil(data.repeatProducts / data.products.length);var products=[];for(i=0;i<repeat;i++){products=products.concat(data.products);}
data.products=products.slice(0,data.repeatProducts);}
for(i=0;i<data.products.length;i++){var product=data.products[i],target=i%2?'right':'left',itemUrl=sublime.display.getFinalClickUrl(ad,product.url),itemHTML='<div class="sublime-ad-item">'+'<a href="'+itemUrl+'" title="'+product.name+'" target="_blank">'+'<img class="sublime-ad-item-image" src="'+product.image+'" />'+'<div class="sublime-ad-item-name">'+product.name+'</div>';if(data.showPrice){itemHTML+='<div class="sublime-ad-item-price-container">';if(product.logo){itemHTML+='<img src="'+product.logo+'" class="sublime-ad-item-logo" />';}
if(product.price){if(product.price.match(/[£€$]/)){data.showCurrency=false;}
itemHTML+='<span class="sublime-ad-item-price">'+
product.price+
(data.showCurrency?'&euro;':'')+'</span>';}
if(product.discount_price){itemHTML+='<div class="sublime-ad-item-discount_price">'+product.discount_price+'</div>';}
if(product.discount){itemHTML+='<div class="sublime-ad-item-discount">'+product.discount+'</div>';}
itemHTML+='</div>';}
wings[target].innerHTML+=itemHTML;wings[target].style.display='inline-block';}
for(position in wings){if(!wings.hasOwnProperty(position)){continue;}
if(data.appendWings&&data.appendWings[position]){wings[position].innerHTML=data.appendWings[position];wings[position].style.display='inline-block';}}
adjustWings(wings,siteWidth);var resizeCallback=debounce(function(){adjustWings(wings,siteWidth);},10,true);sublime.window.addEventListener('resize',resizeCallback,false);sublime.hook.register('event.cleanUp',function clearEventListener(){sublime.window.removeEventListener('resize',resizeCallback,false);});};function adjustWings(wings,siteWidth){var sideWidth=Math.ceil((sublime.document.documentElement.clientWidth-siteWidth)/ 2);wings.left.style.left=sideWidth+"px";wings.right.style.right=sideWidth+"px";};sublime.helpers.createNamespace('sublime.display.mobile');sublime.display.mobile.adIsReady=function(ad){switch(ad.creative_type){case'mobile toproll classic':ad.placementType='toproll';return topRollAdIsReady(ad);case'mobile m-skinz2 video':return sublime.display.mobile.panel2.mskinzVideo.adIsReady(ad);case'mobile m-skinz2 video simple':return sublime.display.mobile.panel2.mskinzSimple.adIsReady(ad);case'mobile m-skinz2':case'mobile m-skinz2-a':case'mobile m-skinz2 classic':case'mobile m-skinz2 capsule':case'mobile m-skinz2 video celtra':case'mobile m-skinz2 duo':case'mobile m-skinz2 sliding':case'mobile m-skinz2 story':case'mobile m-skinz2 swapping':case'mobile m-skinz2 travelling':case'mobile m-skinz2 vertical video':case'mobile m-skinz2 wipeable':case'mobile m-skinz2 plus':case'mobile m-skinz2 swipetosite':return sublime.display.mobile.panel2.mskinz.adIsReady(ad);case'mobile kargo sticky':ad.placementType='bottom';return sublime.display.mobile.kargo.adIsReady(ad);case'mobile m-skinz video':return sublime.display.mobile.panel.mskinzVideo.adIsReady(ad);default:return sublime.display.mobile.panel.mskinz.adIsReady(ad);}};sublime.display.mobile.render=function(ad){applyOrientationClass();if(!sublime.display.mobile.isPortrait()){return;}
checkViewPortMeta();addOrientationEvents();if(ad.vpaid&&(ad.creative_type!=='mobile toproll classic')){log.info('VPAID > AdUnit provided by '+(ad.vpaid.provider||ad.vpaid.mediaFile));var player={};var adWithoutVideo=merge(ad,{mobile_setup:{top:{video:null}}});var displayClass=ad.isExternal?sublime.display.mobile.panel2.mskinzSimple:sublime.display.mobile.panel2.mskinzVideo;displayClass.render(adWithoutVideo).then(function(mskinzPlayer){return new sublime.Promise(function(resolve,reject){sublime.hook.register({namespace:sublime.display.mobile.panel2.mskinzVideo._hookNames.topImageLoaded,callback:function(){ad.vpaid.config={width:sublime.window.innerWidth,height:sublime.display.mobile.panel2.mskinzVideo._top.getMediaHeight(),viewMode:'normal',bitrate:100000,};if(sublime.display.mobile.panel2.mskinzVideo.videoSize){ad.vpaid.config.width=sublime.display.mobile.panel2.mskinzVideo.videoSize.top.width;ad.vpaid.config.height=sublime.display.mobile.panel2.mskinzVideo.videoSize.top.height;}
player=mskinzPlayer;try{resolve(sublime.vpaid.render(ad.vpaid,player));}catch(error){reject(error);}},once:true});});}).then(function(vpaidWrapper){sublime.hook.call('step.impression.before');if(ad.vpaid&&ad.vpaid.provider){sublime.vpaid.addExtraCss(ad.vpaid.provider);}
sublime.hook.register({namespace:sublime.vpaid.hookNames.adStopped,callback:function(){log.info("Reload video.");if(!ad.isExternal){sublime.vpaid.clean(player.container);vpaidWrapper.isDeleted=true;var ayadsVideo=player.video;ayadsVideo.src=ad.mobile_setup.top.video;ayadsVideo.loop=true;sublime.display.mobile.panel2.mskinzVideo._playVideo();}}});sublime.hook.register({namespace:sublime.display.mobile.panel2.mskinzVideo._hookNames.clickMuteBtn,callback:function(isMuted){var volume=isMuted?0:1;vpaidWrapper.setAdVolume(volume);}});vpaidWrapper.on('AdRemainingTimeChange',function(){var duration=vpaidWrapper.creative.getAdDuration();var remainingTime=vpaidWrapper.creative.getAdRemainingTime();var percentage=100*(duration-remainingTime)/ duration;var progressBar=sublime.document.querySelector('.sublime-mobile-loading-bar-progress');progressBar.style.width=percentage+'%';});sublime.hook.call('step.impression.after');});return;}
switch(ad.creative_type){case'mobile toproll classic':return topRollRender(ad,sublime.window);case'mobile m-skinz2 video':return sublime.display.mobile.panel2.mskinzVideo.render(ad);case'mobile m-skinz2 video simple':return sublime.display.mobile.panel2.mskinzSimple.render(ad);case'mobile m-skinz2':case'mobile m-skinz2-a':case'mobile m-skinz2 classic':case'mobile m-skinz2 capsule':case'mobile m-skinz2 video celtra':case'mobile m-skinz2 duo':case'mobile m-skinz2 sliding':case'mobile m-skinz2 story':case'mobile m-skinz2 swapping':case'mobile m-skinz2 travelling':case'mobile m-skinz2 vertical video':case'mobile m-skinz2 wipeable':case'mobile m-skinz2 plus':case'mobile m-skinz2 swipetosite':return sublime.display.mobile.panel2.mskinz.render(ad);case'mobile kargo sticky':return sublime.display.mobile.kargo.render(ad);case'mobile m-skinz video':return sublime.display.mobile.panel.mskinzVideo.render(ad);case'mobile m-skinz shop':return sublime.display.mobile.panel.mskinzShop.render(ad);default:return sublime.display.mobile.panel.mskinz.render(ad);}};function addOrientationEvents(){sublime.window.addEventListener('orientationchange',applyOrientationClass);sublime.window.addEventListener('resize',applyOrientationClass);sublime.hook.register('event.cleanUp',function clearEventListeners(){sublime.window.removeEventListener('orientationchange',applyOrientationClass);sublime.window.removeEventListener('resize',applyOrientationClass);});}
function checkViewPortMeta(){var viewport=sublime.document.querySelector('meta[name="viewport"]');if(!viewport){viewport=sublime.document.createElement('meta');viewport.id='sublime-viewport';viewport.name='viewport';sublime.document.querySelector('head').appendChild(viewport);}
viewport.content='width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0';}
function getOrientation(){return(sublime.window.innerHeight<sublime.window.innerWidth)?'landscape':'portrait';}
function applyOrientationClass(){sublime.document.body.classList.remove('sublime-portrait','sublime-landscape');sublime.document.body.classList.add('sublime-'+getOrientation());sublime.hook.call('event.mobile.orientationChange');}
sublime.display.mobile.isPortrait=function(){return getOrientation()==='portrait';};const START_PLAYBACK_POSITION=0;const END_PLAYBACK_POSITION=1;function range(value,min,max){min=Number(min)||0;max=Number(max)||0;let n=parseFloat(value);if(Number.isNaN(n)){n=min;}
if(String(value).slice(-1)==='%'){n=n / 100;}
return Math.min(Math.max(n,min),max);}
function videoProgress(video){return video.currentTime / video.duration;}
function normalizeTrackActions(actions){return Object.keys(actions).map(function(key){return{time:range(key,START_PLAYBACK_POSITION,END_PLAYBACK_POSITION),callback:actions[key]};}).filter(function(obj){return typeof obj.callback==='function';}).sort(function(a,b){return a.time>b.time?1:-1;});}
function trackVideoPlayback(video,trackActions,loop){let actions=normalizeTrackActions(trackActions);let prev=START_PLAYBACK_POSITION;function trigger(now){while(actions[0]&&now>=actions[0].time){const action=actions.shift();action.callback.call(null,now);}}
function onTimeUpdate(){const now=videoProgress(video);if(prev>now){if(actions.length>0){trigger(END_PLAYBACK_POSITION);}
if(loop){actions=normalizeTrackActions(trackActions);}}else{trigger(now);}
prev=now;}
video.addEventListener('timeupdate',onTimeUpdate);}
const VIDEO_QUARTILES_NAMES=['start','firstQuartile','midPoint','thirdQuartile','complete',];const VIDEO_QUARTILES=[];const pixelsVideo={videoQ0:{inherit:'_videoQuartile',qs:{e:'q0'},addBrowserDimensions:true,addPageHeightDimension:true,},videoQ1:{inherit:'_videoQuartile',qs:{e:'q1'},addBrowserDimensions:true,addPageHeightDimension:true,},videoQ2:{inherit:'_videoQuartile',qs:{e:'q2'},addBrowserDimensions:true,addPageHeightDimension:true,},videoQ3:{inherit:'_videoQuartile',qs:{e:'q3'},addBrowserDimensions:true,addPageHeightDimension:true,},videoQ4:{inherit:'_videoQuartile',qs:{e:'q4'},addBrowserDimensions:true,addPageHeightDimension:true,},complete:{inherit:'_commonSkinz',qs:{e:'complete'}},mute:{inherit:'_commonSkinz',qs:{e:'mute'}},unmute:{inherit:'_commonSkinz',qs:{e:'unmute'}},rewind:{inherit:'_commonSkinz',qs:{e:'rewind'}},pause:{inherit:'_commonSkinz',qs:{e:'pause'}},resume:{inherit:'_commonSkinz',qs:{e:'resume'}},creativeView:{inherit:'_commonSkinz',qs:{e:'creativeView'}},videoStartedLoading:{inherit:'_commonSkinz',qs:{e:'vsl'}},videoCanplaythrough:{inherit:'_commonSkinz',qs:{e:'dicpt'}},videoLoadeddata:{inherit:'_commonSkinz',qs:{e:'dild'}},videoPlaying:{inherit:'_commonSkinz',qs:{e:'dip'}},};function registerVideoPixels(){window.sublime.analytics.setPixels(347,pixelsVideo);}
function registerVideoHooks(){if(VIDEO_QUARTILES.length>0){return;}
VIDEO_QUARTILES_NAMES.forEach(function init(name,quartile){const hook=window.sublime.hook;const analytics=window.sublime.analytics;const namespace='step.video.quartile'+quartile;hook.register(namespace,function registerHooks(){analytics.fire(347,'videoQ'+quartile);});VIDEO_QUARTILES.push({name:name,namespace:namespace});});}
function setUpVideoQuartiles(video){const hook=window.sublime.hook;registerVideoHooks();trackVideoPlayback(video,VIDEO_QUARTILES.reduce(function makeTrackers(trackers,info,quartile){const name=info.name;const namespace=info.namespace;trackers[quartile / 4]=function cb(){hook.call(namespace,{duration:video.duration,currentTime:video.currentTime,quartile:quartile,quartileName:name,});};return trackers;},{}));}
function setupSrcRemovalBypass(video){video.removeAttribute=function gatedRemoveAttribute(attrName){if(attrName==='src'){log.info('Bypassing attempt remove the src attribute on video element');video.load=function fakeLoad(){delete video.removeAttribute;delete video.load;log.info('Bypass logic was removed');};return;}
window.HTMLVideoElement.prototype.removeAttribute.call(this,attrName);};}
function SublimeCountdown(frame,data){this.frame=frame;this.durationDefault=data.duration||SublimeCountdown.COUNTDOWN_DURATION_DEFAULT;this.duration=this.durationDefault;this.callbacks=data.callbacks;this.lastTime=Date.now();this.timerState=true;}
SublimeCountdown.COUNTDOWN_DURATION_DEFAULT=3;SublimeCountdown.prototype.setTimerState=function SublimeCountdownTimerState(state){this.timerState=state;};SublimeCountdown.prototype.setDuration=function SublimeCountdownSetDuration(duration){this.duration=duration;};SublimeCountdown.prototype.resetTimer=function SublimeCountdownResetTimer(){this.setDuration(this.durationDefault);};SublimeCountdown.prototype.startTimer=function SublimeCountdownStartTimer(){const currentTime=Date.now();if(this.duration===this.durationDefault){if(this.callbacks.start){this.callbacks.start();}}
if(currentTime-this.lastTime>=1000&&this.timerState){if(this.callbacks.update){this.callbacks.update(this.duration);}
this.lastTime=currentTime;this.duration-=1;}
if(this.duration>=0){this.frame.requestAnimationFrame(this.startTimer.bind(this));return;}
if(this.callbacks.end){this.callbacks.end();}};function setSetupZone(){const hook=window.sublime.hook;const helpers=window.sublime.helpers;const device=window.sublime.device;const applyJs=window.sublime.applyJs;const zone=window.sublime.env('zone');hook.call('step.setupZoneAd.before');if(device==='mobile'){if(zone.mobilecss){helpers.addCss(zone.mobilecss);}
if(zone.mobilejs){applyJs(zone.mobilejs);}}
hook.call('step.setupZoneAd.after');}
const VIDEO_RATIO_DEFAULT=9 / 16;const CONTAINER_RATIO_MAX=32 / 100;function topRollVideoHeightBoundaries(context){const container=context.frame;const isLandscape=container.innerWidth>container.innerHeight;if(isLandscape){return{optimal:container.innerHeight / 4,min:container.innerHeight / 8,max:container.innerHeight,};}
const root=container.document.documentElement;const width=Math.max(root.clientWidth,container.innerWidth);const heightMax=Math.max(root.clientHeight,container.innerHeight)*CONTAINER_RATIO_MAX;const videoWidth=context.nodes.video.videoWidth;const videoHeight=context.nodes.video.videoHeight;const videoRatio=(videoHeight / videoWidth)||VIDEO_RATIO_DEFAULT;const heightOptimal=width*videoRatio;const height=Math.min(heightOptimal,heightMax);return{optimal:height,min:height / 2,max:container.innerHeight,};}
function topRollVideoSize(context){const viewport={width:context.frame.innerWidth,height:context.frame.innerHeight,};const videoRatio=(context.nodes.video.videoHeight / context.nodes.video.videoWidth)||VIDEO_RATIO_DEFAULT;const height=viewport.width*videoRatio;if(viewport.height>viewport.width&&context.nodes.video.videoWidth>context.nodes.video.videoHeight&&height>viewport.height*CONTAINER_RATIO_MAX){return{width:Math.floor((viewport.height*CONTAINER_RATIO_MAX)/ videoRatio),height:Math.floor(viewport.height*CONTAINER_RATIO_MAX),};}
if(height>viewport.height){return{width:Math.floor(viewport.height / videoRatio),height:Math.floor(viewport.height),};}
return{width:Math.floor(viewport.width),height:Math.floor(height),};}
const adjustVideoSize=function adjustVideoSize(context){const video=context.nodes.video;const videoWrapper=context.nodes.videoWrapper;const videoBackground=context.nodes.videoBackground;const ctaButton=context.nodes.ctaButton;const closeButton=context.nodes.closeButton;const collapseButton=context.nodes.collapseButton;const minVideoHeight=topRollVideoHeightBoundaries(context).min;const isClosed=videoWrapper.classList.contains('sublime--inline');const maxScrollShift=Math.min(context.frame.scrollY,isClosed?videoWrapper.clientHeight:videoWrapper.clientHeight-minVideoHeight);const videoPosition={scale:Math.min(videoWrapper.clientWidth / parseFloat(video.style.width),(videoWrapper.clientHeight-maxScrollShift)/ video.clientHeight),x:(videoWrapper.clientWidth-video.clientWidth)/ 2,y:Math.ceil((maxScrollShift+videoWrapper.clientHeight-video.clientHeight)/ 2),};const widthScaleDifferenceBetweenWrapperAndVideo=(videoWrapper.clientWidth / video.clientWidth-1)*2;const backgroundPosition={scale:(2+widthScaleDifferenceBetweenWrapperAndVideo)*Math.max(1,(videoWrapper.clientHeight-maxScrollShift)/ video.clientHeight),x:videoPosition.x+videoBackground.width / 2,y:videoPosition.y+videoBackground.height / 2,};const ctaPosition={x:videoPosition.x+(video.clientWidth-ctaButton.clientWidth)/ 2,y:-0.15*(videoWrapper.clientHeight-maxScrollShift),};video.style.transform='translate('
+videoPosition.x+'px, '
+videoPosition.y+'px) scale('
+videoPosition.scale+')';videoBackground.style.transform='translate('
+backgroundPosition.x+'px, '
+backgroundPosition.y+'px) scale('
+backgroundPosition.scale+')';videoWrapper.style.clipPath='inset('+maxScrollShift+'px 0 0 0)';videoWrapper.style.transform='translateY(-'+maxScrollShift+'px)';closeButton.style.transform='translateY('+maxScrollShift+'px)';collapseButton.style.transform='translateY('+maxScrollShift+'px)';ctaButton.style.transform='translate('
+ctaPosition.x+'px, '
+ctaPosition.y+'px)';};const setVideoSize=function setVideoSize(context){const size=topRollVideoSize(context);const frame=context.frame;const video=context.nodes.video;const container=context.nodes.container;container.style.height=frame.innerHeight+'px';video.style.width=size.width+'px';video.style.height=size.height+'px';adjustVideoSize(context);};function topRollNormalizeData(ad){const macros=window.sublime.macros;const display=window.sublime.display;const vpaid=window.sublime.vpaid;const merge=window.sublime.merge;let htmlData;let targetUrlData;let typeData;let videoData;let vpaidData;try{if(ad.creative_type==='mobile toproll classic'){typeData='mobile';}else if(ad.creative_type==='video toproll classic'){typeData='desktop';}
if(typeData==='mobile'){videoData=ad.mobile_setup.top.video;}else if(typeData==='desktop'){videoData=ad.videos.top;}
if(ad.vpaid){vpaidData=merge({config:vpaid.defaultInitAdParams,},ad.vpaid);}
htmlData=macros.replace(ad.html||'',ad);targetUrlData=display.getFinalClickUrl(ad);}catch(e){htmlData=undefined;targetUrlData=undefined;typeData=undefined;videoData=undefined;vpaidData=undefined;}
return{html:htmlData,targetUrl:targetUrlData,type:typeData,video:videoData,vpaid:vpaidData,};}
function topRollBuildDOMTree(frame){const doc=frame.document;const sublimeContainer=doc.createElement('div');sublimeContainer.id='sublime-container';const wrapper=doc.createElement('div');wrapper.id='sublime-video-wrapper';const videoBackground=doc.createElement('canvas');videoBackground.id='sublime-video-background';const video=doc.createElement('video');video.id='sublime-video';['muted','autoplay','playsinline'].forEach(function setupAttributes(attributeName){video.setAttribute(attributeName,'');video[attributeName]=true;});setupSrcRemovalBypass(video);const videoOverlay=doc.createElement('div');videoOverlay.id='sublime-video-overlay';const soundButton=doc.createElement('span');soundButton.id='sublime-ui-sound';soundButton.className='sublime--icon sublime--bottom sublime--left sublime--muted';soundButton.setAttribute('role','button');const touchscroll=doc.createElement('span');touchscroll.id='sublime-ui-touchscroll';touchscroll.className='sublime--bottom sublime--left';const closeButton=doc.createElement('span');closeButton.id='sublime-ui-close';closeButton.className='sublime--icon sublime--top sublime--right sublime--hide';closeButton.setAttribute('role','button');const ctaButton=doc.createElement('span');ctaButton.id='sublime-ui-cta';ctaButton.setAttribute('role','button');ctaButton.innerText=i18n('topRollCTA');const collapseButton=doc.createElement('span');collapseButton.id='sublime-ui-collapse';collapseButton.className='sublime--icon sublime--top sublime--right';collapseButton.setAttribute('role','button');const replayButton=doc.createElement('span');replayButton.id='sublime-ui-replay';replayButton.className='sublime--icon sublime--bottom sublime--left';replayButton.setAttribute('role','button');sublimeContainer.appendChild(wrapper);wrapper.appendChild(videoBackground);wrapper.appendChild(video);wrapper.appendChild(videoOverlay);videoOverlay.appendChild(soundButton);videoOverlay.appendChild(closeButton);videoOverlay.appendChild(ctaButton);videoOverlay.appendChild(collapseButton);videoOverlay.appendChild(replayButton);videoOverlay.appendChild(touchscroll);return{container:sublimeContainer,videoWrapper:wrapper,video:video,videoBackground:videoBackground,videoOverlay:videoOverlay,soundButton:soundButton,closeButton:closeButton,ctaButton:ctaButton,collapseButton:collapseButton,replayButton:replayButton,};}
const TOPROLL_STATE_VIDEO_EXPAND='expand';const TOPROLL_STATE_VIDEO_EXPAND_TRANSITION='expand-transition';const TOPROLL_STATE_VIDEO_FULL='full';const TOPROLL_STATE_VIDEO_BANNER='banner';const TOPROLL_STATE_VIDEO_STICKY='sticky';const TOPROLL_STATE_VIDEO_STICKY_CLOSEABLE='sticky-closeable';let topRollState;let topRollPreviousState;function getTopRollState(context){const frame=context.frame;const height=topRollVideoHeightBoundaries(context);let state;if(frame.scrollY<=0){state=TOPROLL_STATE_VIDEO_EXPAND;}else if(frame.scrollY<Math.floor(height.max-height.optimal)){state=TOPROLL_STATE_VIDEO_EXPAND_TRANSITION;}else if(frame.scrollY===Math.floor(height.max-height.optimal)){state=TOPROLL_STATE_VIDEO_FULL;}else if(frame.scrollY>Math.floor(height.max-height.optimal)&&frame.scrollY<=(height.max-height.min)){state=TOPROLL_STATE_VIDEO_BANNER;}else if(frame.scrollY>=frame.innerHeight){state=TOPROLL_STATE_VIDEO_STICKY_CLOSEABLE;}else if(frame.scrollY>(height.max-height.min)){state=TOPROLL_STATE_VIDEO_STICKY;}
return state;}
function setTopRollState(context,state,event){if(event){event.stopPropagation();}
const currentState=getTopRollState(context);if(state===currentState){return;}
const frame=context.frame;const height=topRollVideoHeightBoundaries(context);switch(state){case TOPROLL_STATE_VIDEO_EXPAND:context.scrollY=frame.scrollY;frame.scrollTo(0,0);break;case TOPROLL_STATE_VIDEO_EXPAND_TRANSITION:case TOPROLL_STATE_VIDEO_FULL:frame.scrollTo(0,Math.floor(height.max-height.optimal));break;case TOPROLL_STATE_VIDEO_BANNER:frame.scrollTo(0,height.max-height.min);break;case TOPROLL_STATE_VIDEO_STICKY:case TOPROLL_STATE_VIDEO_STICKY_CLOSEABLE:if(typeof context.scrollY!=='number'){return;}
frame.scrollTo(0,context.scrollY);break;default:log.warn('Unknown state: '+state+'; '
+'valid states are: '
+[TOPROLL_STATE_VIDEO_EXPAND,TOPROLL_STATE_VIDEO_FULL,TOPROLL_STATE_VIDEO_BANNER,TOPROLL_STATE_VIDEO_STICKY,TOPROLL_STATE_VIDEO_STICKY_CLOSEABLE,].join(', '));}}
function goToPreviousTopRollState(context,event){if(event){event.stopPropagation();}
if(topRollPreviousState!==topRollState){setTopRollState(context,topRollPreviousState,event);}}
function publishTopRollStateChange(previousState,newState,context){context.frame.document.body.classList.toggle('sublime-toproll-expand',newState===TOPROLL_STATE_VIDEO_EXPAND);context.frame.document.body.classList.toggle('sublime-toproll-expand-transition',newState===TOPROLL_STATE_VIDEO_EXPAND_TRANSITION);context.frame.document.body.classList.toggle('sublime-toproll-full',newState===TOPROLL_STATE_VIDEO_FULL);context.frame.document.body.classList.toggle('sublime-toproll-banner',newState===TOPROLL_STATE_VIDEO_BANNER);context.frame.document.body.classList.toggle('sublime-toproll-sticky',newState===TOPROLL_STATE_VIDEO_STICKY);context.frame.document.body.classList.toggle('sublime-toproll-sticky-closeable',newState===TOPROLL_STATE_VIDEO_STICKY_CLOSEABLE);}
function topRollStateListener(context){const state=getTopRollState(context);if(state===topRollState){return;}
topRollPreviousState=topRollState;topRollState=state;publishTopRollStateChange(topRollPreviousState,topRollState,context);}
function topRollGlobalSublimeAPI(context){context.frame.sublime.setTopRollState=setTopRollState.bind(context.frame,context);return context;}
function topRollVPAID(context){const vpaid=window.sublime.vpaid;const nodes=context.nodes;const data=context.data;if(data.vpaid){data.vpaid.config.width=nodes.videoWrapper.clientWidth;data.vpaid.config.height=nodes.videoWrapper.clientHeight;return vpaid.render(data.vpaid,nodes).then(function vpaidRendered(vpaidWrapper){context.vpaidWrapper=vpaidWrapper;vpaid.addExtraCss(data.vpaid.provider);context.adjustVideoSize();return context;});}
return window.sublime.Promise.resolve(context);}
const COUNTDOWN_DURATION=SublimeCountdown.COUNTDOWN_DURATION_DEFAULT;function startNewCountdown(context){const frame=context.frame;const nodes=context.nodes;const closeButton=nodes.closeButton;const datas={duration:COUNTDOWN_DURATION,callbacks:{start:function startNewCountdownCallbackStart(){closeButton.classList.remove('sublime--icon-cross');},update:function startNewCountdownCallbackUpdate(val){closeButton.innerHTML=val;},end:function startNewCountdownCallbackEnd(){closeButton.innerHTML='';closeButton.classList.add('sublime--icon-cross');},},};return new SublimeCountdown(frame,datas);}
function createClickEventButtonClose(context){const nodes=context.nodes;const closeButton=nodes.closeButton;const videoWrapper=nodes.videoWrapper;closeButton.addEventListener('click',function initButtonCloseClickCallback(e){e.preventDefault();e.stopPropagation();const closeButtonIsVisible=!closeButton.classList.contains('sublime--hide');if(closeButton.classList.contains('sublime--icon-cross')&&closeButtonIsVisible){videoWrapper.classList.add('sublime--inline');closeButton.classList.toggle('sublime--hide');adjustVideoSize(context);}});}
function scrollCallback(context,data){const nodes=context.nodes;const closeButton=nodes.closeButton;const videoWrapper=nodes.videoWrapper;if(nodes.video.currentTime===0){return;}
const state=getTopRollState(context);const stickyIsCloseable=state===TOPROLL_STATE_VIDEO_STICKY_CLOSEABLE;data.topRollCountdown.setTimerState(stickyIsCloseable);const isInline=videoWrapper.classList.contains('sublime--inline');if(isInline){return;}
const closeButtonHasHide=closeButton.classList.contains('sublime--hide');if(closeButtonHasHide&&stickyIsCloseable){data.topRollCountdown.startTimer();}
if(nodes.video.ended){data.topRollCountdown.setDuration(0);}
closeButton.classList.toggle('sublime--hide',!stickyIsCloseable);}
function topRollBindEventCloseButton(context){const frame=context.frame;const nodes=context.nodes;createClickEventButtonClose(context);const topRollCountdown=startNewCountdown(context);topRollCountdown.setTimerState(false);topRollCountdown.startTimer();frame.addEventListener('scroll',throttle(scrollCallback.bind(null,context,{topRollCountdown:topRollCountdown,})));frame.addEventListener('resize',scrollCallback.bind(null,context,{topRollCountdown:topRollCountdown,}));nodes.video.addEventListener('timeupdate',function timeupdateListener(){if(nodes.video.ended){topRollCountdown.duration=0;}
if(nodes.video.currentTime>0){const state=getTopRollState(context);topRollCountdown.setTimerState(state===TOPROLL_STATE_VIDEO_STICKY_CLOSEABLE);}});}
function topRollBindEventCanvas(context){const nodes=context.nodes;const video=nodes.video;const videoBackground=nodes.videoBackground;videoBackground.width=video.clientWidth / 2;videoBackground.height=video.clientHeight / 2;videoBackground.getContext('2d').drawImage(video,0,0,video.clientWidth / 2,video.clientHeight / 2);context.frame.requestAnimationFrame(topRollBindEventCanvas.bind(null,context));}
function topRollToggleSound(context,force){const video=context.nodes.video;let soundShouldBeOn;if(arguments.length>1){soundShouldBeOn=force;}else if(context.vpaidWrapper){soundShouldBeOn=!context.vpaidWrapper.getAdVolume();}else{soundShouldBeOn=video.muted;}
if(context.vpaidWrapper){context.vpaidWrapper.setAdVolume(+soundShouldBeOn);}
video.muted=!soundShouldBeOn;return soundShouldBeOn;}
function topRollBindEventForSound(context){const video=context.nodes.video;const container=context.frame;const wrapper=context.nodes.videoWrapper;let isSoundOn=false;function toggleSoundOnScroll(){if(!isSoundOn&&container.scrollY===0&&video.dataset.userAction==='click'){isSoundOn=topRollToggleSound(context,true);}
if(isSoundOn&&container.scrollY>0){isSoundOn=topRollToggleSound(context,false);}}
container.addEventListener('scroll',throttle(toggleSoundOnScroll));wrapper.addEventListener('click',function toggleSoundOnClick(event){event.stopPropagation();video.dataset.userAction='click';if(container.scrollY===0){isSoundOn=topRollToggleSound(context);}});}
function topRollBindEventForSoundUI(context){const nodes=context.nodes;const video=nodes.video;const soundIcon=nodes.soundButton;video.addEventListener('volumechange',function updateSoundUI(){soundIcon.classList.toggle('sublime--muted',video.muted);});}
function topRollBindReplayVideo(context){const nodes=context.nodes;const video=nodes.video;const playPromise=video.play()||window.sublime.Promise.resolve();playPromise.catch(function replayError(error){log.log('Replay failed',error);});}
function topRollBindLoadedmetadataVideo(context){const frame=context.frame;setVideoSize(context);const stateAfterLoadMetadata=getTopRollState(context);if(stateAfterLoadMetadata===TOPROLL_STATE_VIDEO_FULL||stateAfterLoadMetadata===TOPROLL_STATE_VIDEO_EXPAND_TRANSITION){const height=topRollVideoHeightBoundaries(context);frame.scrollTo(0,height.max-height.optimal);}}
function topRollBindFocusVideo(context){const frame=context.frame;const nodes=context.nodes;const video=nodes.video;const videoWrapper=nodes.videoWrapper;const height=topRollVideoHeightBoundaries(context);const videoBottomRect=nodes.container.getBoundingClientRect().bottom;const sublimeInline=videoWrapper.classList.contains('sublime--inline');const isPlaying=video.currentTime>0&&!video.paused&&!video.ended&&video.readyState>video.HAVE_CURRENT_DATA;const hasPlayed=video.currentTime>0&&video.paused&&!video.ended;const isDocumentHidden=frame.document.hidden;const isVideoHalfHidden=videoBottomRect<=(height.min / 2);const shouldBePaused=isDocumentHidden||(isVideoHalfHidden&&sublimeInline);if(shouldBePaused&&isPlaying){video.pause();}else if(hasPlayed&&!shouldBePaused){video.play();}}
function topRollBindEventCallToAction(context,event){event.stopPropagation();const frame=context.frame;const data=context.data;window.sublime.analytics.fire(347,'click');frame.open(data.targetUrl);}
function topRollBindEventCallToActionOverlay(context,event){const nodes=context.nodes;const video=nodes.video;if(!video.ended){return;}
const state=getTopRollState(context);if(state===TOPROLL_STATE_VIDEO_EXPAND||state===TOPROLL_STATE_VIDEO_FULL||state===TOPROLL_STATE_VIDEO_EXPAND_TRANSITION){topRollBindEventCallToAction(context,event);}}
function setQuartileClassname(node,indexQuartile){VIDEO_QUARTILES_NAMES.forEach(function initEachVideoQuartiles(quartile,index){node.classList.toggle('sublime--video-'+quartile,index===indexQuartile);});}
function topRollSetUpEvents(context){const frame=context.frame;const body=frame.document.body;const nodes=context.nodes;frame.addEventListener('scroll',throttle(topRollStateListener.bind(null,context)));frame.addEventListener('scroll',throttle(adjustVideoSize.bind(null,context)));frame.addEventListener('resize',throttle(setVideoSize.bind(null,context)));frame.addEventListener('orientationchange',setVideoSize.bind(null,context));nodes.ctaButton.addEventListener('click',topRollBindEventCallToAction.bind(null,context));nodes.videoOverlay.addEventListener('click',topRollBindEventCallToActionOverlay.bind(null,context));nodes.collapseButton.addEventListener('click',goToPreviousTopRollState.bind(null,context));nodes.videoWrapper.addEventListener('click',setTopRollState.bind(null,context,TOPROLL_STATE_VIDEO_EXPAND));topRollBindEventForSoundUI(context);topRollBindEventForSound(context);topRollBindEventCloseButton(context);nodes.video.addEventListener('loadedmetadata',topRollBindLoadedmetadataVideo.bind(null,context));nodes.video.addEventListener('play',topRollBindEventCanvas.bind(context.frame,context));nodes.video.addEventListener('play',function removeClassLoadingOnPlayEvent(){body.classList.remove('sublime-toproll-loading');});nodes.video.addEventListener('play',adjustVideoSize.bind(null,context));nodes.video.addEventListener('ended',adjustVideoSize.bind(null,context));trackVideoPlayback(nodes.video,{'0%':setQuartileClassname.bind(null,body,0),'25%':setQuartileClassname.bind(null,body,1),'50%':setQuartileClassname.bind(null,body,2),'75%':setQuartileClassname.bind(null,body,3),'100%':setQuartileClassname.bind(null,body,4),},true);nodes.replayButton.addEventListener('click',topRollBindReplayVideo.bind(null,context));frame.addEventListener('visibilitychange',topRollBindFocusVideo.bind(null,context));frame.addEventListener('scroll',throttle(topRollBindFocusVideo.bind(null,context)));return context;}
function topRollInit(context){const addCss=window.sublime.helpers.addCss;const env=window.sublime.env;const writeAndEvalScripts=window.sublime.writeAndEvalScripts;const data=context.data;const container=context.frame;const nodes=context.nodes;const doc=context.frame.document;doc.body.classList.add('sublime-toproll');doc.body.classList.add('sublime-toproll-loading');doc.body.insertBefore(nodes.container,doc.body.firstChild);addCss(env('css')['toproll']);setVideoSize(context);topRollStateListener(context);const state=getTopRollState(context);if(state===TOPROLL_STATE_VIDEO_EXPAND){setTopRollState(context,TOPROLL_STATE_VIDEO_FULL);}
if(data.html){writeAndEvalScripts(container,data.html);}
if(!data.vpaid){nodes.video.setAttribute('src',data.video);}
return context;}
function topRollAdIsReady(ad){const isUrl=window.sublime.isUrl;const hasProperty=window.sublime.helpers.hasProperty;const mobile=ad.creative_type==='mobile toproll classic'&&hasProperty(ad,'mobile_setup.top.video')&&isUrl(ad.mobile_setup.top.video);const desktop=ad.creative_type==='video toproll classic'&&hasProperty(ad,'videos.top')&&isUrl(ad.videos.top);return isUrl(ad.originalUrl)&&(mobile||desktop);}
function topRoll(frame,nodes,data){const context={frame:frame,nodes:nodes,data:data,scrollY:undefined,};return window.sublime.Promise.resolve(context);}
function topRollRender(ad,frame){const hook=window.sublime.hook;const nodes=topRollBuildDOMTree(frame);const data=topRollNormalizeData(ad);registerVideoPixels();if(!data.vpaid){setUpVideoQuartiles(nodes.video);}
setSetupZone();hook.call('step.impression.before');return topRoll(frame,nodes,data).then(topRollGlobalSublimeAPI).then(topRollSetUpEvents).then(topRollInit).then(topRollVPAID).then(function hookImpressionAfter(context){hook.call('step.impression.after');return context;});}
sublime.helpers.createNamespace('sublime.display.mobile.panel2');var mskinzHookNames={topCloseButtonClicked:'event.mobile.topCloseButtonClicked',topAutoHide:'event.mobile.topAutoHide',beforeClosePanel:'event.mobile.beforeClosePanel',afterClosePanel:'event.mobile.afterClosePanel',beforeOpenPanel:'event.mobile.beforeOpenPanel',afterOpenPanel:'event.mobile.afterOpenPanel',swipeToPanel:'event.mobile.swipeToPanel',swipeToMainPage:'event.mobile.swipeToMainPage',orientationChange:'event.mobile.orientationChange',arrowReady:'step.mobile.arrowReady',swiperCreated:'event.mobile.swiperCreated',topImageLoaded:'event.mobile.topImageLoaded',swiperTouchStart:'event.mobile.swiperTouchStart',swiperTouchCancel:'event.mobile.swiperTouchCancel',bottomReady:'step.mobile.bottomReady',closePanel:'event.mobile.closePanel',openPanel:'event.mobile.openPanel',click:'event.mobile.click',clickTop:'event.mobile.clickTop',clickBottom:'event.mobile.clickBottom',clickPanel:'event.mobile.clickPanel',topReady:'step.mobile.topReady',panelReady:'step.mobile.panelReady',domInteractive:'dom.interactive',};var cdn=sublime.env('delivery_url');var pixelsMskinzAbstract={close:{inherit:'_commonSkinz',qs:{e:'close'}},topView:{inherit:'_commonSkinz',qs:{e:'mtv'}},bottomView:{inherit:'_commonSkinz',qs:{e:'mbv'}},panelView:{inherit:'_commonSkinz',qs:{e:'mp0'}},panelViewSec1:{inherit:'_commonSkinz',qs:{e:'mp1'}},panelViewSec3:{inherit:'_commonSkinz',qs:{e:'mp3'}},};var NAVBAR_ZINDEX=2147483647;var PANEL_ZINDEX=NAVBAR_ZINDEX-1;var DOUBLE_BUFF_IMAGE_ZINDEX=PANEL_ZINDEX-1;sublime.display.mobile.panel2.swiperContainer=null;sublime.display.mobile.panel2.hookNames=mskinzHookNames;sublime.display.mobile.panel2.adIsReady=function mskinzAdIsReady(ad){if(!ad.isRedirect&&!sublime.isUrl(ad.url)){return false;}
var elementToTest=['top','bottom','panel'];var isReady=true;for(var i in elementToTest){if(!elementToTest.hasOwnProperty(i)){continue;}
var element=elementToTest[i];var hasElement=!!(ad.mobile_setup[element]&&ad.mobile_setup[element].key&&sublime.isUrl(ad.mobile_setup[element].src)&&ad.mobile_setup[element].type);isReady=isReady&&hasElement;}
return isReady;};sublime.display.mobile.panel2.render=function mskinzRender(ad){ad.click_url_top_final=sublime.display.getFinalClickUrl(ad,null,'mct');ad.click_url_panel_final=sublime.display.getFinalClickUrl(ad,null,'mcp');ad.click_url_bottom_final=sublime.display.getFinalClickUrl(ad,null,'mcb');sublime.hook.register(mskinzHookNames.domInteractive,function mskinzDomInteractive(){loadSwiperLibraryAndDisplayAd(ad);});};sublime.display.mobile.panel2.openClosePanel=function openClosePanel(open){if(open&&sublime.display.mobile.panel2.swiperContainer.isMainPage()){sublime.hook.call(mskinzHookNames.swipeToPanel);}else{sublime.display.mobile.panel2.swiperContainer.swipeToMainPage();}};sublime.display.mobile.panel2.getComponent=function mskinzGetComponent(key){var swiperContainer=sublime.display.mobile.panel2.swiperContainer;var components={top:swiperContainer.top.element,close_button:swiperContainer.top.closeButton.element,arrowContainer:swiperContainer.arrow.element,arrow:swiperContainer.arrow.element,bottom:swiperContainer.bottom.element,panel:swiperContainer.panel.element,};return components[key]||null;};function loadSwiperLibraryAndDisplayAd(ad){sublime.analytics.setPixels(347,pixelsMskinzAbstract);setPixelSwipeMacro(ad);sublime.hook.call('step.impression.before');var zone={id:347,site_id:259,main_category_id:81,sub_category_id:36,html:"<style>\niframe[id^=\"ayads-pull-creative-\"], #Footeo_ATF_1x1 {display:none !important;}\n#background{background:none !important}\n.nav-drawer-container{display:none  !important}\n#content{background-color: white !important;margin-top: 0px !important;}\n#blockadd{width: 1010px !important;background-color: white !important;display: none !important;}\n#content .container{width: 1010px !important;}\n</style>\n\n<script>\nfunction init(){\n    /* Init variables */\n    var html = sublime.window.document.querySelector(\'html\'),\n        body = sublime.window.document.body,\n        isSafari = navigator.userAgent.indexOf(\'Safari\') != -1 && navigator.userAgent.indexOf(\'Chrome\') == -1,\n        IsEdge = navigator.userAgent.indexOf(\'Edge\') != -1,\n        isChrome = navigator.userAgent.indexOf(\'Chrome\') != -1 && !IsEdge,\n        isMac = navigator.appVersion.indexOf(\"Mac\") != -1,\n        isVideo = !sublime.isEmpty(sublime.creativeAd.videos),\n        bgfix = sublime.creativeAd.fixed,\n        format = \'\',\n        ayadsVideoLayer,\n        firstCall,\n        i = 0,\n        /* Edit variables */\n        maxHeightHeader = 41,\n        minHeightHeader = 41;\n    /**************** ADAPT MARGIN TO HTML AND LAUNCH FUNCTION FOR OTHERS ELEMENTS ****************/\n    function fixSkin(){\n        isChrome ? html.style.cssText = \'padding-top:\' + maxHeightHeader + \'px !important;\' : html.style.cssText = \'margin-top:\' + maxHeightHeader + \'px !important;\';\n        if ((bgfix && !isVideo) || (!bgfix && isMac && isSafari)  || (!bgfix && isChrome)) {\n            body.style.cssText = \'background-position: center \'+maxHeightHeader+\'px !important;\';\n        }\n        if (bgfix) {\n            fixSkinOnScrollEvent();\n            if (firstCall) {\n                sublime.window.addEventListener(\'scroll\', fixSkinOnScrollEvent);\n                firstCall = false;\n            }\n        }\n    }\n    /**************** ADAPT MARGIN TO OTHERS ELEMENTS ****************/\n    function fixSkinOnScrollEvent(){\n        var y = sublime.window.pageYOffset,\n            newMarginTop;\n \n        if (y === 0) {\n            newMarginTop = maxHeightHeader;\n        } else if (y > 0 && y < (maxHeightHeader - minHeightHeader)) {\n            newMarginTop = Math.floor(maxHeightHeader - y);\n        } else {\n            newMarginTop = minHeightHeader;\n        }\n \n        if (isVideo && ayadsVideoLayer) {\n            ayadsVideoLayer.style.cssText = \'top:\' + newMarginTop + \'px !important;\';\n        } else {\n            body.style.cssText = \'background-position:center \' + newMarginTop + \'px !important;\';\n        }\n    }\n    /**************** CHECK IF ELEMENT IS PRESENT ****************/\n    function checkDivPresence(div, callback, bool){\n        myDiv = sublime.window.document.querySelector(div);\n        if (myDiv) {\n            if (bool) {\n                if (isVideo && div === \"#ayads-video-layer\") {\n                    ayadsVideoLayer = myDiv;\n                }\n                firstCall = true;\n            }\n            callback(myDiv);\n        } else {\n            top.sublime.timer.setTimeout(function(){\n                if (i > 30) {\n                    top.sublime.timer.clearTimeout(function() {\n                        checkDivPresence();\n                    });\n                } else {\n                checkDivPresence(div, callback, bool);\n                }\n                i += 1;\n            }, 100);\n        }\n    }\n    /**************** ADAPT MARGIN TO HEADER WITH A DYNAMIC HEIGHT (OPTION) ****************/\n    function getHeightDynamicHeader(headerDyn){\n        maxHeightHeader = headerDyn.offsetHeight;\n        fixSkin();\n    }\n    /**************** LAUNCH FUNCTION CHECK ****************/\n    //html.style.cssText = \'margin-top:\' + maxHeightHeader + \'px !important;\';\n    isChrome ? html.style.cssText = \'padding-top:\' + maxHeightHeader + \'px !important;\' : html.style.cssText = \'margin-top:\' + maxHeightHeader + \'px !important;\';\n    if (isVideo){\n        checkDivPresence(\'#ayads-video-layer\', fixSkin, true);\n    } else {\n        checkDivPresence(\'body\', fixSkin, true);\n    };\n    sublime.hook.register(\"event.cleanUp\", function(){\n        sublime.window.removeEventListener(\'scroll\', fixSkinOnScrollEvent);\n        isChrome ? html.style.paddingTop = \'\' : html.style.marginTop = \'\';\n    });\n    /* checkDivPresence(\'header\', getHeightDynamicHeader); */\n}\n/**************** LAUNCH GLOBAL FUNCTION ****************/\ninit();\n</script>",passback:"",mobilepassback:"",premium:0,block_cookies:0,scale:1.01,url:"www.footeo.com",width:0,mobile_setup:{footer_fixed:1},sticky_setup:{js:"",css:""},mobilecss:"",mobilejs:"",mobile_bottom_selector:"",mobile_bottom_append_position:"",tag_type:"waterfall",video_mute:0,video_autoplay:1,passback_render:"",sjs_debug:0,country:"FR",site_url:"www.footeo.com",company_id:1121,autoskinz:0,autovideo:0,supported_devices:["mobile","desktop"],main_category_name:"Sport",sub_category_name:"Football",nortb:0,novideo:0,noreminder:0,host:"www.footeo.com",cappings:{impressions:0,impressions_mobile:0,duration:86400},accepted_placement_types:{skinz:1},ignore_client_width:false,scaleCompat:101,continent:"EU",mmd:5,mmm:3};setupZoneAdMskinzAbstract(zone,ad);initMskinz(zone,ad);sublime.hook.call('step.impression.after');}
function initMskinz(zone,ad){sublime.display.addCss(sublime.env('css')['mskinzV2']);var script=sublime.display.addJavascriptToHead(cdn+'mskinz/swiper.min.js');script.addEventListener('load',function(){initSwiperContainer(zone,ad);});}
function initSwiperContainer(zone,ad){sublime.display.mobile.panel2.swiperContainer=SwiperContainer.create(zone,ad);sublime.hook.call(mskinzHookNames.swiperCreated);}
function setupZoneAdMskinzAbstract(zone,ad){sublime.hook.call('step.setupZoneAd.before');if(zone.mobilecss){sublime.display.addCss(zone.mobilecss);}
if(zone.mobilejs){sublime.applyJs(zone.mobilejs);}
if(ad.mobile_setup.css){ad.mobile_setup.css=sublime.macros.replace(ad.mobile_setup.css,ad);sublime.display.addCss(ad.mobile_setup.css);}
if(ad.mobile_setup.js){ad.mobile_setup.js=sublime.macros.replace(ad.mobile_setup.js,ad);sublime.applyJs(ad.mobile_setup.js);}
if(ad.html){var clickMacro='';if(ad.isRedirect){clickMacro=ad.click_macro;}
var adWithMcp=merge(ad,{click_url:sublime.adServer.clickurlizeAntenna(clickMacro,'mcp')});ad.html=sublime.macros.replace(ad.html,adWithMcp);}
sublime.hook.call('step.setupZoneAd.after');}
function setPixelSwipeMacro(ad){if(!sublime.isUrl(ad.swipe_macro)){return;}
var pixels={'panelView.swipeMacro':{slot:'panelView.swipeMacro',url:ad.swipe_macro,repeat:3,},};sublime.analytics.setPixels(347,pixels);}
PanelDoubleBuffLayer.create=function(transitionColors){return(new PanelDoubleBuffLayer())._init(transitionColors);};function PanelDoubleBuffLayer(){this.element=null;this.id='panel-double-buffer-image';this._init=function(transitionColors){this.element=sublime.document.createElement('div');this.element.id=this.id;this.element.style.zIndex=DOUBLE_BUFF_IMAGE_ZINDEX;this.hide();this.element.style.backgroundColor=(transitionColors&&transitionColors[1])||'#e9531d';sublime.display.getCreativeContainer().appendChild(this.element);return this;};this.show=function(){this.element.classList.remove('sublime-hidden');};this.hide=function(){this.element.classList.add('sublime-hidden');};}
TopTooltip.create=function(parentElement,tooltipType,topImage){return(new TopTooltip())._init(parentElement,tooltipType,topImage);};function TopTooltip(){this.id='sublime-top-tooltip';this.element=null;this.childElement=null;this._parentElement=null;this.tooltipType=null;this.arrow=null;this.gesture=null;this._init=function(parentElement,tooltipType,topImage){this._parentElement=parentElement;this.tooltipType=parseInt(tooltipType);switch(this.tooltipType){case 1:this._renderAnimation1();break;case 2:this._renderAnimation2();break;case 3:this._renderAnimation3();break;default:this._renderAnimation4(topImage);break;}
parentElement.appendChild(this.element);return this;};this._renderAnimation1=function(){this.element=sublime.document.createElement('div');this.element.id=this.id;this.element.addEventListener('click',function(e){e.preventDefault();e.stopPropagation();if(sublime.display.mobile.panel2.swiperContainer.isMainPage()){sublime.hook.call(mskinzHookNames.swipeToPanel);}});var svgNS=null;var svg=sublime.document.createElementNS('http://www.w3.org/2000/svg','svg');svg.setAttributeNS(svgNS,'viewBox','0 0 26.81 56.96');var path=sublime.document.createElementNS('http://www.w3.org/2000/svg','path');path.setAttributeNS(svgNS,'d','M26.06.66,1.34,28.48,26.06,56.29');path.setAttributeNS(svgNS,'fill','none');path.setAttributeNS(svgNS,'stroke','#fff');path.setAttributeNS(svgNS,'stroke-miterlimit','10');path.setAttributeNS(svgNS,'stroke-width','2');svg.appendChild(path);this.element.appendChild(svg);var self=this;function showAnimation(){self.element.classList.add('bounce-out-right');sublime.timer.setTimeout(function(){self.element.classList.remove('bounce-out-right');},2500);}
function resetAnimation(){self.element.style.transform='translateX(0)';}
showAnimation();sublime.timer.setInterval(function(){resetAnimation();showAnimation();},3500);};this._renderAnimation2=function(){var font=sublime.document.createElement('link');font.href='https://fonts.googleapis.com/css?family=Arvo';font.rel='stylesheet';sublime.document.getElementsByTagName('head')[0].appendChild(font);this.element=sublime.document.createElement('div');this.element.id='sublime-container-swipe';var tooltipText=sublime.document.createElement('span');tooltipText.id='sublime-text-swipe';tooltipText.innerHTML='SWIPE TO DISCOVER';this.element.appendChild(tooltipText);var tooltipIcon=sublime.document.createElement('img');tooltipIcon.id='sublime-icon-swipe';tooltipIcon.src=cdn+'mskinz/animation2_gesture.svg';this.element.appendChild(tooltipIcon);var showed=true;var self=this;function hideTooltip(){showed=false;tooltipText.style.opacity=0;sublime.timer.setTimeout(function(){self.element.style.width='40px';},100);}
function showTooltip(){showed=true;self.element.style.width='180px';sublime.timer.setTimeout(function(){tooltipText.style.opacity=1;},150);}
sublime.timer.setInterval(function(){showed?hideTooltip():showTooltip();},1500);};this._renderAnimation3=function(){this.element=sublime.document.createElement('div');this.element.id='sublime-animation-3';var image=sublime.document.createElement('img');image.src=cdn+'mskinz/animation3_gesture.png';image.addEventListener('load',function(){sublime.timer.setTimeout(function(){this.element.style.opacity=0;}.bind(this),5000);}.bind(this));this.element.appendChild(image);};this._renderAnimation4=function(topImage){this.element=sublime.document.createElement('div');this._parentElement.classList.add('sublime-animation-4');topImage.classList.add('sublime-animation-4-image');this.childElement=sublime.document.createElement('div');this.childElement.id='animation4-images-container';var self=this;sublime.timer.setTimeout(function(){self.childElement.appendChild(topImage);var topImageCopy=topImage.cloneNode();topImageCopy.id=topImageCopy.getAttribute('id')+'-copy';topImageCopy.classList.add('animation4-image-copy');self.childElement.appendChild(topImageCopy);},1000);this.element.appendChild(this.childElement);this.gesture=sublime.document.createElement('img');this.gesture.src=cdn+'mskinz/animation4_gesture.svg';this.gesture.id='animation4-gesture';this.element.appendChild(this.gesture);this.arrow=sublime.document.createElement('img');this.arrow.src=cdn+'mskinz/animation4_arrow.svg';this.arrow.id='animation4-arrow';this.element.appendChild(this.arrow);this.element.addEventListener('touchstart',this._disableTooltip.bind(this));};this._disableTooltip=function(){if(this.gesture){this.gesture.style.display='none';}
if(this.arrow){this.arrow.style.display='none';}
[this.gesture,this.arrow,this.childElement].forEach(function(element){if(element){element.style.animation='none';}});};}
TopCloseButton.create=function(){return(new TopCloseButton())._init();};function TopCloseButton(){this.id='sublime-mobile-top-close';this.element=null;this._isClicked=false;this._init=function(){this.element=sublime.document.createElement('div');this.element.style.zIndex=996;this.element.id=this.id;this._bindEvents();return this;};this._bindEvents=function(){this.element.addEventListener('click',function(e){e.preventDefault();sublime.hook.call(mskinzHookNames.topCloseButtonClicked);sublime.analytics.fire(347,'close');this.fadeOut();this._isClicked=true;}.bind(this));};this.fadeOut=function(){this.element.style.opacity=0;this.element.style.zIndex=0;};this.fadeIn=function(){this.element.style.opacity=1;this.element.style.zIndex=998;};this.update=function(isMainPage,isSupportTopSticky,anchorScrollY){if(!this._isClicked&&isMainPage&&isSupportTopSticky&&sublime.window.pageYOffset>anchorScrollY){this.fadeIn();}else{this.fadeOut();}};}
TopTimer.create=function(autoHideDuration){return(new TopTimer())._init(autoHideDuration);};function TopTimer(){this.id='sublime-mobile-top-timer';this.element=null;this._autoHideDuration=0;this._interval=null;this._resetTime=0;this._finished=false;this._init=function(autoHideDuration){this._autoHideDuration=autoHideDuration;this.element=sublime.document.createElement('div');this.element.style.zIndex=996;this.element.id=this.id;return this;};this.fadeIn=function(){this.element.style.zIndex=998;this.element.style.opacity=1;};this.fadeOut=function(){this.element.style.opacity=0;this.element.style.zIndex=996;};this._updateText=function(){this.element.innerText=sublime.pInt(this._resetTime / 1000)+1;};this._clearTimerInterval=function(){this.fadeOut();sublime.timer.clearInterval(this._interval);this._interval=null;};this.update=function(isMainPage,isSupportTopSticky,anchorScrollY){if(this._finished||!isMainPage||!isSupportTopSticky||this._autoHideDuration<=0||sublime.window.pageYOffset<=anchorScrollY){this._clearTimerInterval();return;}
if(!this._interval){this._resetTime=this._autoHideDuration*1000-1;this._updateText();this.fadeIn();this._interval=sublime.timer.setInterval(function(){this._resetTime-=500;this._updateText();if(this._resetTime<=0){this._clearTimerInterval();this._finished=true;sublime.hook.call(mskinzHookNames.topAutoHide);}}.bind(this),500);}};}
TopContainer.create=function(ad,zoneFooterFixed,parentElement){return(new TopContainer())._init(ad,zoneFooterFixed,parentElement);};function TopContainer(){this.id='sublime-mobile-top';this.element=null;this.image=null;this._ad={};this._params={};this.parallaxSpeed=0.5;this.isSupportParallax=false;this.isSupportSticky=false;this._showTimer=false;this.tooltip=null;this.closeButton=null;this.originPaddingTop=0;this.originMarginTop=0;this.timer=null;this._isFirstShow=true;this._init=function(ad,zoneSupportSticky,parentElement){this._ad=ad;this._params=ad.mobile_setup.top;this.originMarginTop=parseFloat(getComputedStyle(parentElement).marginTop)||0;var adSupportSticky=this._params.autoHideTopDuration>0||this._params.supportTopClose;this.isSupportSticky=this._shouldSupportSticky(zoneSupportSticky,adSupportSticky);this._showTimer=!this._params.supportTopClose||this._params.autoHideTopDuration>0;this._createElement(this._params.src);this.resetParallax();this.tooltip=TopTooltip.create(this.element,this._params.tooltipType,this.image);if(this.isSupportSticky){if(this._showTimer){this.timer=TopTimer.create(this._params.autoHideTopDuration||3);parentElement.appendChild(this.timer.element);}else{this.closeButton=TopCloseButton.create();parentElement.appendChild(this.closeButton.element);}}
this._bindEvents();this.isInScreen();return this;};this._createElement=function(imageUrl){this.element=sublime.document.createElement('div');this.element.id=this.id;this.element.className='swiper-slide';this.image=sublime.document.createElement('img');this.image.id='sublime-mobile-top-image';this.image.src=imageUrl;this.image.addEventListener('load',function(){this.originPaddingTop=parseFloat(sublime.document.body.paddingTop||0)+this.originMarginTop;sublime.document.body.style.setProperty('padding-top',(this.originPaddingTop+this.image.clientHeight)+'px','important');sublime.hook.call(mskinzHookNames.topImageLoaded);}.bind(this));this.element.appendChild(this.image);};this._shouldSupportSticky=function(zoneSupportSticky,adSupportSticky){zoneSupportSticky=sublime.isDefined(zoneSupportSticky)?zoneSupportSticky:true;return!!Number(zoneSupportSticky)&&adSupportSticky;};this.getMediaHeight=function(){return this.image.clientHeight;};this._bindEvents=function(){var self=this;this.element.addEventListener('click',function(e){e.stopPropagation();e.preventDefault();if(self.video&&self.video.isVpaid&&!self.video.vpaid.isDeleted){return;}
if(self._params.showPanelWhenClicked&&sublime.display.mobile.panel2.swiperContainer.isMainPage()){sublime.hook.call(mskinzHookNames.swipeToPanel);}else{sublime.analytics.fire(347,'click');sublime.window.open(self._ad.click_url_top_final);sublime.hook.call(mskinzHookNames.click);sublime.hook.call(mskinzHookNames.clickTop);}});};this.resetParallax=function(){this.isSupportParallax=this._params.supportTopParallax||false;};this.disableParallax=function(){this.isSupportParallax=false;};this.disableSupportSticky=function(){this.isSupportSticky=false;};this.isInScreen=function(){var isInScreen;if(this.isSupportSticky){isInScreen=true;}else if(this.isSupportParallax){isInScreen=sublime.window.pageYOffset<=this.element.clientHeight / this.parallaxSpeed;}else{isInScreen=sublime.window.pageYOffset<=this.element.clientHeight;}
if(this._isFirstShow&&isInScreen){sublime.analytics.fire(347,'topView');this._isFirstShow=false;}
return isInScreen;};this.update=function(isMainPage){if(this.isSupportSticky){if(this._showTimer){this.timer.update(isMainPage,this.isSupportSticky,this.getMediaHeight());}else{this.closeButton.update(isMainPage,this.isSupportSticky,this.getMediaHeight());}}};}
BottomContainer.create=function(ad,isSupportTopSticky,zoneFooterFixed){return(new BottomContainer())._init(ad,isSupportTopSticky,zoneFooterFixed);};function BottomContainer(){this.id='sublime-mobile-bottom-container';this.element=null;this.disable=false;this.image=null;this._ad={};this._params={};this._originPaddingBottom=0;this.isSupportSticky=false;this._isFirstShow=true;this._lastScrollY=0;this._init=function(ad,isSupportTopSticky,zoneFooterFixed){this._ad=ad;this._params=ad.mobile_setup.bottom;this.isSupportSticky=ad.mobile_setup.footer_fixed&&zoneFooterFixed;this._originPaddingBottom=parseFloat(getComputedStyle(sublime.document.body).paddingBottom||0);this._createElement();this._bindEvents();if(!this.isSupportSticky){this.element.style.transform='translate3d(0,'+this._originPaddingBottom+'px,0)';}
this.setVisible(!isSupportTopSticky);sublime.hook.call(mskinzHookNames.bottomReady);return this;};this._bindEvents=function(){var self=this;if(this._params.showPanelWhenClicked){this.element.addEventListener('touchstart',function(){sublime.hook.call(mskinzHookNames.click);sublime.hook.call(mskinzHookNames.clickBottom);if(sublime.display.mobile.panel2.swiperContainer.isMainPage()){sublime.hook.call(mskinzHookNames.swipeToPanel);}});}else{this.element.addEventListener('click',function(){sublime.hook.call(mskinzHookNames.click);sublime.hook.call(mskinzHookNames.clickBottom);sublime.window.open(self._ad.click_url_bottom_final);});}
sublime.timer.setInterval(function(){this._lastScrollY=sublime.window.pageYOffset;}.bind(this),100);};this._createElement=function(){this.element=sublime.document.createElement('div');this.element.id=this.id;this.element.classList.add('sublime-mobile-bottom-container');this.element.style.zIndex=DOUBLE_BUFF_IMAGE_ZINDEX-1;this.image=sublime.document.createElement('img');this.image.id='sublime-mobile-bottom-image';this.image.src=this._params.src;this.element.appendChild(this.image);sublime.document.body.appendChild(this.element);};this.setSticky=function(sticky){if(sticky){this.slideIn();sublime.document.body.style.paddingBottom=((this._originPaddingBottom||0)+this.element.clientHeight)+'px';this.element.classList.add('sublime-fixed-footer');}else{this.slideOut();sublime.document.body.style.paddingBottom=(this._originPaddingBottom||0)+'px';this.element.classList.remove('sublime-fixed-footer');}};this.setVisible=function(visible){if(visible){this.element.classList.remove('sublime-hidden');}else{this.element.classList.add('sublime-hidden');}};this.isAtBottom=function(){var windowHeight=Math.max(sublime.document.body.scrollHeight,sublime.document.body.offsetHeight,sublime.document.body.parentNode.clientHeight);return windowHeight-this.element.clientHeight<=sublime.window.innerHeight+sublime.window.scrollY;};this.slideIn=function(){if(this.isSupportSticky){this.element.style.transform='translate3d(0,0,0)';}else{this.element.style.transform='translate3d(0,'+this._originPaddingBottom+'px,0)';}};this.slideOut=function(){this.element.style.transform='translate3d(0,'+(this.element.clientHeight+this._originPaddingBottom)+'px, 0)';};this.scrollUpOffset=function(){return this._lastScrollY-window.pageYOffset;};this.hide=function(){this.element.classList.add('sublime-hidden');sublime.document.body.style.paddingBottom=this._originPaddingBottom+'px';};this.update=function(isMainPage,isTopSupportSticky,isTopInScreen){if(isTopSupportSticky||!isMainPage||isTopInScreen){this.slideOut();return;}
if(this.isAtBottom()){this.slideIn();}else if(this.isSupportSticky&&this.scrollUpOffset()>30){this.setSticky(true);}else if(this.scrollUpOffset()<=-10){this.slideOut();}
if(!this._isFirstShow){return;}
if(!this.disable&&((this.isSupportSticky&&this.scrollUpOffset()>30)||this.isAtBottom())){sublime.analytics.fire(347,'bottomView');this._isFirstShow=false;}};}
PanelContainer.create=function(ad){return(new PanelContainer())._init(ad);};function PanelContainer(){this.id='sublime-mobile-panel-container';this.element=null;this._slides=[];this._params={};this._ad={};this.getSlides=function(){return this._slides;};this.clickCallback=function(){if(this._ad.click_url_panel_final){sublime.analytics.fire(347,'click');sublime.hook.call(mskinzHookNames.click);sublime.hook.call(mskinzHookNames.clickPanel);sublime.window.open(this._ad.click_url_panel_final);}else{log.warn('Click event as occured on the panel but no url is set');}};this._init=function(ad){this._ad=ad;this._params=ad.mobile_setup.panel;this.element=this._createSlide(this._params.src);this.element.id=this.id;this._slides.push(this.element);this._bindEvents();return this;};this._createSlide=function(imageUrl){var div=sublime.document.createElement('div');div.classList.add('swiper-slide');div.classList.add('sublime-panel-slide');div.style.backgroundImage='url('+imageUrl+')';return div;};this._bindEvents=function(){this.element.addEventListener('click',this.clickCallback.bind(this));sublime.hook.register({namespace:mskinzHookNames.panelReady,callback:this._appendIframe.bind(this),multiple:false,});};this._appendIframe=function(){if(sublime.isEmpty(this._ad.html)){return;}
if(sublime.inArray(this._ad.html_usage,['iframe-lazy','iframe','cross-domain-iframe'])){var i=this._createIframe();this.element.appendChild(i);if(this._ad.html_usage==='cross-domain-iframe'){i.src=sublime.env('sublime_url')+'ad/'+this._ad.id+'/iframe';return;}
if(this._ad.html_usage==='iframe'){this._writeToIframe(i,this._ad.html);return;}
if(this._ad.html_usage==='iframe-lazy'){sublime.hook.register({namespace:mskinzHookNames.beforeOpenPanel,callback:function(){this._writeToIframe(i,this._ad.html);}.bind(this),multiple:false,});}}else{sublime.display.writeToContainer(this._ad.html,this.id);}};this._writeToIframe=function(i,html){html+='<script>var inDapIF = true;</script>';var iDoc=i.contentDocument;iDoc.open();iDoc.write('<!doctype html><html><body style="margin:0">'+html+'</body></html>');iDoc.close();};this._createIframe=function(){var navbarHeight=6.4;var i=sublime.document.createElement('iframe');i.id='ayads-rich-media';i.name='ayads-rich-media';i.height=(100-navbarHeight)+'%';i.style.position='absolute';i.style.top=navbarHeight+'%';i.style.left=0;i.width='100%';i.style.borderWidth='0';return i;};}
ArrowButton.create=function(){return(new ArrowButton())._init();};function ArrowButton(){this.id='sublime-mobile-panel-arrow-container';this.element=null;this._touchStartX=0;this._panelOpened=false;this._init=function(){this._createElement();this._bindEvents();return this;};this._createElement=function(){this.element=sublime.document.createElement('div');this.element.id=this.id;this.element.style.zIndex=DOUBLE_BUFF_IMAGE_ZINDEX-1;var svgNS=null;var svg=sublime.document.createElementNS('http://www.w3.org/2000/svg','svg');svg.setAttributeNS(svgNS,'viewBox','0 0 126 54');var bg=sublime.document.createElementNS('http://www.w3.org/2000/svg','path');bg.setAttributeNS(svgNS,'d','M27,0a27,27,0,0,0,0,54H126V0Z');bg.setAttributeNS(svgNS,'fill','#1e3c86');svg.appendChild(bg);var arrow=sublime.document.createElementNS('http://www.w3.org/2000/svg','path');arrow.setAttributeNS(svgNS,'d','M19.67,28.21l6.16,6.16A1.71,1.71,0,0,0,28.25,32L25,28.71H33.2a1.71,1.71,0,0,0,0-3.42H25l3.24-3.24a1.71,1.71,0,0,0-2.42-2.42l-6.16,6.16A1.73,1.73,0,0,0,19.67,28.21Z');arrow.setAttributeNS(svgNS,'fill','#fff');svg.appendChild(arrow);var circle=sublime.document.createElementNS('http://www.w3.org/2000/svg','circle');circle.setAttributeNS(svgNS,'cx','27');circle.setAttributeNS(svgNS,'cy','27');circle.setAttributeNS(svgNS,'r','15.22');circle.setAttributeNS(svgNS,'fill','none');circle.setAttributeNS(svgNS,'stroke','#fff');circle.setAttributeNS(svgNS,'stroke-miterlimit','10');circle.setAttributeNS(svgNS,'stroke-width','3');svg.appendChild(circle);this.element.appendChild(svg);sublime.display.getCreativeContainer().appendChild(this.element);var arrowHeight=3.4;this.element.style.bottom=(50-arrowHeight)+'vh';};this._bindEvents=function(){sublime.hook.call(mskinzHookNames.arrowReady);var self=this;this.element.addEventListener('touchstart',function(e){if(e.touches&&e.touches.length>1){return false;}
self._touchStartX=e.touches[0].screenX;});this.element.addEventListener('touchmove',function(e){if(e.touches&&e.touches.length>1){return false;}
var touchCurrentX=(e.touches&&e.touches[0]?e.touches[0].screenX:touchCurrentX)||0;var touchDelta=touchCurrentX-self._touchStartX;if(touchDelta<=-36&&!self._panelOpened){sublime.hook.call(mskinzHookNames.swipeToPanel);self._panelOpened=true;}else{self.element.style.transform='translate3d('+touchDelta+'px, -50% , 0)';}});var openPanel=function(e){if(!self._panelOpened){sublime.hook.call(mskinzHookNames.swipeToPanel);}
self.element.style.transform='translate3d(0, -50% , 0)';self._panelOpened=false;};this.element.addEventListener('touchend',openPanel);if(sublime.previewing&&sublime.device==='desktop'){this.element.addEventListener('mousedown',function(){sublime.window.addEventListener('mouseup',function previewMouseDown(){openPanel();sublime.display.mobile.panel2.swiperContainer.top.tooltip._disableTooltip();sublime.window.removeEventListener('mouseup',previewMouseDown);});});}};this.fadeOut=function(){this.element.style.marginRight='-80px';};this.fadeIn=function(){this.element.style.marginRight='-36px';};this.update=function(isMainPage,isTopSupportSticky,isTopInScreen){if(!isTopSupportSticky&&isMainPage&&!isTopInScreen){this.fadeIn();}else{this.fadeOut();}};}
Overlay.create=function(){return(new Overlay())._init();};function Overlay(){this.id='sublime-overlay';this.element=null;this._init=function(){this.element=sublime.document.createElement('div');this.element.id=this.id;this.element.classList.add('sublime-hidden');sublime.display.getCreativeContainer().appendChild(this.element);return this;};this.fadeOut=function(){this.setOpacity(0);sublime.timer.setTimeout(function(){this.element.classList.add('sublime-hidden');}.bind(this),1000);};this.show=function(){this.element.classList.remove('sublime-hidden');};this.setOpacity=function(opacity){this.element.style.opacity=opacity;};}
Navbar.create=function(ad,params){return(new Navbar())._init(ad,params);};function Navbar(){this.id='sublime-panel-navbar';this.element=null;this.arrowId='sublime-mobile-panel-arrow';this.arrow=null;this._params={};this.brand=null;this._ad={};this._init=function(ad,params){this._ad=ad;this._params=params;this._createElement();if(this._params.navbarBrand){this._createBrandElement();}
this._bindEvents();return this;};this._createBrandElement=function(){this.brand=sublime.document.createElement('img');this.brand.id='sublime-brand';this.brand.classList.add('sublime-brand');this.brand.src=this._params.navbarBrand;this.brand.addEventListener('load',function(){var maxRatio=9;if(this.brand.height>0){var logoRatio=this.brand.width / this.brand.height;if(logoRatio<=maxRatio){this.element.appendChild(this.brand);}}}.bind(this));};this._createElement=function(){this.element=sublime.document.createElement('div');this.element.id=this.id;this.element.style.backgroundColor=this._params.navbarColor||'#000000';var svgNS=null;this.arrow=sublime.document.createElementNS('http://www.w3.org/2000/svg','svg');this.arrow.setAttributeNS(svgNS,'viewBox','0 0 477.175 477.175');this.arrow.id=this.arrowId;var arrowPath=sublime.document.createElementNS('http://www.w3.org/2000/svg','path');arrowPath.setAttributeNS(svgNS,'d','M145.188,238.575l215.5-215.5c5.3-5.3,5.3-13.8,0-19.1s-13.8-5.3-19.1,0l-225.1,225.1c-5.3,5.3-5.3,13.8,0,19.1l225.1,225c2.6,2.6,6.1,4,9.5,4s6.9-1.3,9.5-4c5.3-5.3,5.3-13.8,0-19.1L145.188,238.575z');var arrowColor=this._params.navbarArrowColor||'#FFFFFF';arrowPath.setAttributeNS(svgNS,'fill',arrowColor);this.arrow.appendChild(arrowPath);this.element.appendChild(this.arrow);sublime.display.getCreativeContainer().appendChild(this.element);};this._callHookClosePanel=function(e){e.stopPropagation();e.preventDefault();sublime.hook.call(mskinzHookNames.swipeToMainPage);};this._bindEvents=function(){var self=this;this.arrow.addEventListener('touchstart',this._callHookClosePanel.bind(this));if(sublime.previewing&&sublime.device==='desktop'){this.arrow.addEventListener('click',this._callHookClosePanel.bind(this));}
if(this.brand){this.brand.addEventListener('click',function(){sublime.window.open(this._ad.click_url_panel_final);});}};this.hide=function(){this.setOpacity(0);};this.show=function(){this.element.classList.remove('sublime-hidden');this.element.style.zIndex=NAVBAR_ZINDEX;};this.setOpacity=function(opacity){this.element.style.opacity=opacity;if(opacity===0){this.element.classList.add('sublime-hidden');this.element.style.zIndex=0;}};}
SwiperContainer.create=function(zone,ad){return(new SwiperContainer())._init(zone,ad);};function SwiperContainer(){this.id='sublime-mobile-top-container';this.element=null;this.slideWrapper=null;this._params=null;this._ad={};this.swiper=null;this.top=null;this.bottom=null;this.panel=null;this.overlay=null;this.navbar=null;this.arrow=null;this.panelDoubleBuffLayer=null;this._contentScrollY=0;this._timeElapsedOnPanel=0;this._timeout1s=null;this._startSwiperIndex=0;this._timeout3s=null;this._ayadsHtmlContainer=false;this._touchStartAt=null;this._stopRenderer=false;this._originZIndex=1029;this._init=function(zone,ad){this._ad=ad;this._params=ad.mobile_setup;sublime.display.addCreativeContainer();this._createElement();this.top=TopContainer.create(ad,zone.mobile_setup.footer_fixed,this.element);this.bottom=BottomContainer.create(ad,this.top.isSupportSticky,zone.mobile_setup.footer_fixed);this.panel=PanelContainer.create(ad);this.arrow=ArrowButton.create();this.overlay=Overlay.create();this.navbar=Navbar.create(ad,this._params.panel);this.panelDoubleBuffLayer=PanelDoubleBuffLayer.create(this._params.panel.transitionColors);this.appendSlide(this.top.element);sublime.hook.call(mskinzHookNames.topReady);this.panel.getSlides().forEach(function(slide){this.appendSlide(slide);slide.style.marginTop='-'+this.top.originMarginTop+'px';}.bind(this));this._initSwiper();this._bindEvents();this.setSwiperSticky(this.top.isSupportSticky);this.update();sublime.hook.call(mskinzHookNames.panelReady);return this;};this._createElement=function(){this.element=sublime.document.createElement('div');this.element.id=this.id;this.element.className='swiper-container';var color1=(this._params.panel.transitionColors&&this._params.panel.transitionColors[0])||'#1f3c86';var color2=(this._params.panel.transitionColors&&this._params.panel.transitionColors[1])||'#e9531d';this.element.style.backgroundColor=color1;this.element.style.backgroundImage='-webkit-gradient(linear, left top, right top, from('+color1+'), to('+color2+')), '
+'linear-gradient(90deg, '+color1+', '+color2+')';this.slideWrapper=sublime.document.createElement('div');this.slideWrapper.className='swiper-wrapper';this.element.appendChild(this.slideWrapper);this._ayadsHtmlContainer=sublime.display.getCreativeContainer();this._ayadsHtmlContainer.appendChild(this.element);var zIndex=getComputedStyle(this.element).zIndex;this._originZIndex=zIndex>1?zIndex:this._originZIndex;this.element.style.zIndex=this._originZIndex;var indicator=sublime.document.createElement('div');indicator.id='sublime-position-indicator-block';this._ayadsHtmlContainer.appendChild(indicator);};this.appendSlide=function(slide){this.slideWrapper.appendChild(slide);};this._bindEvents=function(){var self=this;sublime.window.addEventListener('scroll',this.update.bind(this));sublime.hook.register('event.cleanUp',function clearEventListeners(){sublime.window.removeEventListener('scroll',self.update);});sublime.hook.register({namespace:mskinzHookNames.orientationChange,callback:function(){if(Math.abs(window.orientation)===90){self._stopRenderer=true;self.hideAd();}else{self._stopRenderer=false;sublime.timer.setTimeout(function(){self.showAd();},100);}},});sublime.hook.register({namespace:mskinzHookNames.topCloseButtonClicked,callback:this._closeTopClicked.bind(this),});sublime.hook.register({namespace:mskinzHookNames.topAutoHide,callback:this._closeTopClicked.bind(this),});sublime.hook.register({namespace:mskinzHookNames.swipeToPanel,callback:this.swipeToPanel.bind(this),});sublime.hook.register({namespace:mskinzHookNames.swipeToMainPage,callback:this.swipeToMainPage.bind(this),});};this._closeTopClicked=function(){var self=this;if(!this.isMainPage()){return;}
this.slideSwiperOut();sublime.timer.setTimeout(function(){self.disableSupportTopSticky();self.update();},500);};this.hideAd=function(){this._ayadsHtmlContainer.classList.add('sublime-hidden');sublime.document.body.style.setProperty('padding-top',this.top.originPaddingTop+'px','important');this.bottom.hide();};this.showAd=function(){this._ayadsHtmlContainer.classList.remove('sublime-hidden');sublime.document.body.style.setProperty('padding-top',(this.top.originPaddingTop+this.top.getMediaHeight())+'px','important');if(!this.top.isSupportSticky){this.bottom.element.classList.remove('sublime-hidden');this.bottom.update(this.isMainPage(),this.top.isSupportSticky,this.top.isInScreen());}};this.update=function(){if(this._stopRenderer){return;}
this._handleSwiperParallax();this.top.update(this.isMainPage());this.bottom.update(this.isMainPage(),this.top.isSupportSticky,this.top.isInScreen());this.arrow.update(this.isMainPage(),this.top.isSupportSticky,this.top.isInScreen());};this.isMainPage=function(){return this.swiper.realIndex===0;};this._updateHeight=function(progress){var height=progress*this.panel.getSlides().length*sublime.window.innerHeight;if(height<this.top.getMediaHeight()){this.element.style.height=this.top.getMediaHeight()+'px';}else if(progress*this.panel.getSlides().length<=1){this.element.style.height=height+'px';}};this._handleSwiperParallax=function(){if(!this.top.isSupportSticky&&this.top.isSupportParallax){var offsetY=sublime.window.pageYOffset*this.top.parallaxSpeed;this.element.style.transform='translate3d(0, '+offsetY+'px, 0)';}};this._rememberContentScrollY=function(){this._contentScrollY=sublime.window.pageYOffset;};this.disableSupportTopSticky=function(){this.top.disableSupportSticky();this.setSwiperSticky(false);this.slideSwiperIn();sublime.timer.setTimeout(function(){this.bottom.setVisible(true);if(!this.bottom.isSupportSticky){this.bottom.slideIn();}}.bind(this),500);};this.setSwiperSticky=function(sticky){if(sticky){this.element.classList.add('sublime-top-fixed');this.element.style.transform='translate3d(0, 0, 0)';}else{this.element.classList.remove('sublime-top-fixed');}};this.slideSwiperOut=function(){this.element.style.left=this.element.clientWidth+'px';};this.slideSwiperIn=function(){this.element.style.left=0;};this.swipeToPanel=function(){this.navbar.show();this.swiper.slideTo(1,300);this._activePanelMode();};this.swipeToMainPage=function(){if(!this.isMainPage()){this.swiper.slideTo(0,300*(this.swiper.realIndex+1));this._activeMainPageMode();}};this._panelModeZIndex=function(){this.element.style.overflow='visible';this.element.style.zIndex=PANEL_ZINDEX;};this._mainPageModeZIndex=function(){this.element.style.overflow='hidden';this.element.style.zIndex=this._originZIndex;};this._activeMainPageMode=function(){sublime.hook.call(mskinzHookNames.beforeClosePanel);this._mainPageModeZIndex();this.navbar.hide();if(this._contentScrollY>=0){sublime.window.scrollTo(0,this._contentScrollY);}
sublime.document.body.classList.remove('sublime-panel-opened');this.setSwiperSticky(this.top.isSupportSticky);this.top.resetParallax();sublime.hook.call(mskinzHookNames.closePanel);this._removePanelPixelsTimer();this.update();sublime.hook.call(mskinzHookNames.afterClosePanel);};this._activePanelMode=function(){this._panelModeZIndex();sublime.hook.call(mskinzHookNames.beforeOpenPanel);this._rememberContentScrollY();sublime.window.scrollTo(0,0);sublime.document.body.classList.add('sublime-panel-opened');this.navbar.setOpacity(1);this.setSwiperSticky(true);this.top.disableParallax();this.element.style.transform='translate3d(0px, 0px, 0px)';sublime.hook.call(mskinzHookNames.openPanel);this._addPanelPixelsTimer();this.update();sublime.hook.call(mskinzHookNames.afterOpenPanel);};this._addPanelPixelsTimer=function(){elapsedSinceLastCall('mobilePanel');sublime.analytics.fire(347,'panelView');if(this._timeElapsedOnPanel<1000){this._timeout1s=sublime.timer.setTimeout(function(){sublime.analytics.fire(347,'panelViewSec1');},1000-this._timeElapsedOnPanel);}
if(this._timeElapsedOnPanel<3000){this._timeout3s=sublime.timer.setTimeout(function(){sublime.analytics.fire(347,'panelViewSec3');},3000-this._timeElapsedOnPanel);}};this._removePanelPixelsTimer=function(){this._timeElapsedOnPanel+=elapsedSinceLastCall('mobilePanel');if(this._timeout1s){sublime.timer.clearTimeout(this._timeout1s);}
if(this._timeout3s){sublime.timer.clearTimeout(this._timeout3s);}};this._isFromMainPage=function(){return this.swiper.previousIndex===0;};this._isFromPanel=function(){return this.swiper.previousIndex===1;};this._initSwiper=function(){var self=this;this.swiper=new sublime.window.Swiper('#'+this.id,{autoHeight:true,effect:'coverflow',coverflowEffect:{slideShadows:false,},iOSEdgeSwipeDetection:true,});this.swiper.on('touchStart',function(){self._startSwiperIndex=this.realIndex;self._touchStartAt=(new Date()).getTime();if(sublime.previewing&&sublime.device==='desktop'){self.top.tooltip._disableTooltip();}
self._panelModeZIndex();sublime.hook.call(mskinzHookNames.swiperTouchStart);});this.swiper.on('touchEnd',function(){self.overlay.fadeOut();var touchEndAt=(new Date()).getTime();var timeDiff=touchEndAt-self._touchStartAt;if(timeDiff<this.params.longSwipesMs){if(this.swipeDirection==='next'&&self._startSwiperIndex===0){self._activePanelMode();}
if(this.swipeDirection==='prev'&&self._startSwiperIndex===1){self._activeMainPageMode();}
if(this.swipeDirection==='prev'&&self._startSwiperIndex===0){self._mainPageModeZIndex();sublime.hook.call(mskinzHookNames.swiperTouchCancel);}}else{if(self._startSwiperIndex===this.realIndex){if(self._startSwiperIndex===0){self._mainPageModeZIndex();sublime.hook.call(mskinzHookNames.swiperTouchCancel);}
return;}
if(self._isFromPanel()){self._activeMainPageMode();}
if(self._isFromMainPage()){self._activePanelMode();}}});this.swiper.on('sliderMove',function(){self.overlay.show();self.navbar.show();});this.swiper.on('progress',function(){self.overlay.setOpacity(this.progress);self.navbar.setOpacity(this.progress);self._updateHeight(this.progress);if(this.progress>=1){self.panelDoubleBuffLayer.show();}else{self.panelDoubleBuffLayer.hide();}});};}
sublime.helpers.createNamespace('sublime.display.mobile.panel2.mskinz');sublime.display.mobile.panel2.mskinz.adIsReady=sublime.display.mobile.panel2.adIsReady;sublime.display.mobile.panel2.mskinz.render=sublime.display.mobile.panel2.render;sublime.helpers.createNamespace('sublime.display.mobile.panel2.mskinzVideo');var pixelsMskinzVideo={videoQ0:{inherit:'_videoQuartile',qs:{e:'q0'},addBrowserDimensions:true,addPageHeightDimension:true},videoQ1:{inherit:'_videoQuartile',qs:{e:'q1'},addBrowserDimensions:true,addPageHeightDimension:true},videoQ2:{inherit:'_videoQuartile',qs:{e:'q2'},addBrowserDimensions:true,addPageHeightDimension:true},videoQ3:{inherit:'_videoQuartile',qs:{e:'q3'},addBrowserDimensions:true,addPageHeightDimension:true},videoQ4:{inherit:'_videoQuartile',qs:{e:'q4'},addBrowserDimensions:true,addPageHeightDimension:true},complete:{inherit:'_commonSkinz',qs:{e:'complete'}},mute:{inherit:'_commonSkinz',qs:{e:'mute'}},unmute:{inherit:'_commonSkinz',qs:{e:'unmute'}},rewind:{inherit:'_commonSkinz',qs:{e:'rewind'}},pause:{inherit:'_commonSkinz',qs:{e:'pause'}},resume:{inherit:'_commonSkinz',qs:{e:'resume'}},creativeView:{inherit:'_commonSkinz',qs:{e:'creativeView'}},videoStartedLoading:{inherit:'_commonSkinz',qs:{e:'vsl'}},videoCanplaythrough:{inherit:'_commonSkinz',qs:{e:'dicpt'}},videoLoadeddata:{inherit:'_commonSkinz',qs:{e:'dild'}},videoPlaying:{inherit:'_commonSkinz',qs:{e:'dip'}}};sublime.display.mobile.panel2.mskinzVideo.adIsReady=function(ad){return sublime.display.mobile.panel2.adIsReady(ad)&&ad.mobile_setup.top.hasOwnProperty('video');};sublime.display.mobile.panel2.mskinzVideo.render=function(ad){return new sublime.Promise(function(resolve,reject){sublime.analytics.setPixels(347,pixelsMskinzVideo);sublime.display.mobile.panel2.render(MskinzVideo.setDefaultParams(ad));sublime.hook.register({namespace:sublime.display.mobile.panel2.hookNames.swiperCreated,once:true,callback:function(){sublime.display.mobile.panel2.mskinzVideo=MskinzVideo.create(ad);resolve({container:sublime.display.mobile.panel2.mskinzVideo._videoContainer,video:sublime.display.mobile.panel2.mskinzVideo.video});},});});};MskinzVideo.setDefaultParams=function(ad){ad.mobile_setup.top.supportTopClose=typeof ad.mobile_setup.top.supportTopClose==='undefined'?1:ad.mobile_setup.top.supportTopClose;ad.mobile_setup.top.showPanelWhenClicked=typeof ad.mobile_setup.top.showPanelWhenClicked==='undefined'?1:ad.mobile_setup.top.showPanelWhenClicked;ad.mobile_setup.top.tooltipType=typeof ad.mobile_setup.top.tooltipType==='undefined'?4:ad.mobile_setup.top.tooltipType;return ad;};MskinzVideo.create=function(ad){return(new MskinzVideo())._init(ad.mobile_setup.top.video);};function MskinzVideo(){this._videoContainer=null;this._progress=null;this._progressBar=null;this._muteButton=null;this.video=null;this.videoSize=null;this._isVideoFinished=false;this._hasBeenClicked=false;this._hookNames=merge(sublime.display.mobile.panel2.hookNames,{clickMuteBtn:'event.mobile.clickMuteBtn',});this._triggeredQuartiles=[];this._quartileNames=['start','firstQuartile','midpoint','thirdQuartile','complete'];this._playControls=null;this._swiperContainer=sublime.display.mobile.panel2.swiperContainer;this._top=this._swiperContainer.top;this._panel=this._swiperContainer.panel;this._init=function(videoSource){this._reconfigSwiperContainer();this._createVideoContainer();this._createVideoProgress();this._videoContainer.appendChild(this._progress);this._createVideoProgressBar();this._progress.appendChild(this._progressBar);this._createMuteButton();this._videoContainer.appendChild(this._muteButton);this._createPlayControls();this.video=this._createVideo(videoSource);this._videoContainer.insertBefore(this.video,this._videoContainer.firstChild);this._resizeVideo();this._addEvents();this._addVideoToMainPage();this._startVideo();return this;};this._resizeVideo=function(){var self=this;sublime.hook.register({namespace:self._hookNames.topImageLoaded,callback:function(){self.videoSize=self._getVideoSize();if(!self.videoSize){self.video.height=self._top.getMediaHeight();return;}
self.video.height=self.videoSize.top.height;self.video.width=self.videoSize.top.width;},once:true,});};this._getVideoSize=function(){if(!sublime.creativeAd.video_resolution){log.info('Mskinz2 Video > No video resolution for this creative');return null;}
var videoResolution=sublime.creativeAd.video_resolution.split('x');var videoWidth=sublime.pInt(videoResolution[0]);var videoHeight=sublime.pInt(videoResolution[1]);if(!sublime.isNum(videoWidth)||!sublime.isNum(videoHeight)){log.error('Mskinz2 Video > Unable to parse videoWidth or videoHeight',videoResolution);return null;}
var screenWidth=sublime.window.innerWidth;var zoneTop=this._top.getMediaHeight();var sizes={top:{width:videoWidth*zoneTop / videoHeight,height:zoneTop},panel:{width:screenWidth,height:screenWidth*videoHeight / videoWidth}};if(sizes.top.width>screenWidth){sizes.top.width=screenWidth;sizes.top.height=screenWidth*videoHeight / videoWidth;}
return sizes;};this._createVideoContainer=function(){this._videoContainer=sublime.document.createElement('div');this._videoContainer.id='sublime-mobile-video-container';this._videoContainer.style.zIndex='2';};this._createVideoProgress=function(){this._progress=sublime.document.createElement('div');this._progress.className='sublime-mobile-loading-bar';};this._createVideoProgressBar=function(){this._progressBar=sublime.document.createElement('div');this._progressBar.className='sublime-mobile-loading-bar-progress';};this.setMuteVideo=function(isMuted){this.video.muted=isMuted;this._muteButton.className='sublime-mobile-video-mute '+(this.video.muted?'muteOn':'muteOff');};this._createMuteButton=function(){this._muteButton=sublime.document.createElement('div');this._muteButton.className='sublime-mobile-video-mute muteOn mute-animation';sublime.hook.register(this._hookNames.clickMuteBtn,this.setMuteVideo.bind(this));this._muteButton.onclick=function(e){e.stopPropagation();e.preventDefault();sublime.hook.call(this._hookNames.clickMuteBtn,!this.video.muted);this._muteButton.classList.remove('mute-animation');if(this.video.muted){sublime.analytics.fire(347,'mute');}else{sublime.analytics.fire(347,'unmute');}}.bind(this);};this._createVideo=function(videoSource){var self=this;var video=sublime.document.getElementById(sublime.display.elements.VIDEO_ID.mobile);if(!video){video=sublime.document.createElement('video');video.id=sublime.display.elements.VIDEO_ID.mobile;}
video.controls=false;video.muted=true;video.loop=false;video.preload='auto';video.style.display='';video.setAttribute('playsinline','playsinline');video.setAttribute('muted','muted');if(videoSource){video.src=videoSource;}
return video;};this._reconfigSwiperContainer=function(){this._top.isSupportParallax=true;this._top.resetParallax=function(){this._top.isSupportParallax=true;}.bind(this);sublime.hook.register({namespace:this._hookNames.topCloseButtonClicked,callback:this._pauseVideo.bind(this),});sublime.hook.register({namespace:this._hookNames.openPanel,callback:this._activePanelMode.bind(this),});sublime.hook.register({namespace:this._hookNames.closePanel,callback:this._activeMainPageMode.bind(this),});};this._addVideoToMainPage=function(){if(this._top.tooltip.tooltipType==4){this._top.tooltip.childElement.appendChild(this._videoContainer);}else{this._top.element.appendChild(this._videoContainer);}};this._createPlayControls=function(){var self=this;var d=sublime.document;var controls=d.createElement('div');controls.id='sublime-mobile-video-play-controls';controls.className='sublime-mobile-video-play-controls';controls.classList.add('sublime-hidden');var playButton=d.createElement('div');playButton.id='sublime-mobile-video-buttons-play';playButton.className='play';controls.appendChild(playButton);var pauseButtonPulseCircle=d.createElement('div');pauseButtonPulseCircle.id='play-video-pulsar';controls.appendChild(pauseButtonPulseCircle);var vidOverlay=d.createElement('div');vidOverlay.id='sublime-mobile-video-overlay';vidOverlay.classList.add('sublime-hidden');this._videoContainer.appendChild(vidOverlay);this._playControls={overlay:vidOverlay,controls:controls};controls.addEventListener('click',function(e){e.stopPropagation();e.preventDefault();self._playVideo();});this._videoContainer.appendChild(controls);};this._activeMainPageMode=function(){sublime.display.mobile.panel2.swiperContainer.element.classList.remove('sublime-video-panel-open');this._videoContainer.style.top=0;this._videoContainer.style.height=this._top.getMediaHeight()+'px';if(this.videoSize){this.video.height=this.videoSize.top.height;this.video.width=this.videoSize.top.width;}else{this.video.removeAttribute('width');this.video.height=this._top.getMediaHeight();}
if(this.video.isVpaid&&!this.video.vpaid.isDeleted){this.video.vpaid.resizeAd(this.video.offsetWidth,this.video.offsetHeight,'normal');this.video.style.width='';this.video.style.height='';}
if(this._isVideoFinished){return;}
if(this._top.isSupportSticky||this.isOnTopOfPage()){this._playVideo();}};this._activePanelMode=function(){sublime.display.mobile.panel2.swiperContainer.element.classList.add('sublime-video-panel-open');this._videoContainer.style.top='6.4vh';this._videoContainer.style.height='';if(this.videoSize){this.video.height=this.videoSize.panel.height;this.video.width=this.videoSize.panel.width;}else{this.video.removeAttribute('height');this.video.width=sublime.window.innerWidth;}
if(this.video.isVpaid&&!this.video.vpaid.isDeleted){this.video.vpaid.resizeAd(this.video.offsetWidth,this.video.offsetHeight,'normal');this.video.style.width='';this.video.style.height='';}};this._startVideo=function(){if(this.video.isVpaid&&!this.video.vpaid.isDeleted){return this.video.vpaid.startAd();}
this.video.play();};this._playVideo=function(){if(this.video.isVpaid&&!this.video.vpaid.isDeleted){return this.video.vpaid.resumeAd();}
this.video.play();};this._pauseVideo=function(){if(this.video.isVpaid&&!this.video.vpaid.isDeleted){return this.video.vpaid.pauseAd();}
this.video.pause();};this.computeMetrics=function(video){if(!sublime.isDefined(video.currentTime)||!sublime.isDefined(video.duration)||!sublime.isNum(video.currentTime)||!sublime.isNum(video.duration)){log.warn('video.currentTime or video.duration is not defined, no metrics sent.');return;}
if(video.paused&&video.duration!==video.currentTime){log.warn('Video is paused, no metrics sent.');return;}
var quartile=this.getQuartile(video.currentTime,video.duration);if(quartile>4||this._triggeredQuartiles[quartile]){return;}
for(var index=0;index<quartile;index++){var quartileIndex='videoQ'+index;var pixels=sublime.analytics.getPixels();if(sublime.helpers.hasProperty(pixels,347+'.'+quartileIndex)&&pixels[347][quartileIndex].fired!==1){sublime.analytics.fire(347,quartileIndex);}}
sublime.analytics.fire(347,'videoQ'+quartile);var quartileName=this._quartileNames[quartile];sublime.hook.call('step.video.quartile'+quartile,{duration:video.duration,quartile:quartile,quartileName:quartileName,currentTime:video.currentTime});this._triggeredQuartiles[quartile]=true;};this._addEvents=function(){var self=this;var isResume=false;this.video.addEventListener('play',function(){if(isResume){sublime.analytics.fire(347,'resume');}
self._playControls.overlay.classList.add('sublime-hidden');self._playControls.controls.classList.add('sublime-hidden');isResume=true;});this.video.addEventListener('pause',function(){sublime.analytics.fire(347,'pause');self._playControls.overlay.classList.remove('sublime-hidden');self._playControls.controls.classList.remove('sublime-hidden');});sublime.hook.register({namespace:sublime.vpaid.hookNames.adLoaded,once:true,callback:function(){sublime.hook.register(sublime.vpaid.hookNames.adPaused,function(){self._playControls.overlay.classList.remove('sublime-hidden');self._playControls.controls.classList.remove('sublime-hidden');});sublime.hook.register(sublime.vpaid.hookNames.adPlaying,function(){self._playControls.overlay.classList.add('sublime-hidden');self._playControls.controls.classList.add('sublime-hidden');});sublime.hook.register(sublime.vpaid.hookNames.adClickThru,function(){if(self._swiperContainer.isMainPage()&&sublime.creativeAd.mobile_setup.top.showPanelWhenClicked){sublime.hook.call(self._hookNames.openPanel);}else{sublime.display.openTargetUrl({},sublime.creativeAd,sublime.ad.url);}});}});sublime.hook.register(this._hookNames.afterOpenPanel,function(){sublime.analytics.fire(347,'creativeView');});this.video.addEventListener('loadstart',function loadStarted(){sublime.analytics.fire(347,'videoStartedLoading');});this.video.addEventListener('canplaythrough',function(){sublime.analytics.fire(347,'videoCanplaythrough');});this.video.addEventListener('playing',function(){sublime.analytics.fire(347,'videoPlaying');});this.video.addEventListener('loadeddata',function(){sublime.analytics.fire(347,'videoLoadeddata');self._top.video=self.video;});var previousTime=0;var isRewinding=false;this.video.addEventListener('timeupdate',function(){if(self.vpaid&&!self.vpaid.isDeleted){return;}
if(!isRewinding&&previousTime>self.video.currentTime){sublime.analytics.fire(347,'rewind');isRewinding=true;setTimeout(function(){isRewinding=false;},1000);}
previousTime=self.video.currentTime;var percentage=Math.abs((((self.video.duration-self.video.currentTime)/ self.video.duration)*100)-100);self._progressBar.style.width=percentage+'%';sublime.creativeAd.video_duration=parseInt(self.video.duration,10);self.computeMetrics(self.video);});this.video.addEventListener('ended',function(){self._isVideoFinished=true;sublime.analytics.fire(347,'complete');});sublime.window.addEventListener('scroll',function(){if(self.isOnTopOfPage()){if(!self._isVideoFinished&&!self._hasBeenClicked&&(!!self.video.paused||!(self.video.isVpaid&&!self.video.vpaid.isPaused))){self._playVideo();}}else if(self._swiperContainer.isMainPage()&&!self._top.isSupportSticky&&(!!self.video.paused||(self.video.isVpaid&&!self.video.vpaid.isPaused))){self._pauseVideo();}});};this.getQuartile=function(currentTime,duration){var quartileLength=duration / 4;var unroundedQuartile=currentTime / quartileLength;return Math.floor(unroundedQuartile);};this.isOnTopOfPage=function(){return sublime.window.pageYOffset<=this._top.getMediaHeight()*0.5;};}
sublime.helpers.createNamespace('sublime.display.mobile.panel2.mskinzSimple');var pixelsMskinzVideoSimple={fullscreen:{inherit:'_commonSkinz',qs:{e:'fullscreen'}},};sublime.display.mobile.panel2.mskinzSimple.adIsReady=function displayMobilePanel2SimpleAdIsReady(ad){var isReadableAd=sublime.isUrl(ad.url)&&sublime.helpers.hasProperty(ad,'mobile_setup.top.video');var isExternalVPAID=ad.vpaid&&ad.isExternal;return isReadableAd||isExternalVPAID;};sublime.display.mobile.panel2.mskinzSimple.render=function(ad){sublime.analytics.setPixels(347,pixelsMskinzVideoSimple);return sublime.display.mobile.panel2.mskinzVideo.render(ad).then(function(player){sublime.hook.register({namespace:sublime.display.mobile.panel2.hookNames.swiperCreated,once:true,callback:function(){MskinzSimple.create(ad);},});return player;});};var cdn=sublime.env('delivery_url');MskinzSimple.create=function(ad){return(new MskinzSimple())._init(ad.mobile_setup.top.video);};function MskinzSimple(){this._swiperContainer=sublime.display.mobile.panel2.swiperContainer;this._mskinzVideo=sublime.display.mobile.panel2.mskinzVideo;this._hookNames=merge(sublime.display.mobile.panel2.hookNames,{});this._video=this._mskinzVideo.video;this._panel=this._swiperContainer.panel.element;this._swiper=this._swiperContainer.element;this._bottom=this._swiperContainer.bottom.element;this._videoBackground=null;this._init=function(){this._swiper.classList.add('mksinz-simple');this._addEvents();this._hideBottom();};this._hideBottom=function(){var self=this;sublime.hook.register(this._hookNames.bottomReady,function(){sublime.display.mobile.panel2.swiperContainer.bottom.disable=true;self._bottom.classList.add('sublime-video-bottom-hidden');});};this._requestFullscreen=function(ele){if(ele.requestFullscreen){ele.requestFullscreen();}else if(ele.webkitRequestFullscreen){ele.webkitRequestFullscreen();}else if(ele.mozRequestFullScreen){ele.mozRequestFullScreen();}else if(ele.msRequestFullscreen){ele.msRequestFullscreen();}else{console.log('Fullscreen API is not supported.');}};this._addEvents=function(){var self=this;this._video.addEventListener('play',function(){if(self._videoBackground){self._videoBackground.play().catch(function(){log.error('Cannot play background video');});}});this._video.addEventListener('pause',function(){if(self._videoBackground){self._videoBackground.pause();}});this._video.addEventListener('loadeddata',function(){self._createBackground();self._syncVideos();});};this._syncVideos=function(){var self=this;setInterval(function(){if(Math.abs(self._videoBackground.currentTime-self._video.currentTime)>=.1){self._videoBackground.currentTime=self._video.currentTime;}
if(self._videoBackground.paused!==self._video.paused){self._videoBackground.paused?self._videoBackground.play():self._videoBackground.pause();}
if(self._videoBackground.src!==self._video.src){self._videoBackground.src=self._video.src;}},500);};this._createBackground=function(){this._videoBackground=sublime.document.createElement('video');this._videoBackground.src=this._video.src;this._videoBackground.autoplay=this._video.autoplay;this._videoBackground.muted=true;this._videoBackground.setAttribute('playsinline',true);this._videoBackground.loop=this._video.loop;this._videoBackground.id='sublime-mobile-video-bg';this._videoBackground.classList.add('sublime-hidden');this._panel.appendChild(this._videoBackground);var self=this;sublime.hook.register({namespace:this._hookNames.closePanel,callback:function(){self._videoBackground.classList.add('sublime-hidden');},});sublime.hook.register({namespace:this._hookNames.swiperTouchCancel,callback:function(){self._videoBackground.classList.add('sublime-hidden');},});sublime.hook.register({namespace:this._hookNames.openPanel,callback:function(){self._videoBackground.classList.remove('sublime-hidden');},});sublime.hook.register({namespace:this._hookNames.swiperTouchStart,callback:function(){self._videoBackground.classList.remove('sublime-hidden');},});};}
sublime.helpers.createNamespace('sublime.display.mobile.panel');var orientation,creativeAd={},components={},isOpened,isOpening,percentX,percentY,touchStartX=null,touchStartY=null,touchCurrentX=0,touchCurrentY=0,touchDeltaX=0,touchDeltaY=0,startPercentX=0,timeElapsedOnPanel=0,timeout1s,timeout3s,timeoutScroll,svgArrowHeight,hideIndicatorTimeout,lastScrollPosition=0,componentBottomHeight,noSwipeElements=[],canSwipe=true,isOnPanel=false,isTopAdClosed=false,topSticky;sublime.display.mobile.panel.isOnPanel=function(){return isOnPanel;};sublime.display.mobile.panel.isTopAdClosed=function(){return isTopAdClosed;};sublime.display.mobile.panel.isOnTopOfPage=function(){var yPos=sublime.window.pageYOffset;return yPos<=components.top.clientHeight*0.5;};sublime.display.mobile.panel.adIsReady=function(ad){if(sublime.isEmpty(ad)||sublime.isEmpty(ad.mobile_setup)){return false;}
if(!ad.isRedirect&&!sublime.isUrl(ad.url)){return false;}
var elementToTest=['top','bottom','panel'],isReady=true;for(var i in elementToTest){if(!elementToTest.hasOwnProperty(i)){continue;}
var element=elementToTest[i];var hasElement=!!(ad.mobile_setup[element]&&ad.mobile_setup[element].key&&sublime.isUrl(ad.mobile_setup[element].src)&&ad.mobile_setup[element].type);isReady=isReady&&hasElement;}
return isReady;};sublime.display.mobile.panel.render=function(ad){sublime.hook.register('dom.interactive',function(){creativeAd=ad;var zone={id:347,site_id:259,main_category_id:81,sub_category_id:36,html:"<style>\niframe[id^=\"ayads-pull-creative-\"], #Footeo_ATF_1x1 {display:none !important;}\n#background{background:none !important}\n.nav-drawer-container{display:none  !important}\n#content{background-color: white !important;margin-top: 0px !important;}\n#blockadd{width: 1010px !important;background-color: white !important;display: none !important;}\n#content .container{width: 1010px !important;}\n</style>\n\n<script>\nfunction init(){\n    /* Init variables */\n    var html = sublime.window.document.querySelector(\'html\'),\n        body = sublime.window.document.body,\n        isSafari = navigator.userAgent.indexOf(\'Safari\') != -1 && navigator.userAgent.indexOf(\'Chrome\') == -1,\n        IsEdge = navigator.userAgent.indexOf(\'Edge\') != -1,\n        isChrome = navigator.userAgent.indexOf(\'Chrome\') != -1 && !IsEdge,\n        isMac = navigator.appVersion.indexOf(\"Mac\") != -1,\n        isVideo = !sublime.isEmpty(sublime.creativeAd.videos),\n        bgfix = sublime.creativeAd.fixed,\n        format = \'\',\n        ayadsVideoLayer,\n        firstCall,\n        i = 0,\n        /* Edit variables */\n        maxHeightHeader = 41,\n        minHeightHeader = 41;\n    /**************** ADAPT MARGIN TO HTML AND LAUNCH FUNCTION FOR OTHERS ELEMENTS ****************/\n    function fixSkin(){\n        isChrome ? html.style.cssText = \'padding-top:\' + maxHeightHeader + \'px !important;\' : html.style.cssText = \'margin-top:\' + maxHeightHeader + \'px !important;\';\n        if ((bgfix && !isVideo) || (!bgfix && isMac && isSafari)  || (!bgfix && isChrome)) {\n            body.style.cssText = \'background-position: center \'+maxHeightHeader+\'px !important;\';\n        }\n        if (bgfix) {\n            fixSkinOnScrollEvent();\n            if (firstCall) {\n                sublime.window.addEventListener(\'scroll\', fixSkinOnScrollEvent);\n                firstCall = false;\n            }\n        }\n    }\n    /**************** ADAPT MARGIN TO OTHERS ELEMENTS ****************/\n    function fixSkinOnScrollEvent(){\n        var y = sublime.window.pageYOffset,\n            newMarginTop;\n \n        if (y === 0) {\n            newMarginTop = maxHeightHeader;\n        } else if (y > 0 && y < (maxHeightHeader - minHeightHeader)) {\n            newMarginTop = Math.floor(maxHeightHeader - y);\n        } else {\n            newMarginTop = minHeightHeader;\n        }\n \n        if (isVideo && ayadsVideoLayer) {\n            ayadsVideoLayer.style.cssText = \'top:\' + newMarginTop + \'px !important;\';\n        } else {\n            body.style.cssText = \'background-position:center \' + newMarginTop + \'px !important;\';\n        }\n    }\n    /**************** CHECK IF ELEMENT IS PRESENT ****************/\n    function checkDivPresence(div, callback, bool){\n        myDiv = sublime.window.document.querySelector(div);\n        if (myDiv) {\n            if (bool) {\n                if (isVideo && div === \"#ayads-video-layer\") {\n                    ayadsVideoLayer = myDiv;\n                }\n                firstCall = true;\n            }\n            callback(myDiv);\n        } else {\n            top.sublime.timer.setTimeout(function(){\n                if (i > 30) {\n                    top.sublime.timer.clearTimeout(function() {\n                        checkDivPresence();\n                    });\n                } else {\n                checkDivPresence(div, callback, bool);\n                }\n                i += 1;\n            }, 100);\n        }\n    }\n    /**************** ADAPT MARGIN TO HEADER WITH A DYNAMIC HEIGHT (OPTION) ****************/\n    function getHeightDynamicHeader(headerDyn){\n        maxHeightHeader = headerDyn.offsetHeight;\n        fixSkin();\n    }\n    /**************** LAUNCH FUNCTION CHECK ****************/\n    //html.style.cssText = \'margin-top:\' + maxHeightHeader + \'px !important;\';\n    isChrome ? html.style.cssText = \'padding-top:\' + maxHeightHeader + \'px !important;\' : html.style.cssText = \'margin-top:\' + maxHeightHeader + \'px !important;\';\n    if (isVideo){\n        checkDivPresence(\'#ayads-video-layer\', fixSkin, true);\n    } else {\n        checkDivPresence(\'body\', fixSkin, true);\n    };\n    sublime.hook.register(\"event.cleanUp\", function(){\n        sublime.window.removeEventListener(\'scroll\', fixSkinOnScrollEvent);\n        isChrome ? html.style.paddingTop = \'\' : html.style.marginTop = \'\';\n    });\n    /* checkDivPresence(\'header\', getHeightDynamicHeader); */\n}\n/**************** LAUNCH GLOBAL FUNCTION ****************/\ninit();\n</script>",passback:"",mobilepassback:"",premium:0,block_cookies:0,scale:1.01,url:"www.footeo.com",width:0,mobile_setup:{footer_fixed:1},sticky_setup:{js:"",css:""},mobilecss:"",mobilejs:"",mobile_bottom_selector:"",mobile_bottom_append_position:"",tag_type:"waterfall",video_mute:0,video_autoplay:1,passback_render:"",sjs_debug:0,country:"FR",site_url:"www.footeo.com",company_id:1121,autoskinz:0,autovideo:0,supported_devices:["mobile","desktop"],main_category_name:"Sport",sub_category_name:"Football",nortb:0,novideo:0,noreminder:0,host:"www.footeo.com",cappings:{impressions:0,impressions_mobile:0,duration:86400},accepted_placement_types:{skinz:1},ignore_client_width:false,scaleCompat:101,continent:"EU",mmd:5,mmm:3};topSticky=sublime.display.mobile.panel.getTopSticky(zone.mobile_setup.footer_fixed,ad.mobile_setup.top_sticky);displayPanel();});};sublime.display.mobile.panel.getTopSticky=function(footer_fixed,top_sticky){footer_fixed=sublime.isDefined(footer_fixed)?footer_fixed:true;top_sticky=sublime.isDefined(top_sticky)?top_sticky:true;var adTopSticky=!!Number(footer_fixed)&&!!Number(top_sticky);return sublime.isDefined(topSticky)?topSticky:adTopSticky;};function displayPanel(){applyOrientationClassPanel();checkViewPortMetaPanel();log.info('sublime.display.mobile.panel');sublime.analytics.setPixels(347,pixelsPanel);setPixelSwipeMacroPanel();if(!isPortrait()){return;}
sublime.hook.call('step.impression.before');sublime.display.addCreativeContainer();addMobileCss();sublime.display.mobile.panel.setupZoneAd();sublime.analytics.fire(347,'topView');setUpPanel();sublime.hook.call('step.impression.after');}
function addTopCloseButton(){var closeButton=document.createElement('div');closeButton.className='sublime-mobile-top-close sublime-hidden';closeButton.innerHTML='';components.close_button=closeButton;closeButton.addEventListener('click',function(e){e.stopPropagation();e.preventDefault();isTopAdClosed=true;var topContainer=components.top;var yPos=sublime.window.pageYOffset;if(yPos>topContainer.style.height){topContainer.style.left=0;}else{topContainer.style.left=topContainer.clientWidth+'px';}
sublime.timer.setTimeout(function(){closeButton.classList.add('sublime-hidden');topContainer.classList.remove('sublime-top-fixed');components.arrowContainer.classList.remove('sublime-top-fixed');},550);});components.top.appendChild(closeButton);return closeButton;}
sublime.display.mobile.panel.openClosePanel=function(action){sublime.document.body.classList.add('sublime-transition');moveArrow();sublime.timer.setTimeout(function(){sublime.document.body.classList.remove('sublime-transition');},200);if(action==='close'){sublime.hook.call('event.mobile.closePanel');}else{sublime.hook.call('event.mobile.openPanel');}};sublime.display.mobile.panel.setupZoneAd=function(){sublime.hook.call('step.setupZoneAd.before');if(sublime.zone.mobilecss){sublime.display.addCss(sublime.zone.mobilecss);}
if(sublime.zone.mobilejs){sublime.applyJs(sublime.zone.mobilejs);}
if(creativeAd.mobile_setup.css){sublime.display.addCss(creativeAd.mobile_setup.css);}
if(creativeAd.mobile_setup.js){sublime.applyJs(sublime.ad.mobile_setup.js);}
if(creativeAd.html){creativeAd.html=sublime.macros.replace(creativeAd.html,creativeAd);}
sublime.hook.call('step.setupZoneAd.after');};sublime.display.mobile.panel.moveBottom=function(selector,positionInside){positionInside=typeof(positionInside)==='undefined'?false:positionInside;if(!selector){sublime.document.body.insertBefore(components.bottom,sublime.document.body.lastChild);sublime.hook.call('step.mobile.bottomReady');return;}
var el=sublime.document.querySelector(selector);if(!el){log.warn('Mobile : no element in moveBottom');return;}
if(positionInside){el.appendChild(components.bottom);}else{el.parentNode.insertBefore(components.bottom,el.nextSibling);}
sublime.hook.call('step.mobile.bottomReady');};sublime.display.mobile.panel.isArrow=function(element){return element.id==='sublime-mobile-panel-arrow'||element.id==='pathIdD';};sublime.display.mobile.panel.getComponent=function(componentKey){return components[componentKey];};sublime.display.mobile.panel.getComponents=function(){return components;};sublime.display.mobile.panel.setTopSticky=function(sticky){topSticky=sticky;};sublime.display.mobile.panel.setNoSwipeElements=function(elements){if(!sublime.isArray(elements)){log.warn('Set no swipe : elements must be an array');return;}
noSwipeElements=elements;};function checkViewPortMetaPanel(){var viewport=sublime.document.querySelector('meta[name="viewport"]');if(!viewport){viewport=sublime.document.createElement('meta');viewport.id='sublime-viewport';viewport.name='viewport';sublime.document.querySelector('head').appendChild(viewport);}
viewport.content='width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0';}
function computeOrientation(){orientation=(sublime.window.innerHeight<sublime.window.innerWidth)?'landscape':'portrait';}
function applyOrientationClassPanel(){computeOrientation();sublime.document.body.classList.remove('sublime-portrait','sublime-landscape');sublime.document.body.classList.add('sublime-'+orientation);}
function isPortrait(){computeOrientation();return orientation==='portrait';}
function controlBackButton(){history.pushState("sublime",null,null);sublime.window.onpopstate=function(){closePanel();};}
function setUpPanel(){components.top=appendComponentTop(creativeAd.mobile_setup.top);components.panel=appendComponentPanel(creativeAd.mobile_setup.panel);components.panel.style.top=sublime.window.scrollY+'px';components.bottom=buildComponentBottom(creativeAd.mobile_setup.bottom);components.arrow=appendArrow(sublime.display.getCreativeContainer(),20);components.positionIndicator=appendPositionIndicator();svgArrowHeight=components.arrow.getBBox().height;components.ayadsHtml=sublime.document.querySelector('#ayads-html');if(topSticky){addTopCloseButton();components.top.classList.add('sublime-top-fixed');components.topImage.classList.add('sublime-top-fixed');components.arrowContainer.classList.add('sublime-top-fixed');}
sublime.display.mobile.panel.moveBottom(sublime.zone.mobile_bottom_selector,sublime.zone.mobile_bottom_append_position);sublime.hook.register({namespace:'event.mobile.closePanel',callback:closePanel,multiple:true});sublime.hook.register({namespace:'event.mobile.openPanel',callback:openPanel,multiple:true});sublime.hook.register({namespace:'event.mobile.clickTop',callback:handleTopClick,multiple:true});sublime.hook.register({namespace:'event.mobile.clickBottom',callback:handleBottomClick,multiple:true});sublime.hook.register({namespace:'step.mobile.panelReady',callback:appendIframeInsidePanel,multiple:false});addWindowEvents();}
function setPixelSwipeMacroPanel(){if(!sublime.isUrl(creativeAd.swipe_macro)){return;}
var pixels={'panelView.swipeMacro':{slot:'panelView.swipeMacro',url:creativeAd.swipe_macro,repeat:3}};sublime.analytics.setPixels(347,pixels);}
function addMobileCss(){var css='body { position: relative !important; overflow-x: hidden !important; }'+'.sublime-transition { transition: transform 0.2s !important; }'+'.sublime-transition #sublime-position-indicator-block { transition: transform 0.2s, 300ms opacity ease, 300ms visibility ease !important; }'+'#pathIdD { transform:rotate(0deg);-webkit-transform:rotate(0deg) }'+'@media (orientation: landscape){#ayads-html{display:none} body { padding-top:0 !important;} }'+'html { overflow-x:initial !important; overflow-y: initial !important; }'+'body.sublime-panel-opened { overflow:hidden !important; overflow-scrolling:auto;-webkit-overflow-scrolling:auto; }'+'body.sublime-panel-opening { overflow:hidden !important; overflow-scrolling:auto;-webkit-overflow-scrolling:auto; }'+'.sublime-mobile-container { background-size: contain; background: transparent url(\'https://cdn.ayads.co/creatives/loading.gif\') no-repeat 50% 50%; cursor: pointer !important; left: 0 ; overflow:hidden !important; position: absolute !important; width:100%; }'+'.sublime-mobile-type-video { height: 100% !important; object-fit: cover !important; }'+'body.sublime-landscape .sublime-mobile-type-video { object-fit: none !important; }'+'#sublime-mobile-top-container { top: 0 !important; transform: translate(0, 0); z-index: 1 !important; width:100%; overflow: hidden; }'+'#sublime-mobile-top-image { width:100%; background-size: cover; height: 100%; }'+'.sublime-mobile-top-close{ z-index: 3; position: absolute; width: 25px; height: 25px; top: 4px; right: 4px; background-size: contain; background-repeat: no-repeat; background-image: url(https://cdn.ayads.co/creatives/commons/close-up.svg); }'+'.sublime-mobile-top-close.sublime-hidden{ display: none !important; }'+'#sublime-mobile-panel-container { box-shadow: inset 25px 0px 20px -16px rgba(0,0,0,0.5);height: 100%; position: fixed !important; top: 0; left: 100%; width: 100%; z-index: 1000000 !important; overflow: hidden !important; }'+'#sublime-mobile-panel-img { position: absolute !important; left: 50% !important; top: 50% !important; height: 100% !important; width: auto !important; -webkit-transform: translate(-50%,-50%) !important; -ms-transform: translate(-50%,-50%) !important; transform: translate(-50%,-50%); max-width: none; }'+'#sublime-mobile-bottom-container { box-shadow: 0px -12px 25px -2px rgba(0, 0, 0, 0.5);background-size: cover; }'+'#sublime-mobile-bottom-container.sublime-fixed-footer-option {  transition:300ms transform ease;transform:translate3d(0,0,0);position:fixed !important; bottom:0px !important; width:100% !important; z-index:10000; }'+'.sublime-hide{ display: none; }'+'#sublime-mobile-top-container{ transition: left .5s ease-in; }'+'#sublime-mobile-top-container.sublime-top-fixed{ z-index: 15000000 !important; position: fixed !important; }'+'#sublime-mobile-top-container::after { content: ""; display: block;width: 100%;bottom: 0;height: 0;box-shadow: 0 0 13px 11px rgba(0,0,0,0.5);position: absolute;z-index: 1; }'+'#sublime-mobile-top-image.sublime-top-fixed{ transform: translate3d(0px, 0px, 0px) !important; }'+'#sublime-mobile-top-img { height: auto !important; max-width: 100% !important; width:100% !important; }'+'#sublime-mobile-bottom-img { height: auto !important; max-width: 100% !important; width:100% !important; }'+'#sublime-mobile-panel-close { color: white !important; cursor: pointer !important; font-size: 5vw !important; padding: 10px 15px !important; position: absolute !important; right: 20px !important; top: 20px !important; z-index: 10 !important; }'+'.sublime-indicator-container { position: absolute !important; left: 0; right: 0; bottom: 0; background: rgba(0, 0, 0, .7); color: #fff; height: 6vh; line-height: 6vh; text-align: center; }'+'.sublime-indicator-container.hide { display: none; }'+'.sublime-indicator-text { font-family: sans-serif; margin: 0; text-transform: uppercase; font-size: 2.3vh; height: 100%; display: inline-block; vertical-align: top; }'+'#sublime-mobile-panel-swipe-icon { width: 3.3vh; display: inline; height: 100%; margin-right: 3vw; }'+'#sublime-mobile-panel-swipe-icon path { fill: #ffffff; }'+'#sublime-position-indicator-block { width: 100%; height: 25px; position: fixed!important; top: 0; left: 0; z-index: 1000001; opacity: 1; visibility: visible; transition: 300ms opacity ease, 300ms visibility ease; }'+'#sublime-position-indicator-block.hide { opacity: 0; visibility: hidden; }'+'#sublime-position-indicator-container { width: 50px; height: 15px; margin: 5px auto; background: rgba(0, 0, 0, .7); border-radius: 14px; text-align: center; border: 1px solid rgba(255, 255, 255, .7); }'+'.sublime-position-indicator { width: 5px; height: 5px; border-radius: 50%; display: inline-block; background: #ffffff; transform-origin: center; vertical-align: top; margin-top: 5px; }'+'#sublime-position-indicator-left { margin-right: 5px; width: 7px; height: 7px; margin-top: 4px; }'+'.sublime-panel-opened #sublime-position-indicator-left { width: 5px; height: 5px; margin-top: 5px; }'+'.sublime-panel-opened #sublime-position-indicator-right { width: 7px; height: 7px; margin-top: 4px; }'+'#sublime-mobile-panel-arrow-container { position: fixed !important; right:0; top: 50%; border: 1px solid rgba(255, 255, 255, .7); border-right: none; z-index: 10001 !important; background: rgba(0, 0, 0, .7); -webkit-transform-origin: 50% 50%; -moz-transform-origin: 50% 50%; -ms-transform-origin: 50% 50%; -o-transform-origin: 50% 50%; transform-origin: 50% 50%; padding: 10px 5px 10px 10px; border-radius: 50px 0 0 50px; }'+'#sublime-mobile-panel-arrow-container.hide { display:none; }'+'#sublime-mobile-panel-arrow-container{ transition: margin .5s ease-in; }'+'#sublime-mobile-panel-arrow-container.sublime-top-fixed{ margin-right: -50px; }'+'.sublime-panel-opened #sublime-mobile-panel-arrow-container{ transition: margin .5s ease-in; }'+'.sublime-panel-opened #sublime-mobile-panel-arrow-container.sublime-top-fixed{ margin-right: 0px; }'+'#sublime-mobile-panel-arrow { display:block; fill: #fff; }';sublime.display.addCss(css);}
function createComponentContainer(componentKey){var container=sublime.document.createElement('div');container.id='sublime-mobile-'+componentKey+'-container';container.className='sublime-mobile-container';container.style.backgroundColor=creativeAd.color;return container;}
function changeComponentBackground(component,container,callback){var mediaHeight=0;container.style.backgroundImage='url(\''+component.src+'\')';var image=new Image();image.src=component.src;image.onload=function(){mediaHeight=parseInt(image.height / image.width*sublime.document.body.clientWidth);container.style.backgroundSize='cover';callback.call(this,mediaHeight);};}
function appendComponentTop(component){var container=createComponentContainer(component.key);var image=sublime.document.createElement('div');image.id='sublime-mobile-top-image';components.topImage=image;changeComponentBackground(component,image,function(mediaHeight){container.style.background='transparent';sublime.document.body.style.setProperty('padding-top',mediaHeight+'px');container.style.height=mediaHeight+'px';container.appendChild(image);sublime.display.getCreativeContainer().appendChild(container);sublime.hook.call('step.mobile.topReady');});container.addEventListener('click',function(){sublime.hook.call('event.mobile.clickTop');});return container;}
function appendComponentPanel(component){var container=createComponentContainer(component.key);var indicationContainer=createIndicator();changeComponentBackground(component,container,function(){container.style.height=sublime.window.innerHeight+'px';container.appendChild(indicationContainer);sublime.display.getCreativeContainer().appendChild(container);sublime.hook.call('step.mobile.panelReady');});container.onclick=handlePanelClick;return container;}
function buildComponentBottom(component){var container=createComponentContainer(component.key);changeComponentBackground(component,container,function(mediaHeight){container.style.height=mediaHeight+'px';componentBottomHeight=mediaHeight;});container.addEventListener('click',function(){sublime.hook.call('event.mobile.clickBottom');});return container;}
function appendArrow(parentElement,width,arrowAttrs){var prop;var defaultWidth=30;width=width?width:defaultWidth;arrowAttrs=arrowAttrs?arrowAttrs:{};var svgNS=null;var container=sublime.document.createElement('div');container.id='sublime-mobile-panel-arrow-container';var svg=sublime.document.createElementNS("http://www.w3.org/2000/svg","svg");svg.setAttributeNS(svgNS,"viewBox","0 0 24 37");svg.id='sublime-mobile-panel-arrow';var arrowPath=sublime.document.createElementNS("http://www.w3.org/2000/svg","path");arrowPath.setAttributeNS(svgNS,"id","pathIdD");arrowPath.setAttributeNS(svgNS,"d","M17.8,36.8c-1.2,0-2.4-0.5-3.3-1.4L1.3,21.5c-1.7-1.8-1.7-4.5,0-6.3L14.5,1.4c1.7-1.8,4.6-1.9,6.4-0.1 C22.7,3,22.8,5.9,21,7.8L10.9,18.4l10.2,10.7c1.7,1.8,1.7,4.7-0.2,6.5C20,36.4,18.9,36.8,17.8,36.8L17.8,36.8z");sublime.display.addCss('.sublime-panel-opened #sublime-mobile-panel-arrow-container {transform: rotate(180deg); transform-origin: center; } #sublime-mobile-panel-arrow {width: '+width+'px;}.sublime-panel-opened #sublime-mobile-panel-arrow-container{right: -'+(width+15)+'px;z-index:9999999 !important}');for(prop in arrowAttrs){if(!arrowAttrs.hasOwnProperty(prop)){continue;}
arrowPath.setAttributeNS(svgNS,prop,arrowAttrs[prop]);}
svg.appendChild(arrowPath);container.appendChild(svg);parentElement.appendChild(container);components.arrowContainer=container;svg.addEventListener('click',handleArrowClick);return svg;}
function createIndicator(){var container=sublime.document.createElement('div');container.className='sublime-indicator-container';var p=sublime.document.createElement('p');p.className='sublime-indicator-text';p.innerHTML=i18n('swipeBack');container.appendChild(createSwipeBackIcon());container.appendChild(p);return container;}
function appendPositionIndicator(){var block=sublime.document.createElement('div');block.id='sublime-position-indicator-block';var container=sublime.document.createElement('div');container.id='sublime-position-indicator-container';var positions=['left','right'];positions.forEach(function(value){var indicator=sublime.document.createElement('div');indicator.id='sublime-position-indicator-'+value;indicator.className='sublime-position-indicator';container.appendChild(indicator);});block.appendChild(container);sublime.display.getCreativeContainer().appendChild(block);return block;}
function createSwipeBackIcon(){var svgNS=null;var svg=sublime.document.createElementNS("http://www.w3.org/2000/svg","svg");svg.setAttributeNS(svgNS,"viewBox","0 0 178 220");svg.id='sublime-mobile-panel-swipe-icon';var arrowPath=sublime.document.createElementNS("http://www.w3.org/2000/svg","path");arrowPath.setAttributeNS(svgNS,"id","icon-arrow-swipe");arrowPath.setAttributeNS(svgNS,"d","M78.7,45.2h70.2c0.1,0,0.1,0.1,0,0.1l-15.1,15.1c-2.9,2.9-3.1,7.9-0.1,10.7c1.4,1.3,3.1,1.9,4.9,1.9c1.8,0,3.7-0.7,5.1-2.1 l27-26.9c2.8-2.8,2.8-7.4,0-10.2L143,6.2c-3-3-7.9-2.8-10.6,0.5c-2.4,2.9-2,7.3,0.7,10l14,14v0.1h-68c-3.8,0-7.2,2.8-7.6,6.6 C71.1,41.7,74.5,45.2,78.7,45.2L78.7,45.2z");var handPath=sublime.document.createElementNS("http://www.w3.org/2000/svg","path");handPath.setAttributeNS(svgNS,"id","icon-hand-swipe");handPath.setAttributeNS(svgNS,"d","M162.7,115.9c-3.8-22.9-18.6-27-25.6-27.6c-5.3-6.9-12.9-10.7-21.6-10.7c-1.9,0-3.8,0.2-5.7,0.5c-5.2-6.2-12.3-9.5-20.4-9.5 c-6.1,0-11.5,1.9-15.2,4.1L59,25C55.9,15.1,47.7,8.9,37.6,8.9l0,0c-7.6,0-14.8,3.6-19.1,9.6c-4.2,5.8-5.3,13-3,20.2L34.6,99 c-2.7,1.6-5.1,3.7-7.1,6.2c-3.9,4.9-6.3,11.5-7,19.4c-1.1,11.8,2.8,24.9,11.6,39.1c5.9,9.5,12.5,17,15.2,19.8l9,21.1 c2.2,5.2,7.2,8.4,12.8,8.4H129c6.8,0,12.6-4.8,13.8-11.5c0-0.2,0-0.3,0.1-0.4l2.5-21c0.1-0.3,0.3-0.6,0.4-0.9 C159.1,148.5,164.7,127.8,162.7,115.9L162.7,115.9z M136.2,176.9c-0.1,0.3-0.2,0.6-0.3,1l-2.6,21.9c-0.4,2.1-2.2,3.5-4.3,3.5H69.1 c-1.7,0-3.3-0.9-4-2.6l-9.4-22c-0.2-0.5-0.5-0.9-0.9-1.3c-3.9-4-26.9-29.2-24.8-52.1c1.2-13.6,7.8-18,12.3-19.4 c2.3-0.7,3.5-3.2,2.8-5.4L24.6,35.9c-3.2-10.3,5-17.2,13-17.2c5.1,0,10.2,2.8,12.2,9.3l17.6,55.2c0.6,2,2.4,3.1,4.2,3.1 c1.3,0,2.5-0.5,3.4-1.7c0.7-1,1.6-1.9,2.6-2.7c2.3-1.8,6.8-3.7,11.7-3.7c5.1,0,10.5,2,14.5,8.1c0.8,1.3,2.2,2,3.7,2 c0.4,0,0.8-0.1,1.2-0.2c1.7-0.5,4.1-1,6.6-1c4.9,0,10.8,1.8,15.1,8.6c0.8,1.3,2.2,2.1,3.7,2.1h0.1c0.2,0,0.3,0,0.5,0 c5.2,0,15.5,2.3,18.4,19.7C155.9,133.7,138.2,172.2,136.2,176.9L136.2,176.9z");svg.appendChild(handPath);svg.appendChild(arrowPath);return svg;}
function addWindowEvents(){sublime.window.addEventListener('orientationchange',applyOrientationClassPanel);sublime.window.addEventListener('resize',handleResize);sublime.window.addEventListener('scroll',handleScroll);sublime.document.body.addEventListener('touchstart',sublime.display.mobile.panel.handleTouchStart);sublime.document.body.addEventListener('touchmove',sublime.display.mobile.panel.handleTouchMove);sublime.document.body.addEventListener('touchend',sublime.display.mobile.panel.handleTouchEnd);sublime.hook.register('event.cleanUp',function clearEventListeners(){sublime.window.removeEventListener('orientationchange',applyOrientationClassPanel);sublime.window.removeEventListener('resize',handleResize);sublime.window.removeEventListener('scroll',handleScroll);sublime.document.body.removeEventListener('touchstart',sublime.display.mobile.panel.handleTouchStart);sublime.document.body.removeEventListener('touchmove',sublime.display.mobile.panel.handleTouchMove);sublime.document.body.removeEventListener('touchend',sublime.display.mobile.panel.handleTouchEnd);});}
sublime.display.mobile.panel.handleTouchStart=function handleTouchStart(e){if(!canSwipe){return;}
if(e.touches&&e.touches.length>1){return false;}
if(!isPortrait()){return;}
for(var i=0,lgt=noSwipeElements.length;i<lgt;i++){var selector=noSwipeElements[i];if(e.target.closest(selector)){log.info('Swipe has been disable for these elements',noSwipeElements);return;}}
touchStartX=e.touches[0].screenX;touchStartY=e.touches[0].screenY;var transform=sublime.document.body.style.transform||'';transform=transform.split(', ')[0];startPercentX=(transform!=='')?-100:0;};sublime.display.mobile.panel.handleTouchMove=function handleTouchMove(e){if(e.touches&&e.touches.length>1){return false;}
if(!isPortrait()){return;}
touchCurrentX=(e.touches&&e.touches[0]?e.touches[0].screenX:touchCurrentX)||0;touchCurrentY=(e.touches&&e.touches[0]?e.touches[0].screenY:touchCurrentY)||0;if(!touchCurrentX||!touchCurrentY){return;}
var direction;isOpened=sublime.document.body.classList.contains('sublime-panel-opened');isOpening=sublime.document.body.classList.contains('sublime-panel-opening');touchDeltaX=touchCurrentX-touchStartX;touchDeltaY=touchCurrentY-touchStartY;percentY=(touchDeltaY / sublime.window.innerHeight)*100;if(Math.abs(touchDeltaY)>Math.abs(touchDeltaX)){if(isOpened||isOpening){return false;}
return;}
if(sublime.document.body.classList.contains('sublime-scrolling')){return false;}
sublime.document.body.classList.add('sublime-panel-opening');if(touchDeltaX>0){direction='right';}else{direction='left';}
if(direction==='right'&&!isOpened){return;}
if(direction==='left'&&isOpened){return;}
percentX=touchDeltaX /(sublime.window.innerWidth)*100;if(Math.abs(percentX)>100){percentX=(direction==='left')?-100:100;}
components.positionIndicator.style.top=sublime.window.scrollY+'px';movePanel(percentX);movePositionIndicator(percentX);moveArrow();};sublime.display.mobile.panel.handleTouchEnd=function handleTouchEnd(e){if(Math.abs(touchDeltaY)>Math.abs(touchDeltaX)){openClosePanelChecker();resetTouchVariables();return;}
if((percentX===undefined||percentX===null)&&(percentY===undefined||percentY===null)){resetTouchVariables();return;}
openClosePanelChecker();resetTouchVariables();e.preventDefault();};function handleResize(){computeOrientation();components.panel.style.height=sublime.window.innerHeight+'px';}
function showFooter(param){if(param){components.bottom.style.transform='translate3d(0,0,0)';sublime.analytics.fire(347,'bottomView');}else{components.bottom.style.transform='translate3d(0,'+(componentBottomHeight+25)+'px, 0)';}}
function handleScroll(){if(topSticky){if(sublime.display.mobile.panel.isOnTopOfPage()){components.close_button.classList.add('sublime-hidden');components.top.style.left=0;}else if(!sublime.display.mobile.panel.isOnPanel()&&!sublime.display.mobile.panel.isTopAdClosed()){components.close_button.classList.remove('sublime-hidden');}}
components.panel.style.top=sublime.window.scrollY+'px';if(isOpened||isOpening){moveArrow();}
var windowHeight=Math.max(sublime.document.body.scrollHeight,sublime.document.body.offsetHeight,sublime.document.body.parentNode.clientHeight),bottomHeight=components.bottom.clientHeight,footerFixedClass=components.bottom.classList.contains('sublime-fixed-footer-option'),isViewabilityBoosted=components.bottom.classList.contains('sublime-viewability-behaviour');if(!sublime.zone.mobile_setup){sublime.zone.mobile_setup={};sublime.zone.mobile_setup.footer_fixed=0;}
var footerFixed=creativeAd.mobile_setup.footer_fixed&&sublime.zone.mobile_setup.footer_fixed;if(!footerFixedClass&&footerFixed){components.bottom.classList.add('sublime-fixed-footer-option');}
if(hideIndicatorTimeout){sublime.timer.clearTimeout(hideIndicatorTimeout);hideIndicatorTimeout=null;}
if(sublime.window.scrollY>components.top.clientHeight){if(!isOpened||!isOpening){if(!footerFixed){components.positionIndicator.classList.add('hide');}else if(lastScrollPosition-sublime.window.scrollY>50){showFooter(true);components.arrowContainer.classList.remove('hide');components.positionIndicator.classList.remove('hide');}else if(lastScrollPosition-sublime.window.scrollY<0){if(!isViewabilityBoosted){showFooter(false);}
components.arrowContainer.classList.add('hide');components.positionIndicator.classList.add('hide');}}else{components.positionIndicator.classList.remove('hide');}}else{components.positionIndicator.classList.remove('hide');components.arrowContainer.classList.remove('hide');if(footerFixed){showFooter(false);}
canSwipe=true;}
sublime.timer.setTimeout(function(){lastScrollPosition=sublime.window.scrollY;},100);if(windowHeight-bottomHeight<sublime.window.innerHeight+sublime.window.scrollY){if(footerFixed){canSwipe=true;sublime.document.body.style.padding=componentBottomHeight+'px 0px';components.bottom.style.transform='translate3d(0,0,0)';}
sublime.analytics.fire(347,'bottomView');components.positionIndicator.classList.remove('hide');components.arrowContainer.classList.remove('hide');}
handleParallax();sublime.document.body.classList.add('sublime-scrolling');var delay=200;if(timeoutScroll){sublime.timer.clearTimeout(timeoutScroll);}
timeoutScroll=sublime.timer.setTimeout(function(){sublime.document.body.classList.remove('sublime-scrolling');},delay);}
function handleParallax(){var val=sublime.window.scrollY / 2;components.topImage.style.transform='translate3d(0, '+val+'px, 0)';}
function handleArrowClick(e){e.preventDefault();e.stopPropagation();if(sublime.document.body.classList.contains('sublime-panel-opened')){sublime.display.mobile.panel.openClosePanel('close');}else{sublime.display.mobile.panel.openClosePanel('open');}}
function handleTopClick(){sublime.analytics.fire(347,'click');sublime.window.open(sublime.adServer.clickurlizeAntenna(creativeAd.url,'mct'));}
function handleBottomClick(){sublime.analytics.fire(347,'click');sublime.window.open(sublime.adServer.clickurlizeAntenna(creativeAd.url,'mcb'));}
function handlePanelClick(){sublime.analytics.fire(347,'click');sublime.hook.call('event.mobile.clickPanel');sublime.window.open(sublime.adServer.clickurlizeAntenna(creativeAd.url,'mcp'));}
function appendIframeInsidePanel(){if(sublime.isEmpty(creativeAd.html)){return;}
if(sublime.inArray(creativeAd.html_usage,['iframe-lazy','iframe','cross-domain-iframe'])){var i=sublime.document.createElement('iframe');i.id=sublime.env('sublime_prefix')+'-rich-media';i.name=sublime.env('sublime_prefix')+'-rich-media';i.height='94%';i.width='100%';i.style.borderWidth='0';if(creativeAd.html_usage==='cross-domain-iframe'){i.src=sublime.env('sublime_url')+'ad/'+creativeAd.id+'/iframe';components.panel.appendChild(i);return;}
if(creativeAd.html_usage==='iframe'){writeToIframeAndAppendToPanelContent(i,creativeAd.html);return;}
if(creativeAd.html_usage==='iframe-lazy'){sublime.hook.register({namespace:'event.mobile.openPanel',callback:function(){writeToIframeAndAppendToPanelContent(i,creativeAd.html);},multiple:false});return;}}else{sublime.display.writeToContainer(creativeAd.html,components.panel.id);}}
function movePanel(percentX){sublime.document.body.style.transform='translate3d('+(percentX+startPercentX)+'%, 0, 0)';}
function movePositionIndicator(percentX){components.positionIndicator.style.transform='translate3d('+(-(percentX+startPercentX))+'%, 0, 0)';}
function openClosePanelChecker(){if(isOpened){if(Math.abs(percentX)>30){sublime.display.mobile.panel.openClosePanel('close');}else{sublime.display.mobile.panel.openClosePanel('open');}}else if(isOpening){if(Math.abs(percentX)>30){sublime.display.mobile.panel.openClosePanel('open');}else{sublime.display.mobile.panel.openClosePanel('close');}}}
function handlePositionIndicatorsOnPanelClose(){components.positionIndicator.style.transform='translate3d(0, 0, 0)';components.positionIndicator.style.top='0';if(sublime.window.scrollY>components.top.clientHeight){hideIndicatorTimeout=sublime.timer.setTimeout(function(){components.positionIndicator.classList.add('hide');},1000);}}
function handlePositionIndicatorsOnPanelOpen(){components.positionIndicator.style.transform='translate3d(100%, 0, 0)';components.positionIndicator.classList.remove('hide');if(hideIndicatorTimeout){sublime.timer.clearTimeout(hideIndicatorTimeout);hideIndicatorTimeout=null;}}
function closePanel(){sublime.document.body.style.transform='translate3d(0, 0, 0)';handlePositionIndicatorsOnPanelClose();recenterArrow();stepMobilePanelClose();sublime.document.body.classList.remove('sublime-panel-opened');sublime.document.body.classList.remove('sublime-panel-opening');isOpened=false;isOpening=false;isOnPanel=false;sublime.document.body.style.transform='';}
function openPanel(){isOnPanel=true;sublime.document.body.style.transform='translate3d(-100%, 0, 0)';sublime.document.body.classList.add('sublime-panel-opened');handlePositionIndicatorsOnPanelOpen();stepMobilePanelOpen();controlBackButton();}
function moveArrow(){components.arrowContainer.style.top=(sublime.window.scrollY+(sublime.window.innerHeight / 2-(svgArrowHeight / 2)))+'px';}
function recenterArrow(){components.arrowContainer.style.top=(sublime.window.innerHeight / 2-(svgArrowHeight / 2))+'px';}
function stepMobilePanelOpen(){elapsedSinceLastCall('mobilePanel');sublime.analytics.fire(347,'panelView');if(timeElapsedOnPanel<1000){timeout1s=sublime.timer.setTimeout(function(){sublime.analytics.fire(347,'panelViewSec1');},1000-timeElapsedOnPanel);}
if(timeElapsedOnPanel<3000){timeout1s=sublime.timer.setTimeout(function(){sublime.analytics.fire(347,'panelViewSec3');},3000-timeElapsedOnPanel);}}
function stepMobilePanelClose(){if(!isOpened){return;}
timeElapsedOnPanel+=elapsedSinceLastCall('mobilePanel');if(timeout1s){sublime.timer.clearTimeout(timeout1s);}
if(timeout3s){sublime.timer.clearTimeout(timeout3s);}}
function resetTouchVariables(){touchStartY=0;touchStartX=0;percentX=null;percentY=null;touchDeltaY=0;touchDeltaX=0;}
function writeToIframeAndAppendToPanelContent(i,html){components.panel.appendChild(i);html+='<script>var inDapIF = true;</script>';var iDoc=i.contentDocument;iDoc.open();iDoc.write('<!doctype html><html><body style="margin:0">'+html+'</body></html>');iDoc.close();}
var pixelsPanel={topView:{inherit:'_commonSkinz',qs:{e:'mtv'}},bottomView:{inherit:'_commonSkinz',qs:{e:'mbv'}},panelView:{inherit:'_commonSkinz',qs:{e:'mp0'}},panelViewSec1:{inherit:'_commonSkinz',qs:{e:'mp1'}},panelViewSec3:{inherit:'_commonSkinz',qs:{e:'mp3'}}};sublime.helpers.createNamespace('sublime.display.mobile.panel.mskinz');sublime.display.mobile.panel.mskinz.adIsReady=sublime.display.mobile.panel.adIsReady;sublime.display.mobile.panel.mskinz.render=sublime.display.mobile.panel.render;sublime.display.mobile.setNoSwipeElements=sublime.display.mobile.panel.setNoSwipeElements;sublime.display.mobile.getComponent=sublime.display.mobile.panel.getComponent;sublime.display.mobile.moveBottom=sublime.display.mobile.panel.moveBottom;sublime.display.mobile.openClosePanel=sublime.display.mobile.panel.openClosePanel;sublime.helpers.createNamespace('sublime.display.mobile.panel.mskinzVideo');var VIDEO_CONTAINER='video_container',VIDEO='video',CLOSE_BUTTON='close_button',MUTE_BUTTON='mute_button',VIDEO_PROGRESS_BAR='video_progress_bar';var quartileNames=['start','firstQuartile','midpoint','thirdQuartile','complete'],components=[],triggeredQuartiles=[],isVideoFinished=false,hasBeenClicked=false;sublime.display.mobile.panel.mskinzVideo.adIsReady=function(ad){return sublime.display.mobile.panel.adIsReady(ad)&&ad.mobile_setup.top.hasOwnProperty('video');};sublime.display.mobile.panel.mskinzVideo.render=function(ad){sublime.analytics.setPixels(347,videoPixelsMskinzVideo);sublime.display.mobile.panel.setTopSticky(true);sublime.display.mobile.panel.render(ad);components=sublime.display.mobile.panel.getComponents();addMSkinVideoCss();var video=displayMSkinzVideo(ad.mobile_setup.top.video);addEventsMskinzVideo();video.play();};function displayMSkinzVideo(videoSrc){var videoContainer=createVideoContainer();var videoLoading=createVideoLoading();videoContainer.appendChild(videoLoading);var videoProgressBar=createVideoProgressBar();videoLoading.appendChild(videoProgressBar);var muteButton=createVideoMuteButton();videoContainer.appendChild(muteButton);var video=createVideo(videoSrc);videoContainer.insertBefore(video,videoContainer.firstChild);var topContainer=components.top;topContainer.appendChild(videoContainer);return video;}
function createVideoContainer(){var videoContainer=document.createElement('div');videoContainer.id='sublime-mobile-video-container';videoContainer.style.height='inherit';videoContainer.style.zIndex='2';components[VIDEO_CONTAINER]=videoContainer;return videoContainer;}
function createVideoLoading(){var videoLoading=document.createElement('div');videoLoading.className='sublime-mobile-loading-bar';return videoLoading;}
function createVideoProgressBar(){var videoLoadingProgress=document.createElement('div');videoLoadingProgress.className='sublime-mobile-loading-bar-progress';components[VIDEO_PROGRESS_BAR]=videoLoadingProgress;return videoLoadingProgress;}
function createVideoMuteButton(){var videoMute=document.createElement('div');videoMute.className='sublime-mobile-video-mute muteOn mute-animation';components[MUTE_BUTTON]=videoMute;videoMute.onclick=function(e){e.stopPropagation();e.preventDefault();var video=components[VIDEO];video.muted=!video.muted;videoMute.className='sublime-mobile-video-mute '+(video.muted?'muteOn':'muteOff');videoMute.classList.remove('mute-animation');};return videoMute;}
function createVideo(videoSrc){var video=sublime.window.document.createElement('video');video.id=sublime.display.elements.VIDEO_ID.mobile;video.src=videoSrc;video.controls=false;video.muted=true;video.loop=false;video.preload='auto';video.style.width='inherit';video.style.display='';video.setAttribute('playsinline','playsinline');video.setAttribute('muted','muted');components[VIDEO]=video;video.onclick=function(){sublime.display.mobile.panel.openClosePanel('open');};var videoLoadingProgress=components[VIDEO_PROGRESS_BAR];video.ontimeupdate=function(){var percentage=Math.abs((((video.duration-video.currentTime)/ video.duration)*100)-100);videoLoadingProgress.style.width=percentage+'%';sublime.creativeAd.video_duration=parseInt(video.duration,10);computeMetrics(video);};function createPlayControls(){var d=sublime.document;var container=d.getElementById('sublime-mobile-video-container');var controls=d.createElement('div');controls.id='sublime-mobile-video-play-controls';controls.className='sublime-mobile-video-play-controls';var playButton=d.createElement('div');playButton.id='sublime-mobile-video-buttons-play';playButton.className='play';controls.appendChild(playButton);var pauseButtonPulseCircle=d.createElement('div');pauseButtonPulseCircle.id='play-video-pulsar';controls.appendChild(pauseButtonPulseCircle);var vidOverlay=d.createElement('div');vidOverlay.id='sublime-mobile-video-overlay';container.appendChild(vidOverlay);controls.addEventListener('click',function(e){e.stopPropagation();e.preventDefault();video.play();d.getElementById('sublime-mobile-video-overlay').remove();d.getElementById('sublime-mobile-video-play-controls').remove();});container.appendChild(controls);}
video.onended=function(){isVideoFinished=true;createPlayControls();};video.addEventListener('canplaythrough',function(){sublime.analytics.fire(347,'videoCanplaythrough');});video.addEventListener('loadeddata',function(){sublime.analytics.fire(347,'videoLoadeddata');});video.addEventListener('playing',function(){sublime.analytics.fire(347,'videoPlaying');});return video;}
function removeTopContainerClickEventMskinzVideo(){sublime.hook.register({namespace:'event.mobile.clickTop',callback:sublime.noOp,only:true});}
function pauseAndMuteVideo(){hasBeenClicked=true;components[VIDEO].pause();}
function addEventsMskinzVideo(){removeTopContainerClickEventMskinzVideo();var videoContainer=components[VIDEO_CONTAINER],video=components[VIDEO],topContainer=components.top;sublime.hook.register('event.mobile.clickPanel',pauseAndMuteVideo);sublime.hook.register('event.mobile.clickBottom',pauseAndMuteVideo);sublime.hook.register('event.mobile.openPanel',function(){components.panel.appendChild(videoContainer);videoContainer.style.height=topContainer.clientHeight+'px';if(!isVideoFinished){video.play();}});sublime.hook.register('event.mobile.closePanel',function(){topContainer.appendChild(videoContainer);components.topImage.style.display='none';videoContainer.style.height='inherit';if(!isVideoFinished){var isVideoClosed=sublime.display.mobile.panel.isTopAdClosed();if(!isVideoClosed||(isVideoClosed&&sublime.display.mobile.panel.isOnTopOfPage())){video.play()}}});components[CLOSE_BUTTON].addEventListener('click',function(e){e.stopPropagation();e.preventDefault();var video=components[VIDEO];video.pause();});sublime.window.addEventListener('scroll',function(e){if(sublime.display.mobile.panel.isOnTopOfPage()){if(!isVideoFinished&&!hasBeenClicked){video.play();}}else if(!sublime.display.mobile.panel.isOnPanel()&&sublime.display.mobile.panel.isTopAdClosed()){video.pause();}});}
function getQuartile(currentTime,duration){var quartileLength=duration / 4;var unroundedQuartile=currentTime / quartileLength;return Math.floor(unroundedQuartile);}
function computeMetrics(video){if(!sublime.isDefined(video.currentTime)||!sublime.isDefined(video.duration)||!sublime.isNum(video.currentTime)||!sublime.isNum(video.duration)){log.warn('video.currentTime or video.duration is not defined, no metrics sent.');return;}
if(video.paused&&video.duration!==video.currentTime){log.warn('Video is paused, no metrics sent.');return;}
var quartile=getQuartile(video.currentTime,video.duration);if(quartile>4||triggeredQuartiles[quartile]){return;}
for(var index=0;index<quartile;index++){var quartileIndex='videoQ'+index;var pixels=sublime.analytics.getPixels();if(sublime.helpers.hasProperty(pixels,347+'.'+quartileIndex)&&pixels[347][quartileIndex].fired!==1){sublime.analytics.fire(347,quartileIndex);}}
sublime.analytics.fire(347,'videoQ'+quartile);var quartileName=quartileNames[quartile];sublime.hook.call('step.video.quartile'+quartile,{duration:video.duration,quartile:quartile,quartileName:quartileName,currentTime:video.currentTime});triggeredQuartiles[quartile]=true;}
var videoPixelsMskinzVideo={videoCanplaythrough:{inherit:'_commonSkinz',qs:{e:'dicpt'}},videoLoadeddata:{inherit:'_commonSkinz',qs:{e:'dild'}},videoPlaying:{inherit:'_commonSkinz',qs:{e:'dip'}},videoQ0:{inherit:'_videoQuartile',qs:{e:'q0'},addBrowserDimensions:true,addPageHeightDimension:true,},videoQ1:{inherit:'_videoQuartile',qs:{e:'q1'},addBrowserDimensions:true,addPageHeightDimension:true,},videoQ2:{inherit:'_videoQuartile',qs:{e:'q2'},addBrowserDimensions:true,addPageHeightDimension:true,},videoQ3:{inherit:'_videoQuartile',qs:{e:'q3'},addBrowserDimensions:true,addPageHeightDimension:true,},videoQ4:{inherit:'_videoQuartile',qs:{e:'q4'},addBrowserDimensions:true,addPageHeightDimension:true,}};function addMSkinVideoCss(){var css='#sublime-mobile-top-image{ display: none; }'+'.sublime-indicator-container{ display: none; line-height:0 }'+'#sublime-mobile-video { width: 100% }'+'.sublime-panel-opened #sublime-mobile-video{ margin-top:0px; }'+'#sublime-position-indicator-block{ display: none; }'+'#sublime-mobile-video-container{ position: absolute; top: 0; width: inherit; overflow: hidden; }'+'.sublime-mobile-video-mute{ position: absolute; width: 23px; height: 23px; bottom: 4px; left: 4px; background-size: contain; background-repeat: no-repeat;}'+'.mute-animation{animation-name: muteScale; animation-duration: 1s; animation-iteration-count: infinite; animation-direction: alternate; animation-timing-function: ease-in-out;}'+'.sublime-mobile-video-mute.muteOff{ background-image: url(https://cdn.ayads.co/creatives/commons/volume-up.svg)}'+'.sublime-mobile-video-mute.muteOn{ background-image: url(https://cdn.ayads.co/creatives/commons/volume-down.svg)}'+'@keyframes muteScale{ 0%{ transform: scale(1); } 50%{ transform: scale(1); } 100%{ transform: scale(1.1); } }'+'@keyframes countdownFixSafari{ 0%{ transform: scale(1); } 100%{ transform: scale(1); } }'+'.sublime-mobile-loading-bar{   position: absolute; bottom: 0; height: 3px; width: 100%; background-color: rgba(255, 255, 255); }'+'.sublime-mobile-loading-bar-progress{ position: relative; height: 3px; width: 0%; background-color: rgba(233, 83, 29); }'+'.sublime-mobile-video-play-controls {height:100%;width:100%;display:flex;justify-content:center;align-items:center;background:no-repeat center;position:absolute;background-size:contain;z-index:1;bottom:0;}'+'#sublime-mobile-video-buttons-play {height:37px;width:37px;background-image:url(https://cdn.ayads.co/creatives/commons/icon-play.svg)}'+'#play-video-pulsar{position:absolute;background:transparent;border:1px solid white;width:35px;border-radius:50%;height:35px;z-index:5;transform-origin:center;animation-name:play-video-pulsar;animation-duration:.5s;animation-iteration-count:infinite;animation-direction:alternate-reverse;animation-timing-function:cubic-bezier(0.4,0,1,1);}'+'@keyframes play-video-pulsar{ from {transform:scale(1.5);opacity:.2;} to {transform:scale(1.2);opacity:1;}}'+'#sublime-mobile-video-overlay {height:100%;width:100%;position:fixed;top:0;left:0;background-color:black;opacity:0.5}';sublime.display.addCss(css);}
sublime.helpers.createNamespace('sublime.display.mobile.panel.mskinzShop');var isFirstOpen=true;sublime.display.mobile.panel.mskinzShop.adIsReady=sublime.display.mobile.panel.adIsReady;sublime.display.mobile.panel.mskinzShop.render=function(ad){sublime.display.mobile.panel.setTopSticky(false);sublime.display.mobile.panel.render(ad);addMSkinShopCss();addEvents(ad);};function removeTopContainerClickEvent(){sublime.hook.register({namespace:'event.mobile.clickTop',callback:sublime.noOp,only:true});}
function removeBottomContainerClickEvent(){sublime.hook.register({namespace:'event.mobile.clickBottom',callback:sublime.noOp,only:true});}
function addEvents(ad){removeSwipeBackClickEvent();removeTopContainerClickEvent();removeBottomContainerClickEvent();sublime.hook.register('step.mobile.topReady',function(){var components=sublime.display.mobile.panel.getComponents();if(sublime.helpers.hasProperty(ad,'sspResponse.privacy.optout_image_url')&&sublime.helpers.hasProperty(ad,'sspResponse.privacy.optout_click_url')){var optoutImageUrl=ad.sspResponse.privacy.optout_image_url;var optoutClickUrl=ad.sspResponse.privacy.optout_click_url;appendAdChoice(components.ayadsHtml,optoutImageUrl,optoutClickUrl);appendAdChoice(components.bottom,optoutImageUrl,optoutClickUrl);appendAdChoice(components.panel,optoutImageUrl,optoutClickUrl);}
appendProductsList(components.top,ad.shopData,'top');appendProductsList(components.bottom,ad.shopData,'bottom');});sublime.hook.register('event.mobile.openPanel',function(){if(isFirstOpen){isFirstOpen=false;createPanelIframe(ad.shopData);}});}
function removeSwipeBackClickEvent(){var panel=sublime.display.mobile.panel.getComponent('panel');panel.onclick=function(){sublime.display.mobile.panel.openClosePanel('close');}}
function createPanelIframe(shopData){var iframe=top.document.createElement('iframe');iframe.id='sublime-iframe-criteo';iframe.setAttribute('frameborder','0');iframe.scrolling='no';iframe.width='1';iframe.height='1';iframe.style.cssText='border: 0px; width: 100%; height: calc(100% - 6vh); margin: 0px auto; display: block;';var css='@import url(https://fonts.googleapis.com/css?family=Source+Sans+Pro:300,400,600);'+'body {margin: 0; font-family: "Source Sans Pro", Helvetica, sans-serif;}'+'.container-criteo {height: 100%;}'+'.container-criteo img {width: 100%; display: block;}'+'.container-criteo .products-container {height: 90%;overflow-y: scroll;-webkit-overflow-scrolling:touch;}'+'.container-criteo .product {width: calc(50% - 2px); float: left; height: 33%; background-color: #fff; position: relative; text-align: center; border: 1px solid #c7c7c7; font-family: "Source Sans Pro", Helvetica, sans-serif !important;}'+'.container-criteo .product img {width: auto;max-height: 50%;margin: 0 auto;max-width: 100%; padding-top: 20px}'+'.container-criteo .product:first-child img {width: auto;max-height: 100%;margin: 0 auto;max-width: 100%; padding-top: 0;}'+'.container-criteo .product:first-child {background-size: contain; background-repeat: no-repeat; background-position: center;}'+'.container-criteo > .block-top {border-bottom: 1px solid #e0e0e0;}'+'.container-criteo .text-bottom {width: 30%; margin: calc((15% - 30px)/2) auto 0; height: 30px; text-align: center; line-height: 31px; position: relative; display: block; border: 2px solid #5b595a; color: #000; text-transform: uppercase; font-size: 12px; font-weight: 700; cursor: default;}'+'.container-criteo > div[class^="block"] {height: 10%;width: 100%; background-repeat: no-repeat; background-size: auto 100%; background-position: center top; background-color: #f9f9f9;}'+'.container-criteo .block-bottom {position: absolute; bottom: 0; z-index: 1; box-shadow: 0 0 13px 11px rgba(0,0,0,0.5);}'+'.container-criteo .product .product-infos {position: absolute;bottom: 5%;margin: 0 auto;left: 0;right: 0;}'+'.container-criteo .product .description {font-size: 11px;margin: 2px 0; display: none;}'+'.container-criteo .product .title {font-size: 11px; text-transform: uppercase; margin: 5px 0 2px;}'+'.sublime-adchoice { height: 20px !important; width: 20px !important; background-color: #fff; position: absolute; left: 0; top: 0; z-index: 10000000; }'+'.container-criteo .product .price {font-size: 12px; font-weight: bold;margin: 2px 0 5px;}';var iframeHtml='<style>'+css+'</style>';var panel=sublime.display.mobile.panel.getComponent('panel');panel.appendChild(iframe);iframe.contentWindow.document.open();iframe.contentWindow.document.write(iframeHtml);iframe.contentWindow.document.close();iframe.contentWindow.document.addEventListener('touchstart',sublime.display.mobile.panel.handleTouchStart);iframe.contentWindow.document.addEventListener('touchmove',sublime.display.mobile.panel.handleTouchMove);iframe.contentWindow.document.addEventListener('touchend',sublime.display.mobile.panel.handleTouchEnd);appendProductsList(iframe.contentWindow.document.body,shopData,'panel');}
function bindRedirectUrl(element,url,eventName){element.addEventListener('click',function(e){sublime.analytics.fire(347,'click');sublime.window.open(sublime.adServer.clickurlizeAntenna(url,eventName));e.stopPropagation();});}
function createElement(elementType,cssNames){var element=sublime.window.document.createElement(elementType);if(cssNames instanceof Array){cssNames.forEach(function(cssName){element.classList.add(cssName);});}else{element.classList.add(cssNames);}
return element;}
function appendElement(sibling,elementType,cssNames){var element=createElement(elementType,cssNames);sibling.appendChild(element);return element;}
function appendAdChoice(sibling,optoutImageUrl,optoutClickUrl){var adChoice=appendElement(sibling,'img','sublime-adchoice');adChoice.style.backgroundImage='url('+optoutImageUrl+')';adChoice.addEventListener('click',function(){sublime.window.open(optoutClickUrl);});}
function appendLogoContainer(parent,url,logo,eventName){var logoDiv=appendElement(parent,'div',['product']);bindRedirectUrl(logoDiv,url,eventName);logoDiv.style="background-image: url("+logo+")";return logoDiv;}
function appendDiscoverContainer(sibling,url){var discoverContainer=appendElement(sibling,'div','block-bottom');bindRedirectUrl(discoverContainer,url,'mcp');var discoverPanel=appendElement(discoverContainer,'p','text-bottom');discoverPanel.innerHTML=i18n('shopDiscover');return discoverContainer;}
function appendProductDiv(sibling,index,product,eventName){var productDiv=appendElement(sibling,'div',['product','product'+index]);bindRedirectUrl(productDiv,product.url,eventName);var image=appendElement(productDiv,'img','image-product');image.src=product.image;var infoContainer=appendElement(productDiv,'div','product-infos');var name=appendElement(infoContainer,'h4','title');name.innerHTML=product.name;var description=appendElement(infoContainer,'p','description');description.innerHTML=product.description;var price=appendElement(infoContainer,'p','price');price.innerHTML=product.price;return productDiv;}
function appendCriteoContainer(sibling){return appendElement(sibling,'div','container-criteo');}
function appendProductsContainer(parent){var productsContainer=createElement('div','products-container');parent.insertBefore(productsContainer,parent.lastChild);return productsContainer;}
function appendProductsList(sibling,shopData,position){var criteoContainer=appendCriteoContainer(sibling);var eventName='mc'+position.substring(0,1);var limitItems=3;if(position==='panel'){limitItems=5;appendDiscoverContainer(criteoContainer,shopData.url);}
var productsContainer=appendProductsContainer(criteoContainer);appendLogoContainer(productsContainer,shopData.url,shopData.logo,eventName);for(var i=0;i<limitItems;i++){var product=shopData.products[i%shopData.products.length];appendProductDiv(productsContainer,i+1,product,eventName);}}
function addMSkinShopCss(){var css='@import url(https://fonts.googleapis.com/css?family=Source+Sans+Pro:300,400,600,700);'+'#sublime-mobile-panel-container { box-shadow: none !important; }'+'.container-criteo .product img { width: auto; max-height: 60px; margin: 0 auto; max-width: 100%; }'+'.container-criteo .products-container { width: 100%; position: absolute; bottom: 25px; max-height: calc(60% - 10px); height: 50% }'+'.container-criteo .product { bottom: 0; width: 25%; height: 100%; box-sizing: border-box; float: left; text-align: center; font-size: 9px; padding: 0; background-color: #fff; }'+'.container-criteo .product:not(:first-child) { border-left: 1px solid #d8d8d8; padding: 4px 8px; }'+'.container-criteo .product:first-child {background-size: contain; background-repeat: no-repeat; background-position: center;}'+'.container-criteo .product .description { display: none; }'+'.container-criteo .product .title { margin-bottom: 5px; text-transform: uppercase; margin-top: 5px; -webkit-line-clamp: 2; max-height: 2em;}'+'.container-criteo .product .price { margin-top: 0; -webkit-line-clamp: 1; max-height: 1em;}'+'.container-criteo .product .title, .container-criteo .product .price { font-weight: bold; font-size: 9px; overflow: hidden; text-overflow: ellipsis; display: -webkit-box; -webkit-box-orient: vertical; }'+'.container-criteo .product h4, .container-criteo .product p { font-family: "Source Sans Pro", Helvetica, sans-serif; }'+'.sublime-adchoice { height: 20px !important; width: 20px !important; background-color: #fff; position: absolute; left: 0; top: 0; z-index: 10000000; background-position-y: 3px; }'+'.sublime-panel-opened #ayads-html > .sublime-adchoice { left: 100%; }';sublime.display.addCss(css);}
sublime.helpers.createNamespace('sublime.display.mobile.kargo');sublime.display.mobile.kargo.adIsReady=function adIsReady(ad){if(sublime.isEmpty(ad.html)){log.warn('adServer: Ad is not displayable, empty ad html');return false;}
return true;};sublime.display.mobile.kargo.render=function render(){if(sublime.isEmpty(sublime.creativeAd)||sublime.isEmpty(sublime.zone)){log.warn('adServer: Empty zone or creativeAd');return;}
log.info('sublime.display.mobile.kargo');sublime.hook.call('step.impression.before');setupZoneAdKargo();sublime.hook.call('step.impression.after');};var setupZoneAdKargo=function setupZoneAdKargo(){sublime.hook.call('step.setupZoneAd.before');if(sublime.isEmpty(sublime.creativeAd.html)){log.warn('adServer: Ad is not displayable, empty ad html');return;}
if(sublime.isObject(sublime.zone.sticky_setup)){if(sublime.zone.sticky_setup.css){sublime.display.addCss(sublime.zone.sticky_setup.css);}
if(sublime.zone.sticky_setup.js){sublime.applyJs(sublime.zone.sticky_setup.js);}}
var html=sublime.macros.replace(sublime.creativeAd.html,sublime.creativeAd);var divId=sublime.env('sublime_prefix')+'-kargo';sublime.write(html,{id:divId});sublime.display.addCreativeContainer();sublime.hook.call('step.setupZoneAd.after');};sublime.display=sublime.display||{};sublime.display.generic=sublime.display.generic||{};sublime.display.generic.adIsReady=function(ad){if(sublime.isEmpty(ad.html)){log.warn('adServer: Ad is not displayable, empty ad html');return false;}
return true;};sublime.display.generic.render=function(){log.info('sublime.display.generic');sublime.hook.call('step.impression.before');var ad=sublime.creativeAd,zone=sublime.zone;ad.noCookieMatch=zone.block_cookies;sublime.display.generic.setupZoneAd();sublime.hook.call('step.impression.after');};sublime.display.generic.setupZoneAd=function(){sublime.hook.call('step.setupZoneAd.before');var ad=sublime.creativeAd;if(sublime.isEmpty(ad.html)){return;}
var html=ad.html;html=sublime.macros.replace(html);var divId=sublime.env('sublime_prefix')+'-generic';sublime.write(html,{id:divId});sublime.hook.call('step.setupZoneAd.after');};sublime.passback={};sublime.passback.render=function(passbackScript,renderType){var divId=sublime.env('sublime_prefix')+'-passback';sublime.script_location=sublime.script_location||sublime.originWindow.document.querySelector('script[src*="sac.ayads.co/sublime"]')||sublime.originWindow.document.querySelector('script[src*="ads.ayads.co/ajs.php?zid="]');sublime.compat.toAyads();var globalVar=sublime.env('sublime_prefix');passbackScript='<script>window.'+globalVar+' = top.'+globalVar+';<\/script>'+passbackScript;if(!sublime.isDefined(sublime.script_location)||(sublime.script_location.parentElement&&sublime.script_location.parentElement.nodeName==='HEAD')){if(sublime.originWindow.document.body.firstChild){sublime.script_location=sublime.originWindow.document.body.firstChild;}else{sublime.script_location=sublime.originWindow.document.body;}}
if(sublime.isEmpty(sublime.script_location)){log.error('No script location to render passback: ',sublime.script_location);return null;}
var p=sublime.document.querySelectorAll('.ayads-passback');for(var i=0;i<p.length;i++){p[i].style.display='none';}
var iframe=sublime.write(passbackScript,{id:divId,targetElement:sublime.script_location,iframeAttributes:{class:'ayads-passback'}});if(renderType==='pullToTop'){pullToOriginWindow(iframe,sublime.script_location);}else if(renderType==='iframeResizeParent'){autoResizeIframe(iframe,true);}else if(renderType==='iframeResized'){autoResizeIframe(iframe);}
return iframe;};var autoResizeIframe=function(iframe,withParent){withParent=!!(withParent||0);iframe.addEventListener("load",function(){autoResizeIframeInterval(iframe);});var i=0,interval=sublime.timer.setInterval(function(){autoResizeIframeInterval(iframe,withParent);if(i>=50){sublime.timer.clearInterval(interval);}
i++;},100);};var autoResizeIframeInterval=function(iframe,withParent){withParent=!!(withParent||0);if(!iframe&&this){iframe=this;}
if(iframe.nodeName!=='IFRAME'||!iframe.contentWindow){log.warn("autoResizeIframe: passed argument isn't an iframe",iframe);return;}
var iframeDocument=iframe.contentWindow.document.body;iframeDocument.style.margin=0;iframe.style.border='0';var elementWidth,elementHeight;if(iframeDocument.getBoundingClientRect().height&&iframeDocument.getBoundingClientRect().width){elementWidth=iframeDocument.getBoundingClientRect().width;elementHeight=iframeDocument.getBoundingClientRect().height;}else{elementWidth=iframeDocument.offsetWidth;elementHeight=iframeDocument.offsetHeight;}
if(elementWidth<30&&iframeDocument.scrollWidth>30){elementWidth=iframeDocument.scrollWidth;}
if(elementHeight<30&&iframeDocument.scrollHeight>30){elementHeight=iframeDocument.scrollHeight;}
var isContentDisplayable=elementWidth>30&&elementHeight>30;if(!isContentDisplayable){elementWidth=1;elementHeight=1;}
if(withParent){checkIframeDegree(iframe,elementWidth,elementHeight);}else{applyIframeDimension(iframe,elementWidth,elementHeight);}};var checkIframeDegree=function(iframe,width,height){applyIframeDimension(iframe,width,height);var frameParent=sublime.originWindow.frameElement||false;if(!frameParent){return;}
applyIframeDimension(frameParent,width,height);var isAThirdDegreeIframe=frameParent&&(frameParent.id==='ayads-launcher')&&((sublime.originWindow.parent).frameElement);var thirdDegreIframe=isAThirdDegreeIframe?(sublime.originWindow.parent).frameElement:false;if(thirdDegreIframe){applyIframeDimension(thirdDegreIframe,width,height);}};var applyIframeDimension=function(iframe,width,height){iframe.width=width;iframe.style.width=width+'px';iframe.height=height;iframe.style.height=height+'px';iframe.style.border='0';iframe.style.margin='0 auto';if(iframe.id&&iframe.id.match(/^ayads-passback/)){return;}
iframe.style.display='block';};var pullToOriginWindow=function(iframe,scriptLocation){var element=iframe.contentDocument.body,elementsToMove=[],child,i;for(i=0;i<element.childNodes.length;i++){child=element.childNodes[i];if(child.tagName!=='SCRIPT'){elementsToMove.push(child);}}
elementsToMove.reverse();for(i=0;i<elementsToMove.length;i++){child=elementsToMove[i];if(scriptLocation.tagName==='BODY'){scriptLocation.appendChild(child);}else{scriptLocation.parentNode.insertBefore(child,scriptLocation.nextSibling);}}};sublime.adCollection={};sublime.ads=[{id:6580,priority:9,weight:10,zone_id:347,color:"#FFF",click_area:"double",creative_type:null,fixed:0,format:"skinz",html:"",html_usage:"raw",image:"",moat:0,mobile_setup:"",desktop_setup:"",name:"[SpaceFootSAS - RTB-PMP] Footeo #HC",script_url:"",ssp_id:"9528:17076:173584-68",ssp_name:"rubicon",top:220,type:"skinz",url:"",vast_url:"",video:"",video_autoplay:1,video_bg:"",viewability:0,category_id:null,end:"2038-01-19 04:14:02",campaign_id:1831,campaign_name:"[SSP:Rubicon PMP] SpacefootSAS",traffic_type:"pmp",images:{bg:""},supported_devices:["desktop"],cappings:{clicks:0,impressions:0,duration:0},header_bidding:false,originalUrl:""},{id:57710,priority:1,weight:10,zone_id:347,color:"#FFF",click_area:"double",creative_type:null,fixed:0,format:"skinz",html:"",html_usage:"raw",image:"",moat:0,mobile_setup:"",desktop_setup:"",name:"Pack Homme -15-34- Fifa",script_url:"",ssp_id:"",ssp_name:"",top:220,type:"skinz",url:"",vast_url:"",video:"",video_autoplay:1,video_bg:"",viewability:0,category_id:null,end:"2038-01-19 04:14:02",campaign_id:3389,campaign_name:"[SSP : Overviews] OV SSK Packs sans calques",traffic_type:"direct",images:{bg:""},supported_devices:["desktop"],cappings:{clicks:0,impressions:0,duration:0},header_bidding:false,originalUrl:""},{id:65447,priority:0,weight:10,zone_id:347,color:"#FFF",click_area:"double",creative_type:"html5 full skinz html5",fixed:0,format:"skinz",html:"<script>\n/*\nV.02\n*/\n/*List of Premium Advertiser*/\nvar premiumAdvertiser = {\n  \"laredoute.fr\": \"https://cdn.ayads.co/creatives/creative-65447/laredoute.fr.jpg?06\",\n  \"logic-immo.com\":\"https://cdn.ayads.co/creatives/creative-65447/logic-immo.com.jpg?06\",\n  \"vertbaudet.fr\": \"https://cdn.ayads.co/creatives/creative-65447/vertbaudet.fr.jpg?06\",\n  \"canalplus.fr\": \"https://cdn.ayads.co/creatives/creative-65447/canalplus.fr.jpg?06\",\n  \"sfr.fr\": \"https://cdn.ayads.co/creatives/creative-65447/sfr.fr.jpg?06\",\n  \"booking.com\": \"https://cdn.ayads.co/creatives/creative-65447/booking.com.jpg?06\"\n};\n\n/*First hook called, criteo called has been made*/\nsublime.hook.register(\'step.setupZoneAd.after\', function() {\n  /*alter Ad*/\n  if (sublime.creativeAd) {\n    var shopData = {\n      gutterWidth: 200,\n      repeatProducts: 7,\n      showCurrency: false,\n      /*If needed, should be separated from*/ \n      css: \'.sublime-ad-item-image {max-width: 200px; max-height: 200px;}\',\n      /*Disables privacy link*/\n      privacy: false\n    };\n    /*sublime.ad.shopData is filled with the remapped shopData\n    the data used*/ \n    console.log(\"shopData before \", sublime.creativeAd.shopData);\n    if (!sublime.creativeAd.shopData) {\n      sublime.creativeAd.shopData = {};\n    }\n    sublime.creativeAd.shopData = sublime.merge(sublime.creativeAd.shopData, shopData);\n    /*make sure the background isn\'t clickable*/\n    sublime.creativeAd.url = \'\';\n\n    /*Update background Image if it\'s premium advertisers*/\n    var advertiserDomain = sublime.creativeAd.sspResponse.advertiser.domain;\n\n    if (premiumAdvertiser.hasOwnProperty(advertiserDomain)) {\n      /*make sure the background is clickable*/\n      sublime.creativeAd.url = sublime.adServer.clickurlize(sublime.creativeAd.sspResponse.advertiser.logo_click_url);\n      /*hide advertiser logo and text*/\n      sublime.document.getElementById(\"criteo-logo\").style.display = \'none\';\n      sublime.document.getElementsByClassName(\'sublime-ad-top-texte\')[0].style.display = \'none\';\n\n      /*update the background url*/\n      sublime.creativeAd.images.bg = premiumAdvertiser[advertiserDomain];\n      sublime.document.getElementsByTagName(\'html\')[0].classList.add(\'ssk-fixed\');\n      sublime.document.getElementById(\'ayads-html\').classList.add(\'ssk-fixed\');\n\n      sublime.document.getElementById(\'ayads-html\').onclick = function(){\n        sublime.window.open(sublime.creativeAd.url, \'_blank\');\n      };\n    }\n\n  }\n});\n\nsublime.hook.register(\'step.impression.after\', function() {\n  /*Here default value for logo*/\n  var logoUrl = \'https://cdn.ayads.co/creatives/creative-19424/logo-annonceur-criteo.jpg\';\n  if (\n      sublime.creativeAd.sspResponse.advertiser\n      && sublime.creativeAd.sspResponse.advertiser.logo\n      && sublime.creativeAd.sspResponse.advertiser.logo.url\n  )\n  {\n    logoUrl = sublime.creativeAd.sspResponse.advertiser.logo.url;\n  }\n  var imgLogo = sublime.document.getElementById(\"criteo-logo\");\n  imgLogo.src = logoUrl;\n\n\n  /*Add the first product in the left wingz top the top*/\n  var firstProduct = sublime.document.querySelectorAll(\'#sublime-ad-shop-left .sublime-ad-item\')[0];\n  var masthead = sublime.document.getElementById(\'sskz-bigTitle\');\n  firstProduct.classList.add(\'sublime-ad-item-top\');\n  masthead.appendChild(firstProduct);\n\n  /*Add Adchoice in masthead*/\n  var adchoice = document.createElement(\'img\');\n  adchoice.style.backgroundImage = \'url(\'+sublime.creativeAd.sspResponse.privacy.optout_image_url+\')\';\n  adchoice.id = \"sublime-adchoice\";\n  masthead.appendChild(adchoice);\n  adchoice.onclick = function(){\n    sublime.window.open(sublime.creativeAd.sspResponse.privacy.optout_click_url, \'_blank\');\n  };\n\n  /*Position top of bigTitle*/\n  var htmlStyle = sublime.window.getComputedStyle(sublime.window.document.getElementsByTagName(\'html\')[0]);\n  var htmlMarginTop = parseInt(htmlStyle.marginTop);\n  var ayadsHtml = sublime.window.document.getElementById(\'ayads-html\');\n  var zoneScale = sublime.zone.scale;\n  ayadsHtml.style.top = (htmlMarginTop) + \'px\';\n  ayadsHtml.style.width = 1000 * zoneScale + \'px\';\n  ayadsHtml.style.height = 220 * zoneScale + \'px\';\n\n  /*Make sure the masthead is well placed depending on the htmlmargintop of the site*/\n  function observeMarginTop(){\n    var target = sublime.window.document.documentElement;\n    var config = { attributes: true, childList: true, characterData: true };\n    var observer = new MutationObserver(function(mutations) {\n        mutations.forEach(function(mutationRecord) {\n          htmlMarginTop = Math.ceil(parseInt(sublime.window.getComputedStyle(target,null).getPropertyValue(\"margin-top\")));\n          ayadsHtml.style.top = (htmlMarginTop) + \'px\';\n        });\n    });\n    observer.observe(target, config);\n  }\n  observeMarginTop();\n\n  /*Make sure the gutters are fixed on scroll*/\n  var fromTop = Math.ceil(220 * zoneScale + htmlMarginTop);\n  var leftWingz = sublime.window.document.getElementById(\'sublime-ad-shop-left\');\n  var rightWingz = sublime.window.document.getElementById(\'sublime-ad-shop-right\');\n  function fixedWingz(){\n    /*When page just loaded*/\n    var posY = sublime.window.pageYOffset;\n    if (posY > fromTop) {\n      leftWingz.style.top = \"0px\";\n      rightWingz.style.top = \"0px\";\n    } else{\n      leftWingz.style.top = \"initial\";\n      rightWingz.style.top = \"initial\";\n    }\n\n    /*When user scroll*/\n    function sublimeEventScroll(){\n      var posY = sublime.window.pageYOffset;\n      if (posY > fromTop) {\n        leftWingz.style.top = \"0px\";\n        rightWingz.style.top = \"0px\";\n      } else{\n        leftWingz.style.top = \"auto\";\n        leftWingz.style.top = \"initial\";\n        rightWingz.style.top = \"auto\";\n        rightWingz.style.top = \"initial\";\n      }\n    }\n    sublime.window.addEventListener(\'scroll\', sublimeEventScroll);\n    sublime.hook.register(\'event.cleanUp\', function() {\n      sublime.window.removeEventListener(\'scroll\', sublimeEventScroll);\n    });\n  }\n  fixedWingz();\n});\n</script>\n<style type=\"text/css\">\n  @import url(https://fonts.googleapis.com/css?family=Source+Sans+Pro:300,400,600);\n  @import url(\'https://fonts.googleapis.com/css?family=Raleway:300\');\n  *[id*=\"sskz-\"], *[class*=\"sskz-\"]{\n      font-family: \'Source Sans Pro\', Helvetica, sans-serif;\n  }\n  html {\n      cursor: auto;\n  }\n  .ssk-fixed{\n    cursor: pointer !important;\n  }\n  body {\n      background-repeat: no-repeat !important; \n  }\n  #ayads-html {\n    top: 0px;\n    position: absolute;\n    overflow: hidden;\n  }\n  #sskz-bigTitle{\n    position: relative;\n    margin: 0 auto;\n    width: 770px;\n    height: inherit;\n    overflow: hidden;\n  }\n  #sublime-adchoice{\n    position: absolute;\n    top: 0;\n    right: 0;\n    width: 19px;\n    height: 15px;\n    background-repeat: no-repeat;    \n    cursor: pointer;\n  }\n  #sskz-bigTitle #criteo-logo{\n  position: absolute;\n    display: block;\n    margin: auto;\n    /*height: 200px;*/\n    max-width: 340px;\n    z-index: -1;\n    left: 0;\n    top: 0px;\n  }\n  #sskz-bigTitle .sublime-ad-top-texte{\n    font-size: 30px;\n    font-weight: 200;\n    font-family: \'Raleway\', sans-serif;\n    z-index: 2;\n    position: absolute;\n    bottom: 20px;\n    display: block;\n    left: 0px;\n    height: 60px;\n    padding-left: 11px;\n  }\n  .sublime-ad-item{\n    transition: all 0.3s ease-in-out !important;\n    box-shadow: 0px 1px 4px silver;\n    margin-bottom: 8px;\n    cursor: pointer;\n  }\n  .sublime-ad-item:hover {\n    box-shadow: 0px 0px 5px #5d5d5d;\n  }\n  .sublime-ad-item-name{\n    font-family: \'Source Sans Pro\', Helvetica, sans-serif !important;\n    background: #f9f9f9;\n    position: absolute;\n    bottom: -50px;\n    width: 100%;\n    border-top-left-radius: 3px;\n    border-top-right-radius: 3px;\n    transition: 0.25s bottom ease-in-out;\n    line-height: 25px;\n    text-align: left;\n    padding: 0 5px !important;\n  }\n  .sublime-ad-item:hover .sublime-ad-item-name{\n    bottom: 0;\n  }\n  \n  .sublime-ad-item-top{\n    position: absolute;\n    top: 14px;\n    z-index: 11;\n    width: 200px;\n    max-height: 130px;\n    right: 150px;\n    padding: 30px;\n    box-sizing: initial !important;\n    box-shadow: none;\n  }\n  .sublime-ad-item-top a {\n    position: static;\n  }\n  .sublime-ad-item-top img{\n    max-height: 160px;\n  }\n  .sublime-ad-item-top .sublime-ad-item-name{\n    bottom: -220px;\n    left: 0;\n  }\n  .sublime-ad-item-top .sublime-ad-item-price-container{\n    top: 0;\n  }\n  .sublime-ad-item-top:hover .sublime-ad-item-price-container{\n    right: 0 !important;\n  }\n  .sublime-ad-item-top:hover .sublime-ad-item-name{\n    bottom: 0 !important;\n  }\n\n  .sublime-ad-item-price-container{\n    position: absolute;\n    top: 0;\n    right: -150px;\n    background: rgba(255, 255, 255, 0.90);\n    padding: 6px;\n    border-top-left-radius: 3px;\n    border-bottom-left-radius: 3px;\n    transition: 0.4s right ease-in-out;\n  }\n  .sublime-ad-item-price{\n    font-family: \'Source Sans Pro\', Helvetica, sans-serif !important;\n  }\n  .sublime-ad-item:hover .sublime-ad-item-price-container{\n    right: 0px;\n  }\n\n  #sublime-ad-shop-left, #sublime-ad-shop-right {\n    position: fixed !important;\n    background-color: #fff;\n    z-index: 0;\n  }\n\n  #sublime-ad-shop-left {\n    margin-left: -2px;  \n  }\n  #sublime-ad-shop-right {\n    margin-right: -4px;\n  }\n  .sublime-ad-item:last-child {\n    margin-bottom: 0;\n  }\n  #sublime-ad-shop-left .ad-logo img, #sublime-ad-shop-right .ad-logo img {\n    width: 100% !important;\n    height: auto;\n    margin: 0 auto;\n  }\n\n</style>\n\n<div id=\"sskz-bigTitle\">\n  <img id=\"criteo-logo\" />\n  <span class=\"sublime-ad-top-texte\">VOUS PRESENTE</span>\n</div>",html_usage:"raw",image:"https://cdn.ayads.co/56/41/image-56410.jpg",moat:0,mobile_setup:"",desktop_setup:[],name:"[FR // Criteo] Generic Shopping Skinz",script_url:"",ssp_id:1238901,ssp_name:"criteogeneric",top:220,type:"html5",url:"http://sublimeskinz.com",vast_url:"",video:"",video_autoplay:1,video_bg:"",viewability:0,category_id:null,end:"2038-01-19 03:14:02",campaign_id:5700,campaign_name:"[FR // Criteo] Generic Shopping Skinz",traffic_type:"rtb",images:{bg:"https://cdn.ayads.co/56/41/image-56410.jpg"},supported_devices:["desktop"],cappings:{clicks:0,impressions:0,duration:0},header_bidding:false,originalUrl:"http://sublimeskinz.com"},{id:72889,priority:4,weight:10,zone_id:347,color:"",click_area:"double",creative_type:null,fixed:0,format:"skinz",html:"",html_usage:"",image:"",moat:0,mobile_setup:"",desktop_setup:"",name:"[FR] Sport /  Footeo_FullSite",script_url:"",ssp_id:"167206|834282|42281",ssp_name:"smartadserver",top:220,type:"skinz",url:"",vast_url:"",video:"",video_autoplay:1,video_bg:"",viewability:0,category_id:null,end:"2038-01-19 03:14:02",campaign_id:6524,campaign_name:"[SmartAdserver] FR Desktop Campaigns",traffic_type:"rtb",images:{bg:""},supported_devices:["desktop"],cappings:{clicks:0,impressions:0,duration:0},header_bidding:false,originalUrl:""},{id:101409,priority:9,weight:10,zone_id:347,color:"#FFF",click_area:"double",creative_type:"skinz classic skinz",fixed:0,format:"skinz",html:"",html_usage:"raw",image:"",moat:0,mobile_setup:"",desktop_setup:"",name:"[LPM-RTB-StickyClient-PMP] Footeo #HC",script_url:"",ssp_id:5779666,ssp_name:"sticky",top:220,type:"skinz",url:"",vast_url:"",video:"",video_autoplay:1,video_bg:"",viewability:0,category_id:null,end:"2038-01-19 04:14:02",campaign_id:4546,campaign_name:"[FR- StickyClient-PMP] La Place Media",traffic_type:"pmp",images:{bg:""},supported_devices:["desktop"],cappings:{clicks:0,impressions:0,duration:0},header_bidding:false,originalUrl:""},{id:101411,priority:9,weight:10,zone_id:347,color:"#FFF",click_area:"double",creative_type:"skinz classic skinz",fixed:0,format:"skinz",html:"",html_usage:"raw",image:"",moat:0,mobile_setup:"",desktop_setup:"",name:"[LPM - RTB - Rubicon] Footeo #HC",script_url:"",ssp_id:"9585:179286:872214-68",ssp_name:"rubicon",top:220,type:"skinz",url:"",vast_url:"",video:"",video_autoplay:1,video_bg:"",viewability:0,category_id:84,end:"2038-01-19 03:14:02",campaign_id:1462,campaign_name:"[SSP:RubiconClient PMP] La Place Média",traffic_type:"pmp",images:{bg:""},supported_devices:["desktop"],cappings:{clicks:0,impressions:0,duration:0},header_bidding:false,originalUrl:""},{id:104177,priority:5,weight:10,zone_id:347,color:"",click_area:"double",creative_type:null,fixed:0,format:"skinz",html:"",html_usage:"",image:"",moat:0,mobile_setup:"",desktop_setup:"",name:"[FR] Sport /  Footeo_FullSite",script_url:"",ssp_id:13033215,ssp_name:"appnexus",top:220,type:"skinz",url:"",vast_url:"",video:"",video_autoplay:1,video_bg:"",viewability:0,category_id:null,end:"2038-01-19 03:14:02",campaign_id:8366,campaign_name:"[Appnexus SASv2] Programmatic Campaign",traffic_type:"rtb",images:{bg:""},supported_devices:["desktop"],cappings:{clicks:0,impressions:0,duration:0},header_bidding:true,originalUrl:""},{id:177786,priority:4,weight:10,zone_id:347,color:"",click_area:"double",creative_type:null,fixed:0,format:"skinz",html:"",html_usage:"",image:"",moat:0,mobile_setup:"",desktop_setup:"",name:"[FR] Sport /  Footeo_FullSite",script_url:"",ssp_id:"371547|1307337|42281",ssp_name:"smartadserver",top:220,type:"skinz",url:"",vast_url:"",video:"",video_autoplay:1,video_bg:"",viewability:0,category_id:null,end:"2038-01-19 03:14:02",campaign_id:6524,campaign_name:"[SmartAdserver] FR Desktop Campaigns",traffic_type:"rtb",images:{bg:""},supported_devices:["desktop"],cappings:{clicks:0,impressions:0,duration:0},header_bidding:false,originalUrl:""}]||[];sublime.adsProcessed=[];sublime.adCollection.add=function(ads){if(sublime.isArray(ads)){sublime.ads=sublime.ads.concat(ads);}else{sublime.ads.push(ads);}};sublime.adCollection.empty=function(){sublime.ads=[]};sublime.adCollection.init=function(){log.info('addCollection.filterAdsByDevice');sublime.adCollection.filterAdsByDevice();log.info('addCollection.prioritize');prioritize();log.info('addCollection.end');};sublime.adCollection.filterAdsByDevice=function(){for(var i=sublime.ads.length-1;i>=0;i--){var ad=sublime.ads[i];if(!sublime.adCollection.matchSupported(sublime.device,ad.supported_devices)){sublime.ads.splice(i,1);log.info('adCollection: unsupported device ad',merge({},ad));}}
return sublime.ads;};sublime.adCollection.matchSupported=function(placeable){var result=arguments.length>1;for(var i=1;i<arguments.length;i++){result=result&&arguments[i].indexOf(placeable)!==-1;}
return result;};var prioritize=function(){var adList=[],ad,priorities=[],priority,i,j;for(i=0;i<sublime.ads.length;i++){ad=sublime.ads[i];if(ad===null||ad===undefined){continue;}
if(ad.isAdserving){ad.priority=10;}else{ad.priority=parseInt(ad.priority,10);}
priority=ad.priority;if(!priorities[priority]){priorities[priority]={priority:priority,totalWeight:0,adsList:[]};}
priorities[priority].adsList.push(ad);priorities[priority].totalWeight+=ad.weight;}
priorities=priorities.reduce(function(output,item){output.push(item);return output;},[]);priorities.reverse();for(i=0;i<priorities.length;i++){priority=priorities[i];for(j in priority.adsList){if(!priority.adsList.hasOwnProperty(j)){continue;}
ad=priority.adsList[j];priority.adsList[j].rand=Math.random()*ad.weight;}
priority.adsList.sort(function(a,b){if(a.rand>b.rand){return-1;}else if(a.rand<b.rand){return 1;}
return 0;});for(j in priority.adsList){if(!priority.adsList.hasOwnProperty(j)){continue;}
ad=priority.adsList[j];adList.push(ad);}}
sublime.ads=adList;};sublime.adCollection.next=function(){sublime.ad=sublime.ads.shift();var hasAd=(typeof(sublime.ad)!=='undefined');if(hasAd){store.pushConnector(sublime.ad);sublime.adsProcessed.push(sublime.ad);}
return hasAd;};sublime.adServer={};sublime.ad=sublime.ad||{};sublime.device=sublime.device||'';sublime.loadedZones=sublime.loadedZones||[];sublime.adServer.isRedirectPreview=false;var zone={id:347,site_id:259,main_category_id:81,sub_category_id:36,html:"<style>\niframe[id^=\"ayads-pull-creative-\"], #Footeo_ATF_1x1 {display:none !important;}\n#background{background:none !important}\n.nav-drawer-container{display:none  !important}\n#content{background-color: white !important;margin-top: 0px !important;}\n#blockadd{width: 1010px !important;background-color: white !important;display: none !important;}\n#content .container{width: 1010px !important;}\n</style>\n\n<script>\nfunction init(){\n    /* Init variables */\n    var html = sublime.window.document.querySelector(\'html\'),\n        body = sublime.window.document.body,\n        isSafari = navigator.userAgent.indexOf(\'Safari\') != -1 && navigator.userAgent.indexOf(\'Chrome\') == -1,\n        IsEdge = navigator.userAgent.indexOf(\'Edge\') != -1,\n        isChrome = navigator.userAgent.indexOf(\'Chrome\') != -1 && !IsEdge,\n        isMac = navigator.appVersion.indexOf(\"Mac\") != -1,\n        isVideo = !sublime.isEmpty(sublime.creativeAd.videos),\n        bgfix = sublime.creativeAd.fixed,\n        format = \'\',\n        ayadsVideoLayer,\n        firstCall,\n        i = 0,\n        /* Edit variables */\n        maxHeightHeader = 41,\n        minHeightHeader = 41;\n    /**************** ADAPT MARGIN TO HTML AND LAUNCH FUNCTION FOR OTHERS ELEMENTS ****************/\n    function fixSkin(){\n        isChrome ? html.style.cssText = \'padding-top:\' + maxHeightHeader + \'px !important;\' : html.style.cssText = \'margin-top:\' + maxHeightHeader + \'px !important;\';\n        if ((bgfix && !isVideo) || (!bgfix && isMac && isSafari)  || (!bgfix && isChrome)) {\n            body.style.cssText = \'background-position: center \'+maxHeightHeader+\'px !important;\';\n        }\n        if (bgfix) {\n            fixSkinOnScrollEvent();\n            if (firstCall) {\n                sublime.window.addEventListener(\'scroll\', fixSkinOnScrollEvent);\n                firstCall = false;\n            }\n        }\n    }\n    /**************** ADAPT MARGIN TO OTHERS ELEMENTS ****************/\n    function fixSkinOnScrollEvent(){\n        var y = sublime.window.pageYOffset,\n            newMarginTop;\n \n        if (y === 0) {\n            newMarginTop = maxHeightHeader;\n        } else if (y > 0 && y < (maxHeightHeader - minHeightHeader)) {\n            newMarginTop = Math.floor(maxHeightHeader - y);\n        } else {\n            newMarginTop = minHeightHeader;\n        }\n \n        if (isVideo && ayadsVideoLayer) {\n            ayadsVideoLayer.style.cssText = \'top:\' + newMarginTop + \'px !important;\';\n        } else {\n            body.style.cssText = \'background-position:center \' + newMarginTop + \'px !important;\';\n        }\n    }\n    /**************** CHECK IF ELEMENT IS PRESENT ****************/\n    function checkDivPresence(div, callback, bool){\n        myDiv = sublime.window.document.querySelector(div);\n        if (myDiv) {\n            if (bool) {\n                if (isVideo && div === \"#ayads-video-layer\") {\n                    ayadsVideoLayer = myDiv;\n                }\n                firstCall = true;\n            }\n            callback(myDiv);\n        } else {\n            top.sublime.timer.setTimeout(function(){\n                if (i > 30) {\n                    top.sublime.timer.clearTimeout(function() {\n                        checkDivPresence();\n                    });\n                } else {\n                checkDivPresence(div, callback, bool);\n                }\n                i += 1;\n            }, 100);\n        }\n    }\n    /**************** ADAPT MARGIN TO HEADER WITH A DYNAMIC HEIGHT (OPTION) ****************/\n    function getHeightDynamicHeader(headerDyn){\n        maxHeightHeader = headerDyn.offsetHeight;\n        fixSkin();\n    }\n    /**************** LAUNCH FUNCTION CHECK ****************/\n    //html.style.cssText = \'margin-top:\' + maxHeightHeader + \'px !important;\';\n    isChrome ? html.style.cssText = \'padding-top:\' + maxHeightHeader + \'px !important;\' : html.style.cssText = \'margin-top:\' + maxHeightHeader + \'px !important;\';\n    if (isVideo){\n        checkDivPresence(\'#ayads-video-layer\', fixSkin, true);\n    } else {\n        checkDivPresence(\'body\', fixSkin, true);\n    };\n    sublime.hook.register(\"event.cleanUp\", function(){\n        sublime.window.removeEventListener(\'scroll\', fixSkinOnScrollEvent);\n        isChrome ? html.style.paddingTop = \'\' : html.style.marginTop = \'\';\n    });\n    /* checkDivPresence(\'header\', getHeightDynamicHeader); */\n}\n/**************** LAUNCH GLOBAL FUNCTION ****************/\ninit();\n</script>",passback:"",mobilepassback:"",premium:0,block_cookies:0,scale:1.01,url:"www.footeo.com",width:0,mobile_setup:{footer_fixed:1},sticky_setup:{js:"",css:""},mobilecss:"",mobilejs:"",mobile_bottom_selector:"",mobile_bottom_append_position:"",tag_type:"waterfall",video_mute:0,video_autoplay:1,passback_render:"",sjs_debug:0,country:"FR",site_url:"www.footeo.com",company_id:1121,autoskinz:0,autovideo:0,supported_devices:["mobile","desktop"],main_category_name:"Sport",sub_category_name:"Football",nortb:0,novideo:0,noreminder:0,host:"www.footeo.com",cappings:{impressions:0,impressions_mobile:0,duration:86400},accepted_placement_types:{skinz:1},ignore_client_width:false,scaleCompat:101,continent:"EU",mmd:5,mmm:3}||{};var postImpressionsEvents={sec1:1000,sec2:2000,sec3:3000,sec4:4000,sec5:5000};sublime.adServer.run=function(){store.setCall({id:sublime.uuid.get('p'),zoneId:sublime.env('zoneId'),userAgent:sublime.window.navigator.userAgent,contentLanguage:sublime.window.navigator.language,});var forceDisplay=!!(sublime.previewing&&sublime.isDefined(sublime.preview.params)&&sublime.preview.params.forceDisplay);if(sublime.inArray(zone.id,sublime.loadedZones)){log.warn('Zone already loaded');return;}
storage.unset('suid');sublime.loadedZones.push(zone.id);sublime.hook.call('step.call');if(!sublime.isFeatureEnabled('sskzGDPR')){sublime.analytics.fire(347,'call');}
sublime.hook.register('step.beforeunload',function(){sublime.analytics.fire(347,'unload');});if(sublime.adServer.isUserOptout()){emitter.info('trafficking.adServer.userIsOptout');return sublime.adServer.passback('place');}
if(!forceDisplay&&!isPlaceable()){return sublime.adServer.passback('place');}
sublime.analytics.fire(347,'place');sublime.hook.call('step.place');if(sublime.device=="mobile"&&zone.cappings&&zone.cappings.impressions_mobile){zone.cappings.impressions=zone.cappings.impressions_mobile;delete zone.cappings.impressions_mobile;}
if(sublime.adServer.isCapped('zone','impressions')){return sublime.adServer.passback('impression');}
sublime.adServer.hookRegisterStepImpression();sublime.adServer.registerMacros();sublime.hook.register('step.impression.after',sublime.adServer.dnsPrefetch);sublime.hook.register('dom.bodyReady',function(){log.info('body is ready');runAds();});};var runAds=function(){if(sublime.previewing){sublime.hook.register('dom.ready',function(){sublime.preview.run();});return;}
sublime.adServer.handleAdServing();sublime.adCollection.init();sublime.adServer.execute();};sublime.adServer.isCapped=function(targetName,cappingType){var output=false;if(sublime.previewing){log.warn("Preview: sublime.adServer.isCapped disabled");return false;}
if(sublime[targetName]&&sublime[targetName].cappings&&sublime[targetName].cappings[cappingType]&&sublime[targetName].cappings.duration){var storageKey='capping.'+targetName+sublime[targetName].id,value=storage.get(storageKey);if(value&&value[cappingType]&&value[cappingType]>=sublime[targetName].cappings[cappingType]){output=true;}}
return output;};sublime.adServer.execute=function(){if(sublime.previewing){log.warn("sublime.adServer.execute on preview");return;}
log.info("sublime.adServer.execute");if(!sublime.adCollection.next()){log.success("Ads exhausted");return sublime.adServer.passback('impression');}
log.info('Process Ad '+sublime.adsProcessed.length+'/'+(sublime.ads.length+sublime.adsProcessed.length)+' : '+sublime.ad.id);log.info('Check capping');if(sublime.adServer.isCapped('ad','clicks')||sublime.adServer.isCapped('ad','impressions')){log.warn("Ad "+sublime.ad.id+" capped, continue");return sublime.adServer.execute();}
if(sublime.ad.ssp_name&&!sublime.ad.ssp_id&&!sublime.ad.vast_url&&!sublime.ad.script_url){return sublime.adServer.execute();}
sublime.adServer.serveAd();};sublime.adServer.serveAd=function(){if(sublime.ad.ssp_name){log.info('Try to serve SSP ad');sublime.ssp.query();}else{log.info('Try to serve direct ad');sublime.adServer.displayAd();}};sublime.adServer.displayAd=function(){log.info("sublime.adServer.displayAd()");log.info('adServer: Ad ID',sublime.ad.id);log.info('adServer: Traffic type',sublime.ad.traffic_type);log.info("adServer: Ad",merge({},sublime.ad));var forceDisplay=!!(sublime.previewing&&sublime.isDefined(sublime.preview.params)&&sublime.preview.params.forceDisplay);if(!sublime.display.adIsReady(sublime.ad)&&!sublime.previewing){return sublime.adServer.execute();}
if(!forceDisplay&&!sublime.display.adIsCompatibleWithDevice(sublime.ad,sublime.device)){return sublime.adServer.execute();}
store.pushConnector(sublime.ad);sublime.display.render(merge({},sublime.ad));if(sublime.helpers.hasProperty(sublime,'creativeAd.raid')){log.success('Ad displayed '+sublime.creativeAd.raid);}
log.success('Ad trafficked '+sublime.ad.id);};sublime.adServer.passback=function(reason){if(sublime.isEmpty(reason)){reason='no reason given';}
log.info('sublime passback '+reason);if(reason=='place'){sublime.analytics.fire(347,'place_passback');}else if(reason=='impression'){sublime.analytics.fire(347,'impression_passback');}else if(reason=='preview_passback'){log.info('Preview passback',{reason:reason});}else{log.error('Bad reason for passback',{reason:reason});}
var passbackScript='';if(sublime.device==='desktop'&&zone.passback){passbackScript=zone.passback;}else if(sublime.device!=='desktop'&&zone.mobilepassback){passbackScript=zone.mobilepassback;zone.passback_render="iframeResizeParent";}
if(!passbackScript){log.info('sublime passback: no passbackScript');return;}
sublime.analytics.fire(347,'script_passback');log.info('sublime passback: write passbackScript');sublime.hook.register('dom.bodyReady',function(){sublime.passback.render(passbackScript,zone.passback_render);});};sublime.adServer.clickurlize=function(targetUrl,extraParams){var antennaUrl=sublime.adServer.clickurlizeAntenna(null,null,extraParams);var clickurlizeThroughAntenna=antennaUrl+targetUrl;return clickurlizeThroughAntenna;};sublime.adServer.clickurlizeAyads=function(targetUrl){var ad=sublime.ad,url=sublime.env('ayads_url')+'/click.php',qs={zid:zone.id,aid:ad.id,ref:sublime.originWindow.btoa(sublime.window.location.href),ua:sublime.originWindow.btoa(navigator.userAgent),t:sublime.timeStart};if(ad.raid){qs.raid=ad.raid;}
if(ad.conversion){qs.conversion='1';}
if(ad.ssp_name){qs.isssp='1';qs.at=getAdTypeAyads(ad);}
if(sublime.isDefined(targetUrl)){qs.url=targetUrl;}
if(ad.id===52157){return targetUrl;}
return sublime.url.merge(url,qs);};sublime.adServer.clickurlizeAntenna=function(targetUrl,event,extraParams){targetUrl=targetUrl||'';var url=sublime.env('antenna_url')+'/redirect.php';var pixelAntenna=sublime.analytics.handleInheritance({inherit:"_commonSkinz",qs:{z:347}});var qs=sublime.qs.merge(pixelAntenna.qs,sublime.pixels._commonSkinz.qs,{e:sublime.isString(event)&&event.length?event:'c',tse:sublime.now()});if(!sublime.isEmpty(extraParams)){qs=sublime.qs.merge(qs,extraParams);}
qs=sublime.qs.merge(qs,{url3rd:''});var antennaUrl=sublime.url.merge(url,qs)+targetUrl;return antennaUrl;};sublime.cookieMatch=function(){if(sublime.previewing){log.info("Preview: cookieMatch disabled");return;}
var storageKey='cookie-matching-capping',isCapped=storage.get(storageKey);if(isCapped){log.info("CookieMatch capped");return;}
var setup=[]||{};for(var i in setup){if(!setup.hasOwnProperty(i)){continue;}
var url=setup[i].url;url=sublime.macros.replace(url);if(setup[i].type==='img'){(function(url){sublime.timer.setTimeout(function(){new Image().src=url;},0);})(url);}else{var s=sublime.document.createElement('script');s.id='sublime-cm-'+i;s.type='text/javascript';s.async=true;s.src=url;sublime.document.body.appendChild(s);}}
storage.set(storageKey,true,864e+5);};sublime.adServer.incrementCappings=function(cappingName){var targets=['ad','zone'],name,target;if(sublime.isFeatureEnabled('cookieConsent')){if(!sublime.gdpr.getSublimeConsent()){return;}}
for(var i=0;i<targets.length;i++){name=targets[i];target=sublime[name];if(target.cappings&&target.cappings[cappingName]){var storageKey='capping.'+(name+''+target.id),value=storage.get(storageKey)||{},duration=target.cappings.duration||86400;if(value[cappingName]){value[cappingName]++;storage.set(storageKey,value);}else{value[cappingName]=1;storage.set(storageKey,value,duration);}}}};sublime.adServer.dnsPrefetch=function(){var d=sublime.document,head=d.getElementsByTagName('head')[0],url,link,urls=[sublime.env('ayads_url'),sublime.ad.url];for(var i in urls){url=urls[i];if(!url){continue;}
link=d.createElement('link');link.id='sublime-dns-prefetch';link.rel='dns-prefetch';link.href=url;head.appendChild(link);}};sublime.cookiesBlocked=function(){if(!sublime.ad){return true;}
if(sublime.isDefined(zone.block_cookies)){return!!zone.block_cookies;}
return false;};var applyCookieMatch=function(){if(!zone.nortb){sublime.cookieMatch();}};if(zone.id!=803){sublime.hook.register('step.call',applyCookieMatch);}
sublime.adServer.hookRegisterStepImpression=function(){sublime.hook.register('step.impression.before',function(){sublime.analytics.fire(347,'impression');sublime.adServer.incrementCappings('impressions');for(var i in postImpressionsEvents){if(!postImpressionsEvents.hasOwnProperty(i)){continue;}
(function(name,ms){sublime.timer.setTimeout(function(){sublime.hook.call('step.impression.'+name);},ms);})(i,postImpressionsEvents[i]);}});};function runDARAudit(){if(sublime.env('activate_dar')){log.info('run DAR Audit');var site_id=345551,page_id=1205083,format_id=sublime.device==='desktop'?42281:44974;sublime.xhr('https://www8.smartadserver.com/ac?'+sublime.qs.build({siteid:site_id,pgid:page_id,fmtid:format_id,visit:'M',tmstp:sublime.now(),out:'json',sh:top.innerHeight,sw:top.innerWidth,tgt:['json','gm=0','screen=large','large_screen=TRUE','zone_id='+(sublime.zone.id||0),'gc='+(sublime.gdpr.getSublimeConsent()?1:0)].join(';'),gdpr:1,gdpr_consent:sublime.gdpr.getConsentString(),}),{withCredentials:true,async:true,success:function(response){if(response!==''){response=JSON.parse(response);if(response.ad){response.ad.impUrls&&(new Image().src=response.ad.impUrls);response.ad.creativeScriptRAW&&sublime.write(response.ad.creativeScriptRAW);}}}});}}
sublime.hook.register('step.place',runDARAudit);sublime.adServer.registerMacros=function(){var allowedMacros={click:'pixelClick',impression:'pixelImpression'};for(var slot in allowedMacros){if(!allowedMacros.hasOwnProperty(slot)){continue;}
var pixelUrl=sublime[allowedMacros[slot]];if(sublime.isEmpty(pixelUrl)){continue;}
log.info('Macro found for '+slot+': '+pixelUrl);if(!sublime.isUrl(pixelUrl)){log.warn('Macro for '+slot+' is not a valid url');continue;}
sublime.analytics.setPixels(347,{inherit:'_external',slot:slot+".macro",url:pixelUrl});}};sublime.adServer.handleAdServing=function(){var asAds=sublime.compat.windowHasAds(sublime.originWindow);if(sublime.isEmpty(asAds)){asAds=sublime.compat.windowHasAds(sublime.window);}
if(sublime.isEmpty(asAds)||!sublime.isArray(asAds)){return false;}
sublime.adCollection.empty();for(var i=0,ad;i<asAds.length;i++){ad=merge(adDefaultFormat,asAds[i]);sublime.adCollection.add(ad);}};sublime.adServer.isUserOptout=function(){var lc='dnt',ttl=18e5,localIsOptout=storage.get(lc);var checkOptoutBeforeExecutingCallback=function(isOptout,fromStorage){if(!fromStorage){storage.set(lc,isOptout,ttl);}
if(isOptout){log.log('isOptout');return true;}else{log.log('isNotOptout');return false;}};if(localIsOptout===null){sublime.xhr(sublime.env('optchk_url'),{async:true,jsonp:true,success:checkOptoutBeforeExecutingCallback});return false;}
return checkOptoutBeforeExecutingCallback(localIsOptout,true);};var getAdTypeAyads=function(ad){return ad.type.charAt(0)=='v'?'v':'i';};var adDefaultFormat={campaign_id:0,cappings:{clicks:0,impressions:0,duration:0},click_area:'double',click_macro:null,color:'',creative_type:'',creative_id:null,fixed:'',html:'',id:0,images:{bg:''},moat:0,mobile_setup:{},desktop_setup:{},name:'',priority:1,ssp_id:'',ssp_name:'',top:0,type:'skinz',url:'',video_autoplay:1,videos:{},viewability:0,weight:10};sublime.analytics.setPixels(347,sublime.pixels);sublime.helpers.createNamespace('sublime.sspRequest');sublime.sspRequest.ssp_response={OK:0,EMPTY_RESPONSE:1,TIMEOUT:2,REQUEST_ERROR:3,PARSE_ERROR:4,PARAMETERS_ERROR:5,PARSE_TIMEOUT:6,UNKNOWN_REQUEST_CALL:7,REQUEST_CANCELLED:8,RESPONSE_DISCARDED:9,UNKNOWN_ERROR:99};sublime.helpers.createNamespace('sublime.sspRequest.appnexusRequest');const SSP_NAME_APPNEXUS='appnexus';const SUBLIME_BUYER_ID=[3538,3539,3540];const APPNEXUS_REQUEST_KEYWORD_PAGE_HEIGHT_LARGE=7000;function getUUID(){let e=(new Date()).getTime();const t='xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx'.replace(/[xy]/g,function(t){const n=(e+16*Math.random())%16|0;return e=Math.floor(e / 16),(t==='x'?n:3&n|8).toString(16);});return t;}
function appnexusRequestGetKeywords(){const output={tag:"wf",gc:String(Number(sublime.gdpr.getSublimeConsent())),gm:String(Number(sublime.gdpr.cmpHasAnswered())),screen:sublime.detectDevice.categorizedScreenSize(),};const acceptedPlacementTypes={skinz:1}||{};Object.keys(acceptedPlacementTypes).forEach(function placementTypeSetupForEach(placementType){output[placementType]=String(Boolean(acceptedPlacementTypes[placementType]));});if(sublime.helpers.getPageHeight()>=APPNEXUS_REQUEST_KEYWORD_PAGE_HEIGHT_LARGE){output.page_height='large';}
const keywords=[];Object.keys(output).forEach(function placementTypeSetupForEach(key){keywords.push({key:key,value:[output[key]],});});return keywords;}
function appnexusRequestGetDataParams(source,options){const data={member_id:'none',sdk:{source:'ast',version:'0.16.2'},tags:[{ad_types:['banner'],allow_smaller_sizes:false,id:source.id,keywords:[],prebid:true,primary_size:{width:1800,height:1000},sizes:[{width:1800,height:1000}],use_pmt_rule:true,uuid:getUUID(),}],uuid:getUUID(),gdpr_consent:{},};if(!sublime.isEmpty(sublime.gdpr.getConsentString())){data.gdpr_consent={consent_string:sublime.gdpr.getConsentString(),consent_required:sublime.gdpr.isActive(),};}
if(options.isMobile){data.tags[0].primary_size={width:640,height:300};data.tags[0].sizes=[{width:640,height:300}];}
if(options.acceptVideo&&sublime.helpers.isOptimalHeight()){data.tags[0].ad_types.push('video');}
if(options.acceptVideo&&options.isMobile){data.tags[0].reserve=4.87;}
if(options.acceptVideo){data.tags[0].video={context:4,frameworks:[1,2,],};}
if(!sublime.isEmpty(sublime.gdpr.getConsentString())){data.gdpr_consent={consent_string:sublime.gdpr.getConsentString(),consent_required:sublime.gdpr.isActive(),};}
if(sublime.isFeatureEnabled('appnexusSendImpressionId')){data.tags[0].external_imp_id=sublime.uuid.get('p');}
data.tags[0].keywords=appnexusRequestGetKeywords();return data;}
function parseVideoResponse(resolve,response){return resolve({sspName:SSP_NAME_APPNEXUS,success:true,srcType:'vast-string',vast:response.tags[0].ads[0].rtb.video.content,});}
function parseImageResponse(resolve,response){let contentSourceType;let contentSource;let adHtml;let impressionPixels;try{contentSourceType=response.tags[0].ads[0].content_source;contentSource=response.tags[0].ads[0][contentSourceType];adHtml=contentSource.banner.content||'';impressionPixels=contentSource.trackers[0].impression_urls||[];}catch(e){return resolve({sspName:SSP_NAME_APPNEXUS,success:false,error_code:sublime.sspRequest.ssp_response.EMPTY_RESPONSE,});}
if(!sublime.isString(adHtml)||sublime.isEmpty(adHtml.trim())){return resolve({sspName:SSP_NAME_APPNEXUS,success:false,error_code:sublime.sspRequest.ssp_response.EMPTY_RESPONSE,});}
for(var i=0;i<impressionPixels.length;i++){adHtml+='<img src="'+impressionPixels[i]+'" />';}
return resolve({sspName:SSP_NAME_APPNEXUS,success:true,srcType:'html',html:adHtml,});}
function appnexusRequestSuccessCallback(jsonResponse,resolve){try{const response=JSON.parse(jsonResponse);const dealId=sublime.helpers.hasProperty(response,'tags.0.ads.0.deal_id')?response.tags[0].ads[0].deal_id:null;const buyerMemberId=sublime.helpers.hasProperty(response,'tags.0.ads.0.buyer_member_id')?sublime.pInt(response.tags[0].ads[0].buyer_member_id,10):null;const isOpenAuction=sublime.isEmpty(dealId)&&!sublime.inArray(buyerMemberId,SUBLIME_BUYER_ID);const isVideo=sublime.helpers.hasProperty(response,'tags.0.ads.0.rtb.video.content');if(!sublime.isEmpty(dealId)){sublime.creativeAd.deal_id=dealId;}
if(sublime.device==='mobile'&&isOpenAuction&&!isVideo){log.warn('Open auction from Appnexus blocked : no deal_id in Appnexus response');return resolve({sspName:SSP_NAME_APPNEXUS,success:false,error_code:sublime.sspRequest.ssp_response.PARAMETERS_ERROR,});}
if(isVideo){return parseVideoResponse(resolve,response);}
return parseImageResponse(resolve,response);}catch(e){return resolve({sspName:SSP_NAME_APPNEXUS,success:false,error_code:sublime.sspRequest.ssp_response.EMPTY_RESPONSE,});}}
sublime.sspRequest.appnexusRequest.call=function appnexusRequestCall(source,callOptions){const defaults={async:true,timeout:1000,};const options=merge(defaults,callOptions);const data=appnexusRequestGetDataParams(source,options);return new sublime.Promise(function(resolve){sublime.xhr(source.url,{async:options.async,timeout:options.timeout,withCredentials:true,method:'POST',headers:{'Content-Type':'text/plain',},data:data,success:function appnexusCallSuccess(jsonResponse){return appnexusRequestSuccessCallback(jsonResponse,resolve);},error:function appnexusCallError(){return resolve({sspName:SSP_NAME_APPNEXUS,success:false,error_code:sublime.sspRequest.ssp_response.REQUEST_ERROR,});},onTimeout:function appnexusCallOnTimeout(){return resolve({sspName:SSP_NAME_APPNEXUS,success:false,error_code:sublime.sspRequest.ssp_response.TIMEOUT,});},});});};sublime.helpers.createNamespace('sublime.sspRequest.stickyRequest');var SSP_NAME_STICKY="sticky";sublime.sspRequest.stickyRequest.call=function(source,options){var defaults={timeout:1000};if(!options||!sublime.isObject(options)){options={};}
source.url=sublime.sspRequest.stickyRequest.buildGDPRQuery(source.url);return new sublime.Promise(function(resolve,reject){options=merge(defaults,{errorCallback:function(){return resolve({sspName:SSP_NAME_STICKY,success:false,error_code:sublime.sspRequest.ssp_response.REQUEST_ERROR});},successCallback:function(creativeAd,data){creativeAd.pixels=data.pixels;return sublime.sspRequest.stickyRequest.successCallback(creativeAd,resolve);}},options);sublime.parseVast.query(source.url,options);});};sublime.sspRequest.stickyRequest.buildGDPRQuery=function buildGDPRQuery(baseUrl){if(!sublime.isFeatureEnabled('stickyConsent')){return baseUrl;}
var baseParams=sublime.qs.parse(baseUrl),params={},querySeparator='&';if(sublime.gdpr.getConsentString()){params._fw_gdpr_consent=sublime.gdpr.getConsentString();}
else if(sublime.gdpr.isActive()){params._fw_gdpr=1;}else{params._fw_gdpr=0;}
if(sublime.isEmpty(baseParams)){querySeparator='?';}
return baseUrl+querySeparator+sublime.qs.build(params);};sublime.sspRequest.stickyRequest.successCallback=function(creativeAd,resolve){return resolve({sspName:SSP_NAME_STICKY,success:true,srcType:'creative',creative:creativeAd});};sublime.helpers.createNamespace('sublime.sspRequest.smartadserverRequest');var SSP_NAME_SMARTADSERVER='smartadserver';var KEYWORD_PAGE_HEIGHT_LARGE=7000;sublime.sspRequest.smartadserverRequest.call=function call(source,options){return new sublime.Promise(function(resolve,reject){return callSmart(resolve,source,options);});};function callSmart(resolve,source,options){sublime.elapsedSinceLastCall('smartRequest.call');var url=sublime.sspRequest.smartadserverRequest.buildUrl(source.url,options);sublime.xhr(url,{timeout:options.timeout||false,async:true,withCredentials:true,success:function(response){const duration=sublime.elapsedSinceLastCall('smartRequest.call');emitter.timer('smartRequest-success',duration);smartadserverRequestSuccessCallback(response,resolve,options);},error:function(e){const duration=sublime.elapsedSinceLastCall('smartRequest.call');emitter.timer('smartRequest-error',duration);return resolve({sspName:SSP_NAME_SMARTADSERVER,success:false,message:'Error SmartAdServer response',error_code:sublime.sspRequest.ssp_response.REQUEST_ERROR,});},onTimeout:function(){const duration=sublime.elapsedSinceLastCall('smartRequest.call');emitter.timer('smartRequest-timeout',duration);return resolve({sspName:SSP_NAME_SMARTADSERVER,success:false,message:'Timeout SmartAdServer error',error_code:sublime.sspRequest.ssp_response.TIMEOUT,});},});}
sublime.sspRequest.smartadserverRequest.buildUrl=function(baseUrl,options){var params=sublime.qs.parse(baseUrl);var tgtMatch=baseUrl.match(/[?&]tgt=([^&]+)/);if(tgtMatch&&tgtMatch[1]){params.tgt=tgtMatch[1].split(';');}else{params.tgt=[];}
if(!sublime.inArray('json',params.tgt)){params.tgt.push('json');}
if(options.acceptVideo&&sublime.helpers.isOptimalHeight()){params.tgt.push('vskinz=true');}
if(sublime.isFeatureEnabled('smartSendImpressionId')){params.tgt.push('puid='+sublime.uuid.get('p'));}
if(sublime.isDefined(params.tmstp)){params.tmstp=sublime.now();}
if(sublime.isFeatureEnabled('smartConsent')){params=sublime.sspRequest.smartadserverRequest.addGDPRQueryParameters(params);}
params.tgt.push('screen='+sublime.detectDevice.categorizedScreenSize());params.tgt.push(sublime.detectDevice.categorizedScreenSize()+'_screen=TRUE');params.tgt.push('tag='+"wf");if(sublime.helpers.getPageHeight()>=KEYWORD_PAGE_HEIGHT_LARGE){params.tgt.push('page_height=large');}
const acceptedPlacementTypes={skinz:1}||{};Object.keys(acceptedPlacementTypes).forEach(function placementTypeSetupForEach(placementType){params.tgt.push(placementType+'=true');});params.tgt=params.tgt.join(';');var urlParts=sublime.url.parse(baseUrl);urlParts.query=sublime.qs.build(params);return sublime.url.build(urlParts);};sublime.sspRequest.smartadserverRequest.addGDPRQueryParameters=function(params){if(sublime.gdpr.isActive()){params.gdpr=1;if(sublime.gdpr.getConsentString()){params.gdpr_consent=sublime.gdpr.getConsentString();}}else{params.gdpr=0;}
if(sublime.isFeatureEnabled('smartKeywordConsent')){if(sublime.gdpr.cmpHasAnswered()){params.tgt.push('gc='+(sublime.gdpr.getSublimeConsent()?1:0));params.tgt.push('gm=1');}else{params.tgt.push('gm=0');}}
return params;};sublime.sspRequest.smartadserverRequest.parseJSONResponse=function(json){if(!sublime.helpers.hasProperty(json,'ad.creativeScriptRAW')){return{sspName:SSP_NAME_SMARTADSERVER,success:false,message:'Query SmartAdServer JSON no ad to display',error_code:sublime.sspRequest.ssp_response.EMPTY_RESPONSE,};}
var pixels={};if(json.ad.sendImpPixel&&json.ad.impUrls&&sublime.isUrl(json.ad.impUrls)){pixels.impressionSmart={isInternal:false,slot:'impression.smart',url:json.ad.impUrls,};}
if(json.ad.vtrPixel&&sublime.isUrl(json.ad.vtrPixel)){log.log('Adding smart video completion pixels');var quartiles=['start','firstquartile','midpoint','thirdquartile','complete'];for(var i in quartiles){if(!quartiles.hasOwnProperty(i)){continue;}
var vtrPixel=sublime.url.merge(json.ad.vtrPixel,{key:quartiles[i],});pixels['videoQ'+i+'Smart']={isInternal:false,slot:'videoQ'+i+'.smartQ'+i,url:vtrPixel,};}}
return{sspName:SSP_NAME_SMARTADSERVER,success:true,srcType:'html',html:json.ad.creativeScriptRAW,json:json,pixels:pixels,};};function smartadserverRequestSuccessCallback(response,resolve){if(sublime.isEmpty(response)||response==='sas_noad = true;'){return resolve({sspName:SSP_NAME_SMARTADSERVER,success:false,message:'Query SmartAdServer empty response',error_code:sublime.sspRequest.ssp_response.EMPTY_RESPONSE,});}
var json=sublime.helpers.tryParseJson(response);if(json){var HTMLResponse=sublime.sspRequest.smartadserverRequest.parseJSONResponse(json);if(sublime.isObject(sublime.ad)&&sublime.helpers.hasProperty(HTMLResponse,'json.ad.insertionId')){sublime.ad.insertion_id=HTMLResponse.json.ad.insertionId;}
if(sublime.isObject(sublime.ad)&&sublime.helpers.hasProperty(HTMLResponse,'json.ad.externaldealId')){sublime.ad.deal_id=HTMLResponse.json.ad.externaldealId;}
return resolve(HTMLResponse);}
var vast=sublime.helpers.tryParseXml(response);if(vast){return resolve({sspName:SSP_NAME_SMARTADSERVER,success:true,srcType:'vast-string',vast:response,});}
log.error('smartadserver.queryCallback: parse error',{response:response});return resolve({sspName:SSP_NAME_SMARTADSERVER,success:false,message:'Query SmartAdServer parse error',error_code:sublime.sspRequest.ssp_response.PARSE_ERROR,});}
sublime.sspRequest.smartadserverRequest.getDefaultSourceUrl=function getSourceUrl(sspId){var parts=sspId.toString().split('|');var parameters={siteId:sublime.pInt(parts[0]),pageId:sublime.pInt(parts[1]),formatId:sublime.pInt(parts[2]),};var dimensions=sublime.helpers.getBrowserDimensions();var url='https://www8.smartadserver.com/ac?siteid='+parameters.siteId
+'&pgid='+parameters.pageId
+'&fmtid='+parameters.formatId
+'&visit=M&tmstp='+sublime.now()
+'&out=json'
+'&sh='+dimensions.bh
+'&sw='+dimensions.bw;return url;};sublime.helpers.createNamespace('sublime.sspRequest.improveRequest');var SSP_NAME_IMPROVE="improve";sublime.sspRequest.improveRequest.buildGDPRQuery=function buildGDPRQuery(baseUrl){if(!sublime.isFeatureEnabled('improveConsent')){return baseUrl;}
var baseParams=sublime.qs.parse(baseUrl),params={},querySeparator='&';if(sublime.gdpr.isActive()&&sublime.gdpr.getConsentString()){params.GDPR=sublime.gdpr.getConsentString();}else if(sublime.gdpr.isActive()){params.GDPR='';}
if(sublime.isEmpty(params)){return baseUrl;}else{if(sublime.isEmpty(baseParams)){querySeparator='?';}
return baseUrl+querySeparator+sublime.qs.build(params);}};sublime.sspRequest.improveRequest.call=function(source,options){var defaults={async:true,timeout:1000};if(!options||!sublime.isObject(options)){options={};}
options=merge(defaults,options);var jsonpParam=sublime.sspRequest.improveRequest.getDataParams(source,options);var url=sublime.url.merge(source.url,{jsonp:JSON.stringify(jsonpParam)});return new sublime.Promise(function(resolve,reject){sublime.xhr(url,{async:options.async,timeout:options.timeout,withCredentials:true,success:function(jsonResponse){return sublime.sspRequest.improveRequest.callSuccessCallback(jsonResponse,resolve);},error:function(){return resolve({sspName:SSP_NAME_IMPROVE,success:false,error_code:sublime.sspRequest.ssp_response.REQUEST_ERROR});},onTimeout:function(){return resolve({sspName:SSP_NAME_IMPROVE,success:false,error_code:sublime.sspRequest.ssp_response.TIMEOUT});}});});};sublime.sspRequest.improveRequest.callSuccessCallback=function(jsonResponse,resolve){try{var response=JSON.parse(jsonResponse);if(!sublime.isObject(response)||!sublime.isArray(response.bid)||!sublime.isObject(response.bid[0])||!sublime.isString(response.bid[0].adm)||sublime.isEmpty(response.bid[0].adm.trim())){return resolve({sspName:SSP_NAME_IMPROVE,success:false,error_code:sublime.sspRequest.ssp_response.PARSE_ERROR});}
var bidResponse=response.bid[0];if(bidResponse.adm.match(/<img [^>]+src=\\"https?:\\\/\\\/creative\.360yield\.com\\\/file\\\/\d+\\\/1x1\.gif/)){return resolve({sspName:SSP_NAME_IMPROVE,success:false,error_code:sublime.sspRequest.ssp_response.EMPTY_RESPONSE});}
var output={sspName:SSP_NAME_IMPROVE,success:true,srcType:'html',html:'<script>eval(atob("'+sublime.window.btoa(bidResponse.adm)+'"));</script>',pixels:{}};output.pixels.impressionImprove={slot:'impression.improve',url:bidResponse.nurl};return resolve(output);}catch(e){return resolve({sspName:SSP_NAME_IMPROVE,success:false,error_code:sublime.sspRequest.ssp_response.EMPTY_RESPONSE});}};sublime.sspRequest.improveRequest.getDataParams=function(source,options){var data={bid_request:{id:(sublime.rngU32()*sublime.rngU32()).toString(16).substr(2),secure:1,version:"Sublime-1.0",imp:[{id:(sublime.rngU32()*sublime.rngU32()).toString(16).substr(2),pid:source.id,banner:{}}]}};if(sublime.isFeatureEnabled('improveConsent')&&sublime.gdpr.getConsentString()){data.bid_request.gdpr=sublime.gdpr.getConsentString();}
return data;};var callTimeStart;sublime.ssp=sublime.ssp||{};sublime.ssp.setup={improve:[],appnexus:[],smartadserver:[],sticky:[]}||{};sublime.ssp.awaitedTime={total:0};sublime.ssp.successAndDisplayAd=function(ad,data){log.info("event.ssp.ok",data);var fireSspPixelExtraQs={ssprf:ad.response_format};if(sublime.helpers.hasProperty(ad,'vpaid.provider')){fireSspPixelExtraQs.vtpp=ad.vpaid.provider;}
if(data.type==='vast'){if(sublime.length(data.pixels)){sublime.analytics.setPixels(347,data.pixels);}
if(sublime.isDefined(ad.mobile_setup)){ad.type='mobile';ad.creative_type=ad.creative_type||'mobile m-skinz video';}else{ad.type='video';}}
sublime.ad=merge(sublime.ad,ad);sublime.ssp.fireSspPixel('sspOk',0,fireSspPixelExtraQs);sublime.adServer.displayAd();};sublime.ssp.errorAndGoNext=function sspErrorAndGoNext(options){const data=merge(options,{'event.ssp.ko':sublime.ad.ssp_name,});if(data.parseScript_response&&(data.parseScript_response in sublime.sspRequest.ssp_response)){data.ssp_response=sublime.sspRequest.ssp_response[data.parseScript_response];}
if(data.parseVast_response&&(data.parseVast_response in sublime.sspRequest.ssp_response)){data.ssp_response=sublime.sspRequest.ssp_response[data.parseVast_response];}
const sspResponse=data.ssp_response?sublime.pInt(data.ssp_response):99;log.warn(data);const extraQS={};if(sublime.isObject(data.ad)){if(sublime.isDefined(data.ad.raid)){extraQS.ra=data.ad.raid;}
if(sublime.isDefined(data.ad.deal_id)){extraQS.di=data.ad.deal_id;}
if(sublime.isDefined(data.ad.insertion_id)){extraQS.ii=data.ad.insertion_id;}
if(sublime.helpers.hasProperty(data.ad,'vpaid.provider')){extraQS.vtpp=data.ad.vpaid.provider;}}
sublime.ssp.fireSspPixel('sspKo',sspResponse,extraQS);delete sublime.ad.response_format;return sublime.adServer.execute();};sublime.ssp.query=function sspQuery(){var sspClass=sublime.ssp.getSspClassFromAd(sublime.ad);if(!sspClass){log.error('Ssp not supported',{ssp:sublime.ad.ssp_name});return sublime.adServer.execute();}
callTimeStart=sublime.now();log.info('SSP Call: '+sublime.ad.ssp_name);sublime.ssp.fireSspPixel('sspCall');try{return sspClass.query();}catch(e){log.error('Error ssp query',{ssp:sublime.ad.ssp_name},e);return sublime.ssp.errorAndGoNext({message:'Error ssp query '+sublime.ad.ssp_name,ssp_response:sublime.sspRequest.ssp_response.REQUEST_ERROR});}};sublime.ssp.getSspClassFromAd=function(ad){var sspNamespace=ad.ssp_name.toLowerCase();if(sublime.ssp[sspNamespace]&&sublime.isFunction(sublime.ssp[sspNamespace].query)){return sublime.ssp[sspNamespace];}else{return false;}};sublime.ssp.write=function(html,options){log.info('sublime.ssp.write()',html);sublime.write(html,options);};sublime.ssp.queryCallback=function(iframeWindow){sublime.hook.call('ssp.'+sublime.ad.ssp_name+'.queryCallback');if(!sublime.parseScript.readResponseFromIframe(iframeWindow)){return false;}
log.info("sublime.adServer.displayAd()");sublime.adServer.displayAd();return true;};sublime.ssp.isHTML=function(html){var commentPseudoCommentOrLtBang=new RegExp('<!--[\\s\\S]*?(?:-->)?'+'<!---+>?'+'|<!(?![dD][oO][cC][tT][yY][pP][eE]|\\[CDATA\\[)[^>]*>?'+'|<[?][^>]*>?','g');var s=html;s=s.replace(commentPseudoCommentOrLtBang,'');s=sublime.trim(s).replace(/^[\r\n]+|[\r\n]+$/g,'');return!!s.match(/^</);};sublime.ssp.fireSspPixel=function(callName,sspResponse,extraQS){var e=(callName==='sspCall')?'sspc':callName.toLowerCase();var pixel={inherit:'_ssp',qs:{e:e}};var id=sublime.ad.ssp_id||'ad-'+sublime.ad.id;if(callName!=='sspCall'){pixel.qs.sspr=sublime.pInt(sspResponse);pixel.preFireCallback=function(){this.qs.rt=Math.round(sublime.now()-callTimeStart);};}
if(sublime.isObject(extraQS)){pixel.qs=merge(pixel.qs,extraQS);}
sublime.analytics.fire(347,callName+'-'+sublime.ad.ssp_name+'-'+id,pixel);};var pixelsSsp={_ssp:{inherit:'_commonSkinz',preFireCallback:function(){if(sublime.isDefined(sublime.ad)&&'ssp_name'in sublime.ad){var sspName=sublime.ad.ssp_name;if(sublime.ad.ssp_name==='appnexus'&&sublime.ad.header_bidding){sspName='appnexus3';}
this.qs.sspname='sspv3-'+sspName;}
if(sublime.isDefined(sublime.ad)&&'ssp_id'in sublime.ad){this.qs.sspplid=sublime.ad.ssp_id;}
this.qs.isssp=1;},qs:{}}};sublime.analytics.setPixels(347,pixelsSsp);sublime.parseVast={emptyResponse:/<VAST version='2\.0'>[\s\r\n]*<\/VAST>/,};sublime.parseVast.response={OK:'OK',EMPTY_RESPONSE:'EMPTY_RESPONSE',PARSE_ERROR:'PARSE_ERROR',PARSE_TIMEOUT:'PARSE_TIMEOUT',REQUEST_ERROR:'REQUEST_ERROR',UNKNOWN_ERROR:'UNKNOWN_ERROR',};const vastQuartileNames=['start','firstQuartile','midpoint','thirdQuartile','complete'];const eventNames=['mute','unmute','rewind','pause','resume','fullscreen','complete'];const imageSelector='sublime_img_bg';let pixelNumber=0;let allPixels=[];let insertionId=null;let dealId=null;let vpaid=null;function getNodeValue(e){if(!e||!e.childNodes){return null;}
let child=e.childNodes.length===1?e.firstChild:e.childNodes[1];for(let i=0;i<e.childNodes.length;i+=1){if(e.childNodes[i].nodeType===4){child=e.childNodes[i];}}
if(child){if(child.nodeValue){return sublime.trim(child.nodeValue);}
if(e.querySelector('URL')){return sublime.trim(e.querySelector('URL').firstChild.nodeValue);}
return sublime.trim(child.innerHTML||'');}
return false;}
function decodeAppnexusWrappedContent(encodedContent){var adParametersObject=JSON.parse(encodedContent);if(!sublime.helpers.hasProperty(adParametersObject,'ads.0.rtb.content_b64')){return'';}
const content=adParametersObject.ads[0].rtb.content_b64;const parts=content.split('-');if(!parts||!parts.length||parts[0]===''){return'';}
try{const decodedContent=parts.reduce(function decoder(acc,value){return acc+sublime.base64url.decode((value+'-').replace(/\s|\./,''));},'');return decodedContent;}catch(e){log.warn('Error while parsing VPAID with appnexus wrapper:'+e,{content:content});return'';}}
function getImageFromId(id,vastData){return vastData.ad.images[id]&&vastData.ad.images[id].url;}
sublime.parseVast.parse=function parse(responseXML){sublime.ad=sublime.ad?sublime.ad:{};sublime.ad.response_format='vast';const vast=vastParse(responseXML);if(!vast){return false;}
const vastData=vast.data;const imageBg=getImageFromId('image_bg',vastData);if(!sublime.isEmpty(vastData.ad.raid)&&sublime.isEmpty(vastData.ad.videoBg)&&sublime.isEmpty(imageBg)&&vastData.ad.video){vastData.ad.videoBg=vastData.ad.video.replace(/\/video-/,'/video-bg-');log.warn('VAST video background replaced',{vastAd:vastData.ad,});}
allPixels=allPixels.concat(vastData.pixels);insertionId=vastData.ad.insertionId||insertionId;dealId=vastData.ad.dealId||dealId;const data={ad:{url:vastData.ad.url||'',originalUrl:vastData.ad.url||'',creative_type:vastData.ad.creative_type||'',moat:vastData.ad.moat||'',html_usage:vastData.ad.html_usage||'',images:{bg:imageBg||'',},videos:{top:vastData.ad.video||'',bg:vastData.ad.videoBg||'',},html:vastData.ad.htmlParts.join('\r\n'),type:'video',raid:vastData.ad.raid||null,insertion_id:insertionId,deal_id:dealId,vpaid:vpaid||null,response_format:vpaid?'vpaid':'vast',supported_devices:vastData.device?[vastData.device]:[],video_resolution:vastData.ad.video_resolution||null,isWrapper:vastData.ad.isWrapper,sublimeCreativeDetected:vastData.ad.sublimeCreativeDetected,isExternal:!vastData.ad.sublimeCreativeDetected,},pixels:allPixels,hooks:null,childUri:vastData.childUri,};if(vastData.ad.rcid){data.ad.rcid=vastData.ad.rcid;}
if(vastData.ad.fixed){data.ad.fixed=vastData.ad.fixed;}
if(vastData.ad.top){data.ad.top=vastData.ad.top;}
if(vastData.device==='desktop'){const desktopSetup=sublime.helpers.tryParseJson(vastData.ad.desktop_setup);if(desktopSetup){data.ad.desktop_setup=desktopSetup;}else{data.ad.desktop_setup={reminder:0,};}}
if(vastData.device==='mobile'){const mobileSetup=sublime.helpers.tryParseJson(vastData.ad.mobile_setup);if(mobileSetup){data.ad.mobile_setup=mobileSetup;}else{data.ad.mobile_setup={top:{key:'top',type:'img',src:getImageFromId('image_top',vastData)||'',video:vastData.ad.video||'',},panel:{key:'panel',type:'img',src:getImageFromId('image_panel',vastData)||'',},bottom:{key:'bottom',type:'img',src:getImageFromId('image_bottom',vastData)||'',},js:mobileSetup?mobileSetup.js:null,css:mobileSetup?mobileSetup.css:null,};}
data.ad.type='mobile';}
const isExternalMobileCreative=(sublime.device==='mobile')&&!vastData.ad.sublimeCreativeDetected;if(isExternalMobileCreative){data.ad.type='mobile';data.ad.creative_type='mobile m-skinz2 video simple';data.ad.supported_devices=['mobile'];const placeholderImage='https://cdn.ayads.co/mskinz/transparent.png';data.ad.mobile_setup={top:{key:'top',type:'video',video:vastData.ad.video,src:placeholderImage,supportTopParallax:1,autoHideTopDuration:data.skipoffset||0,},bottom:{},panel:{transitionColors:['black','black'],},footer_fixed:1,top_sticky:1,};}
return data;};function sortCanPlayMediaFiles(mediaFilesNodeList,formatsReference){let formats=formatsReference;if(typeof formats==='undefined'){formats=sublime.video.SUPPORTED_PLAY_TYPES;}
let mediaFiles=Array.prototype.slice.call(mediaFilesNodeList).map(function mapMediaFiles(mediaFile){const type=mediaFile.getAttribute('type');return{mediaFile:mediaFile,bitrate:+mediaFile.getAttribute('bitrate'),type:type,canPlayType:sublime.video.canPlayType(type),supported:formats.indexOf(type),};}).filter(function filterMediaFiles(config){return config.canPlayType>0&&config.supported>=0;});mediaFiles=mediaFiles.sort(function sortMediaFiles(a,b){if(a.supported>b.supported){return 1;}
if(a.supported<b.supported){return-1;}
return 0;});return mediaFiles;}
function getOneMediaFile(mediaFiles,bitrateReference){const BITRATE_REFERENCE=sublime.video.BITRATE_REFERENCE;const bitrate=bitrateReference===undefined?BITRATE_REFERENCE:bitrateReference;mediaFiles.sort(function sortMediaFiles(a,b){if(Math.abs(a.bitrate-bitrate)<Math.abs(b.bitrate-bitrate)){return-1;}
if(Math.abs(a.bitrate-bitrate)>Math.abs(b.bitrate-bitrate)){return 1;}
return 0;});return mediaFiles[0];}
sublime.parseVast.pickMediaFile=function pickMediaFile(mediaFiles){const BITRATE_REFERENCE=sublime.video.BITRATE_REFERENCE;const SUPPORTED_PLAY_TYPES=sublime.video.SUPPORTED_PLAY_TYPES;const SUPPORTED_PLAY_TYPE_3GPP=sublime.video.SUPPORTED_PLAY_TYPE_3GPP;if(mediaFiles===undefined||mediaFiles.length===0){log.warn('pickMediaFile: empty mediaFiles collection');return undefined;}
let mediaFilesAvailable=sortCanPlayMediaFiles(mediaFiles,SUPPORTED_PLAY_TYPES);let playableMediaFiles;if(mediaFilesAvailable.length>0){playableMediaFiles=getOneMediaFile(mediaFilesAvailable,BITRATE_REFERENCE);}
if(!playableMediaFiles){mediaFilesAvailable=sortCanPlayMediaFiles(mediaFiles,SUPPORTED_PLAY_TYPE_3GPP);if(mediaFilesAvailable.length>0){playableMediaFiles=getOneMediaFile(mediaFilesAvailable,BITRATE_REFERENCE);}}
if(!playableMediaFiles){log.warn('pickMediaFile: no playable mediaFile');return undefined;}
return playableMediaFiles.mediaFile;};function detectSublimeCreativeInVPAID(adElementId,adParameters,mediaFile){const tryParseJson=sublime.helpers.tryParseJson;let output={creativeId:null,queryString:null,};const vastURLRegex=new RegExp(('sac.*?.ayads.co.*?/vast/').replace(/[/]/g,'\\/')
+'(\\d+)([^\\]"]*)?','i');const encodedVastURLRegex=new RegExp('sac.*?.ayads.co.*?%2fvast%2f(\\d+)(%3f[^&$]*)?','i');let matches;if(adElementId){matches=adElementId.match(/^Sublime-(\d+)$/);}
if(!matches&&adParameters){matches=adParameters.match(vastURLRegex);}
if(!matches&&mediaFile){matches=mediaFile.match(encodedVastURLRegex);if(matches&&matches[2]){matches[2]=decodeURIComponent(matches[2]);}}
if(!matches&&tryParseJson(adParameters)){const decodedContent=decodeAppnexusWrappedContent(adParameters);matches=decodedContent.match(vastURLRegex);}
if(matches&&matches.length){output={creativeId:matches[1],queryString:matches[2]?sublime.qs.parse(matches[2]):null,};}
return output;}
function vastParse(responseXML){const o={adElement:responseXML.querySelector('Ad'),wrapperElement:responseXML.querySelector('Wrapper'),impressionElements:responseXML.querySelectorAll('Impression'),errorElements:responseXML.querySelectorAll('Error'),trackingElements:responseXML.querySelectorAll('Tracking'),videoElement:sublime.parseVast.pickMediaFile(responseXML.querySelectorAll('MediaFile')),adParametersElement:responseXML.querySelector('AdParameters'),clickThroughElement:responseXML.querySelector('ClickThrough'),customClickElement:responseXML.querySelector('CustomClick'),clickTrackingElements:responseXML.querySelectorAll('ClickTracking'),companionAdsElement:responseXML.querySelectorAll('CompanionAds'),durationElement:responseXML.querySelector('Duration'),smartMacrosElement:responseXML.querySelector('SmartMacros'),rtbMacrosElement:responseXML.querySelector('RtbMacros'),companions:{},data:{ad:{raid:null,rcid:null,insertionId:null,dealId:null,images:[],htmlParts:[],isWrapper:true,sublimeCreativeDetected:false,},hooks:{},pixels:[],childUri:null,},};if(!o.adElement){return false;}
if(o.rtbMacrosElement){dealId=getNodeValue(o.rtbMacrosElement.querySelector('DealId'));if(dealId){o.data.ad.dealId=dealId;if(sublime.isObject(sublime.ad)){sublime.ad.deal_id=dealId;}}}
if(o.smartMacrosElement){insertionId=getNodeValue(o.smartMacrosElement.querySelector('insertionID'));if(insertionId){o.data.ad.insertionId=insertionId;if(sublime.isObject(sublime.ad)){sublime.ad.insertion_id=insertionId;}}}
const vastId=o.adElement.getAttribute('id');if(vastId&&vastId.match(/^sublime-.*/i)){o.data.ad.raid=vastId.replace(/^sublime-(.*)$/i,'$1');if(sublime.isObject(sublime.ad)){sublime.ad.raid=o.data.ad.raid;}
o.data.ad.sublimeCreativeDetected=true;o.data.ad.isWrapper=false;}
const vastCampaignId=o.adElement.getAttribute('sskzCampaignId');if(vastCampaignId){o.data.ad.rcid=vastCampaignId;}
const vastType=o.adElement.getAttribute('sskzType');if(vastType==='light'){o.data.childUri=sublime.env('app_host')+'/vast/'+o.data.ad.raid;return o;}
o.data.device=o.adElement.getAttribute('sskzDevice')||sublime.device;const creativeType=o.adElement.getAttribute('sskzCreativeType');if(creativeType){o.data.ad.creative_type=creativeType;}
const mobileSetup=o.adElement.getAttribute('sskzMobileSetup');if(mobileSetup){o.data.ad.mobile_setup=mobileSetup;}
const desktopSetup=o.adElement.getAttribute('sskzDesktopSetup');if(desktopSetup){o.data.ad.desktop_setup=desktopSetup;}
const moat=parseInt(o.adElement.getAttribute('sskzMoat')||0,10);if(moat>=1){o.data.ad.moat=moat;}
const htmlUsage=o.adElement.getAttribute('sskzHtmlUsage');if(htmlUsage){o.data.ad.html_usage=htmlUsage;}
let eventNode;let impressionValue;let clickValue;let eventValue;let eventName;let companionNode;let companionName;let i;let j;let companions;let companionAdParameters;let companionImage;let companionVideoBackground;let pixelName;o.adParametersValue=getNodeValue(o.adParametersElement);if(o.durationElement){o.data.duration=sublime.helpers.time2secs(getNodeValue(o.durationElement));}
function isExternalTrackingURL(nodeValue){const antennaHost=sublime.env('antenna_host');return(sublime.isUrl(nodeValue)&&sublime.url.parse(nodeValue).host!==antennaHost);}
for(i=0;i<o.clickTrackingElements.length;i+=1){clickValue=getNodeValue(o.clickTrackingElements[i]);if(isExternalTrackingURL(clickValue)){pixelName='vastClick';o.data.pixels.push({name:pixelName,slot:'click.'+pixelName,url:clickValue,});}}
for(i=0;i<o.impressionElements.length;i+=1){impressionValue=getNodeValue(o.impressionElements[i]);if(isExternalTrackingURL(impressionValue)){pixelName='vastImpression';o.data.pixels.push({name:pixelName,slot:'impression.'+pixelName,url:impressionValue,});}}
for(i=0;i<o.trackingElements.length;i+=1){eventNode=o.trackingElements[i];eventName=eventNode.getAttribute('event');eventValue=getNodeValue(eventNode);if(isExternalTrackingURL(eventValue)){if(sublime.inArray(eventName,vastQuartileNames)){const index=sublime.inArray(eventName,vastQuartileNames,true);pixelName='vastVideoQ'+index;o.data.pixels.push({name:pixelName,slot:'videoQ'+index+'.'+pixelName,url:eventValue,});}
if(sublime.inArray(eventName,eventNames)){pixelName='vast'+eventName;o.data.pixels.push({name:pixelName,slot:eventName+'.'+pixelName,url:eventValue,});}else if(eventName==='creativeView'){o.data.pixels.push({name:eventName,slot:'impression.'+eventName,url:eventValue,});}else if(eventName==='progress'){const secs=sublime.helpers.time2secs(eventNode.getAttribute('offset'));if(secs){const name=eventName+'_'+secs;o.data.pixels.push({name:name,slot:name,url:eventValue,});}}else{o.data.pixels.push({name:eventName,slot:eventName,url:eventValue,});}}}
if(o.videoElement&&o.clickThroughElement){o.data.ad.isWrapper=false;if(o.clickThroughElement){o.data.ad.url=getNodeValue(o.clickThroughElement);}
if(sublime.isEmpty(o.data.ad.url)&&o.customClickElement){o.data.ad.url=getNodeValue(o.customClickElement);}
if(o.videoElement){o.data.ad.video=getNodeValue(o.videoElement);if(o.videoElement.getAttribute('width')&&o.videoElement.getAttribute('height')){o.data.ad.video_resolution=o.videoElement.getAttribute('width')+'x'+o.videoElement.getAttribute('height');}}
for(i=0;i<o.companionAdsElement.length;i+=1){companions=o.companionAdsElement[i].querySelectorAll('Companion');for(j=0;j<companions.length;j+=1){companionNode=companions[j];companionName=companionNode.getAttribute('id')||i+'-'+j+'-noid';if(!o.companions[companionName]){o.companions[companionName]=[];}
if(companionNode.getAttribute('id')===imageSelector){const fixed=companionNode.getAttribute('expandedHeight');const top=companionNode.getAttribute('expandedWidth');if(fixed){o.data.ad.fixed=sublime.pInt(fixed);}
if(top){o.data.ad.top=sublime.pInt(top);}}
companionImage=companionNode.querySelector('StaticResource[creativeType*=image]');if(companionImage){const imageValue=getNodeValue(companionImage);const image={key:companionName,url:imageValue,};if(companionNode.getAttribute('width')){image.width=companionNode.getAttribute('width');}
if(companionNode.getAttribute('height')){image.height=companionNode.getAttribute('height');}
o.companions[companionName].image=image;o.data.ad.images[companionImage.getAttribute('id')]=image;}
companionAdParameters=companionNode.querySelector('CompanionAds AdParameters');if(companionAdParameters){const htmlValue=getNodeValue(companionAdParameters);o.companions[companionName].html=htmlValue;o.data.ad.htmlParts.push(htmlValue);}
companionVideoBackground=companionNode.querySelector('StaticResource[creativeType*=video]');if(companionVideoBackground){const videoBgValue=getNodeValue(companionVideoBackground);o.companions[companionName].url=videoBgValue;o.data.ad.videoBg=videoBgValue;}
if(o.companions[companionName].length){delete o.companions[companionName];}}}}
const vpaidMediafileElement=responseXML.querySelector('MediaFile[apiFramework=VPAID][type*="javascript"],'
+'[apiFramework="VPAID"] [creativeType*="javascript"]');if(vpaidMediafileElement){o.data.ad.isWrapper=false;const adParametersElement=responseXML.querySelector('AdParameters');const mediaFile=getNodeValue(vpaidMediafileElement);const adParameters=getNodeValue(adParametersElement);const adElement=responseXML.querySelector('Ad[id^="Sublime-"]');const matches=detectSublimeCreativeInVPAID(adElement&&adElement.getAttribute('id'),adParameters,mediaFile);if(sublime.isNum(matches.creativeId)){const creativeId=matches.creativeId;o.data.ad.sublimeCreativeDetected=true;o.data.childUri=sublime.env('app_host')+'vast/'+creativeId;if(matches.queryString){sublime.creativeExternalData=matches.queryString;}}
vpaid={mediaFile:mediaFile,adParameters:adParameters,adSystem:(getNodeValue(o.adElement.querySelector('AdSystem'))||'').toLowerCase().replace(/\s+/g,'-'),};const providerHost={adledge:/[^.]*.?adledge.com$/i,doubleverify:/vpaid.doubleverify.com$/i,ias:/[^.]*.?adsafeprotected.com$/i,moat:/svastx.moatads.com$/i,googleima:/imasdk.googleapis.com$/i,appnexus:/acdn.adnxs.com$/i,};const mediaFileHost=sublime.url.parse(vpaid.mediaFile).host;vpaid.provider=Object.keys(providerHost).find(function match(providerName){return providerHost[providerName].test(mediaFileHost);});if(!vpaid.provider){vpaid.provider=mediaFileHost;}}
if(o.wrapperElement&&o.wrapperElement.querySelector('VASTAdTagURI')){o.data.childUri=getNodeValue(o.wrapperElement.querySelector('VASTAdTagURI'));}
return o;}
sublime.parseVast.remapPixels=function remapPixels(pixels){var output={};var pixel;var name='';for(let i=0;i<pixels.length;i+=1){pixel=pixels[i];pixelNumber=0;do{pixelNumber+=1;name=pixel.name+'_'+pixelNumber;}while(output[name]);output[name]={inherit:'_external',slot:pixel.slot.replace(/([^.]+)$/,name),url:pixel.url,};}
return output;};sublime.parseVast.query=function queryVast(url,params){const defaultsOptions={timeout:false,errorCallback:sublime.noOp,successCallback:sublime.noOp,};const options=merge({},defaultsOptions,sublime.isObject(params)?params:{});var optionsXHR={async:true,timeout:options.timeout,onTimeout:function onTimeout(){options.errorCallback({message:'Timeout SSP',parseVast_response:sublime.parseVast.response.PARSE_TIMEOUT,});},success:function onSuccess(){log.info('Vast Response received',{response:this.response,});let vastResponse=this.responseXML;if(!vastResponse){vastResponse=sublime.helpers.tryParseXml(this.responseText);}
if(!vastResponse){log.warn('VAST Parse error : Non XML response SSP',{vastUrl:url,options:options,});options.errorCallback({message:'Non XML response SSP',parseVast_response:sublime.parseVast.response.PARSE_ERROR,});return;}
if(this.response.match(sublime.parseVast.emptyResponse)){options.errorCallback({message:'Empty response',parseVast_response:sublime.parseVast.response.EMPTY_RESPONSE,});return;}
try{sublime.parseVast.decodeVastResponse(vastResponse,options,url);}catch(e){options.errorCallback({error:e,message:'ParseVast error',parseVast_response:sublime.parseVast.response.PARSE_ERROR,});}},error:function onError(){options.errorCallback({message:'Can\'t reach SSP',parseVast_response:sublime.parseVast.response.REQUEST_ERROR,});},};sublime.xhr(url,optionsXHR);};sublime.parseVast.decodeVastResponse=function decodeVastResponse(responseXML,options,originalUrl){var vastData=sublime.parseVast.parse(responseXML);if(!vastData){options.errorCallback({message:'Vast is empty',parseVast_response:sublime.parseVast.response.EMPTY_RESPONSE,});return;}
if(vastData&&vastData.childUri){sublime.parseVast.query(vastData.childUri,options);return;}
if(vastData.ad.sublimeCreativeDetected&&!sublime.creativeExternalData){sublime.creativeExternalData=sublime.qs.parse(originalUrl||'');}
vastData.pixels=sublime.parseVast.remapPixels(vastData.pixels);const hasUrl=sublime.isUrl(vastData.ad.url);const hasImage=sublime.isUrl(vastData.ad.images.bg);const hasVideo=sublime.isUrl(vastData.ad.videos.top);const isValidCreative=vastData&&hasUrl&&(hasImage||hasVideo);const isVpaid=!!vastData.ad.vpaid;if(!isValidCreative&&!isVpaid){options.errorCallback({message:"Vast isn't a Creative or a VPAID",parseVast_response:sublime.parseVast.response.EMPTY_RESPONSE,ad:vastData.ad||{},});return;}
if(sublime.isEmpty(vastData.ad.raid)&&sublime.isEmpty(vastData.ad.supported_devices)){vastData.ad.supported_devices.push(sublime.device);}
if(sublime.device==='desktop'&&!vastData.ad.sublimeCreativeDetected){vastData.ad.desktop_setup.reminder=1;}
options.successCallback(vastData.ad,{type:'vast',pixels:vastData.pixels,});};function reinitPixels(){allPixels=[];}
sublime.parseScript={};sublime.parseScript.response={OK:'OK',EMPTY_RESPONSE:'EMPTY_RESPONSE',PARSE_ERROR:'PARSE_ERROR',PARSE_TIMEOUT:'PARSE_TIMEOUT',UNKNOWN_ERROR:'UNKNOWN_ERROR',};sublime.parseScript.query=function query(url,options){const defaults={async:true,timeout:2500,onTimeout:sublime.noOp,success:sublime.noOp,error:sublime.noOp,};sublime.xhr(url,merge(defaults,options));};sublime.parseScript.write=function write(html,params){sublime.ad=sublime.ad?sublime.ad:{};sublime.ad.response_format='html';const defaults={responseReader:sublime.parseScript.readResponseFromIframe,errorCallback:sublime.noOp,successCallback:sublime.noOp,tryIntervalMs:25,tryRepeat:80,};const options=merge({},defaults,params&&sublime.isObject(params)?params:{});const bannedKeyword=/tags\.adzip\.co/;if(sublime.isString(html)&&bannedKeyword.test(html)){options.errorCallback({message:'Forbidden partner',parseScript_response:sublime.parseScript.response.PARSE_ERROR,});return;}
html='<script src="data:application/javascript;ayads.co;charset=utf-8;base64,Ow=="></script>'+html;log.info('sublime.parseScript.write()',html);const iframe=sublime.write(html,options);let iframeHtml;let tries=0;let interval=sublime.timer.setInterval(function tick(){log.info('parseScript start read response ('+tries+'/'+options.tryRepeat+')');let result;try{result=options.responseReader(iframe.contentWindow);}catch(err){iframeHtml='-- could not retrieve iframe content --';if(iframe.contentWindow&&iframe.contentWindow.document&&iframe.contentWindow.document.body&&iframe.contentWindow.document.body.innerHTML){iframeHtml=iframe.contentWindow.document.body.innerHTML;}
log.error('ParseScript responseReader error',{html:encodeURIComponent(html),iframeHtml:encodeURIComponent(iframeHtml),ad:sublime.ad||'-empty ad-',},err);log.info('parseScript clear interval');sublime.timer.clearInterval(interval);interval=null;sublime.parseScript.removeIframe(iframe);options.errorCallback({message:'responseReader error',parseScript_response:sublime.parseScript.response.PARSE_ERROR,});return;}
tries+=1;if(result.responseFound||tries>=options.tryRepeat){log.info('parseScript clear interval');sublime.timer.clearInterval(interval);interval=null;if(result.adFound){result.creativeAd.response_format='redirect';options.successCallback(result.creativeAd,{type:'script',tries:tries,result:result,});return;}
let parseScriptResponse=sublime.parseScript.response.PARSE_TIMEOUT;if(result.responseFound){parseScriptResponse=sublime.parseScript.response.EMPTY_RESPONSE;}
if(!result.responseFound&&sublime.ad&&sublime.ad.ssp_name==='smartadserver'){iframeHtml='-- could not retrieve iframe content --';if(iframe.contentWindow&&iframe.contentWindow.document&&iframe.contentWindow.document.body&&iframe.contentWindow.document.body.innerHTML){iframeHtml=iframe.contentWindow.document.body.innerHTML;}
log.warn('parseScript.write: parse timeout on smartAdServer',{iframeHtml:iframeHtml,tags:{ssp:'smartadserver',},});}
sublime.parseScript.removeIframe(iframe);options.errorCallback({type:'script',tries:tries,parseScript_response:parseScriptResponse,});return;}
log.log('parseScript end read response');},options.tryIntervalMs);};sublime.parseScript.removeIframe=function removeIframe(iframe){if(!iframe){return false;}
let str='parseScript delete iframe';if(iframe.id&&iframe.id.length>0){str+='#'+iframe.id;if(iframe.name&&iframe.name.length>0){str+='[name='+iframe.name+']';}}
log.info(str);if(log.level<40){return sublime.removeElement(iframe);}
log.log('parseScript delete iframe < is fake delete');return true;};const redirectLightRequests={};const redirectLightOutputs={};sublime.parseScript.readResponseFromIframe=function readResponseFromIframe(iframeWindow){var output={responseFound:false,adFound:false,creativeAd:{},};if(!iframeWindow||!iframeWindow.document){return output;}
const redirectAd=sublime.compat.windowHasRedirect(iframeWindow);if(redirectAd){if(redirectAd.id){delete redirectAd.id;}
if(sublime.isDefined(redirectAd.raid)&&sublime.isDefined(redirectAd.rtype)&&redirectAd.rtype==='light'){log.info('Identified Redirect light: '+redirectAd.raid);if(!redirectLightRequests[redirectAd.raid]){log.info('Requesting redirect');sublime.xhr(sublime.env('sublime_url')+'ad/'+redirectAd.raid,{jsonp:true,callbackName:'sublimeCbRedLightAd',success:function successXhr(response){var creativeResponse=response;creativeResponse.originalUrl=creativeResponse.url;creativeResponse.url=redirectAd.click_macro+creativeResponse.url;creativeResponse.click_macro=redirectAd.click_macro;creativeResponse.isRedirect=true;creativeResponse.raid=redirectAd.raid;delete creativeResponse.aid;delete creativeResponse.id;redirectLightOutputs[redirectAd.raid]={responseFound:true,adFound:true,creativeAd:creativeResponse,};log.info('Redirect light response received',redirectAd.raid,response,redirectLightOutputs[redirectAd.raid]);},error:function errorXhr(){redirectLightOutputs[redirectAd.raid]={responseFound:true,adFound:false,};log.warn('Redirect light error',redirectAd.raid,redirectLightOutputs[redirectAd.raid]);},});redirectLightRequests[redirectAd.raid]=true;}
if(redirectLightOutputs[redirectAd.raid]){log.info('Redirect light usable');return redirectLightOutputs[redirectAd.raid];}
if(redirectLightRequests[redirectAd.raid]){log.info('Redirect light request pending');return output;}
log.warn("Can't find Redirect light",redirectAd.raid);return output;}
log.info('Compact redirect in use');output.responseFound=true;output.adFound=true;output.creativeAd=redirectAd;return output;}
let img=iframeWindow.document.querySelector('img[onclick^="window.open"]');if(img){const matches=img.getAttribute('onclick').toString().match(/^window\.open\('(http.*?)'/);const url=matches&&matches[1];if(url){output.creativeAd.url=url;output.creativeAd.originalUrl=url;output.creativeAd.images={bg:img.src};output.creativeAd.type='skinz';output.responseFound=true;output.adFound=true;return output;}}
const links=iframeWindow.document.getElementsByTagName('a');if(!links.length){log.warn('No href found in response');return output;}
const a=links[0];const imgs=a.getElementsByTagName('img');if(!imgs.length){log.warn('No image found in response');return output;}
img=imgs[0];if(a&&img&&a.href&&img.src){if(a.href.charAt(0)!=='j'&&!sublime.isUrl(a.href)){output.responseFound=true;return output;}
if(img.src.indexOf('1x1')>-1||img.src.indexOf('adchoices')>-1||a.href.toString().indexOf('info.criteo')>-1||a.href.toString().indexOf('unicef')>-1){log.warn('Negative response');output.responseFound=true;return output;}
if(a.href.indexOf('j')===0){sublime.hook.register('event.click',function onClick(){eval(a.href.replace('javascript:',''));});output.creativeAd.url=a.href.match(/\(.*\)/)[0].replace(/\(|\)|'/gi,'');}else{output.creativeAd.url=a.href;}
output.creativeAd.originalUrl=output.creativeAd.url;if(a.onclick){sublime.hook.register('event.click',a.onclick);}
if(sublime.isEmpty(output.creativeAd.images)){output.creativeAd.images={};}
output.creativeAd.images.bg=img.src;output.creativeAd.type='skinz';output.creativeAd.response_format='html';log.info('Href found in response',a.href);output.responseFound=true;output.adFound=true;}
return output;};sublime.ssp=sublime.ssp||{};sublime.ssp.appnexus={name:"appnexus",iframeId:'sublime-appnexus-iframe',timeout:2500};var appNexusSetup={customUrls:{query:'',prebidQuery:''}};sublime.ssp.appnexus.setQueryUrl=function(url){appNexusSetup.customUrls.query=url;};sublime.ssp.appnexus.setPrebidQueryUrl=function(url){appNexusSetup.customUrls.prebidQuery=url;};sublime.ssp.appnexus.query=function(){log.info('appnexus.query: PROMISE');var options={async:true,timeout:1000,isMobile:sublime.device==='mobile',acceptVideo:(!0&&!sublime.detectDevice.isDataSaverEnabled()&&(sublime.device==='mobile'||(sublime.inArray(sublime.detectDevice.categorizedScreenSize(),['large','unknown']))))};var source={url:'https://ib.adnxs.com/ut/v3/prebid',id:sublime.ad.ssp_id};return sublime.sspRequest.appnexusRequest.call(source,options).then(function(response){if(response.success){if(response.vast){var xmlDocument=sublime.helpers.tryParseXml(response.vast);return sublime.parseVast.decodeVastResponse(xmlDocument,{errorCallback:sublime.ssp.errorAndGoNext,successCallback:sublime.ssp.successAndDisplayAd});}
var html=response.html;return sublime.parseScript.write(html,{id:sublime.ssp.appnexus.iframeId,iframeAttributes:{"data-ssp-name":sublime.ad.ssp_name,"data-ssp":sublime.ad.ssp_id,width:"1800px",height:"1000px",style:"margin-left: -900px;"+"position: absolute;"+"z-index: 999;"+"top: 0;"+"left: 50%;"+"opacity: 0.001;"+"display: block;"+"transform: scale(0.001);"+"transform-origin: top"},errorCallback:sublime.ssp.errorAndGoNext,successCallback:sublime.ssp.successAndDisplayAd,tryIntervalMs:30,tryRepeat:50});}
return sublime.ssp.errorAndGoNext({message:'Error Appnexus WF query',ssp_response:response.error_code});}).catch(function(e){log.error('Error with appnexus call',{},e);return sublime.ssp.errorAndGoNext({message:'Error in the Appnexus Promise, error catched',ssp_response:sublime.sspRequest.ssp_response.UNKNOWN_ERROR});});};sublime.ssp=sublime.ssp||{};sublime.ssp.improve={name:"improve",iframeId:"sublime-improve-iframe"};var improveSetup={customUrls:{query:''}};sublime.ssp.improve.setQueryUrl=function(url){improveSetup.customUrls.query=url;};sublime.ssp.improve.query=function(){improveQuery();};var improveQuery=function(){var url=getQueryUrl(),html='<script type="text/javascript" src="'+url+'"></script>';sublime.parseScript.write(html,{id:sublime.ssp.improve.iframeId,iframeAttributes:{"data-ssp-name":sublime.ad.ssp_name,"data-ssp":sublime.ad.ssp_id},errorCallback:sublime.ssp.errorAndGoNext,successCallback:sublime.ssp.successAndDisplayAd,tryIntervalMs:100,tryRepeat:20});};var getQueryUrl=function(){var queryType='query';var nuggad_qs=storage.get('nuggad-profile-qs');var url='https://ad.360yield.com/adj?p='+
sublime.ad.ssp_id+'&w=1800&h=1000&tz='+
(new Date().getTimezoneOffset())+
(nuggad_qs?'&'+nuggad_qs:'')+'&click3rd=';if(improveSetup.customUrls&&improveSetup.customUrls[queryType]){return improveSetup.customUrls[queryType];}
url=sublime.sspRequest.improveRequest.buildGDPRQuery(url);return url;};sublime.ssp=sublime.ssp||{};sublime.ssp.criteo={name:'criteo',iframeId:'sublime-criteo-iframe',timeout:1000,url:null,};sublime.ssp.criteo.query=function(){sublime.write(criteoTagContent());};sublime.ssp.criteo.callback=function(response){log.info('Criteo response',response);if(response.response_status>0){var sspResponse=sublime.sspRequest.ssp_response.REQUEST_ERROR;if(response.response_status==1){sspResponse=sublime.sspRequest.ssp_response.EMPTY_RESPONSE;}
return sublime.ssp.errorAndGoNext({message:'Criteo request not handled',response:response.response,ssp_response:sspResponse});}
try{var shopData=remapShopData(response);}catch(e){log.error('sspCriteo.remapShopData error',{response:response},e);return sublime.ssp.errorAndGoNext({message:'sspCriteo.remapShopData error',ssp_response:sublime.sspRequest.ssp_response.PARSE_ERROR});}
if(!shopData){return sublime.ssp.errorAndGoNext({message:'No shop data',ssp_response:sublime.sspRequest.ssp_response.PARSE_ERROR});}
sublime.ad.sspResponse=response;sublime.ad.shopData=shopData;if(sublime.ad.type==='mobile'){sublime.ad.creative_type='mobile m-skinz shop';}else{sublime.ad.type='html5';}
if(response.impression_pixels&&response.impression_pixels.length){for(var i=0;i<response.impression_pixels.length;i++){var pixel=response.impression_pixels[i];sublime.analytics.setPixels(347,{inherit:'_external',slot:"impression.impressionCriteo"+(i+1),url:pixel.url});}}
sublime.ssp.successAndDisplayAd(sublime.ad,{type:'criteo'});};var remapShopData=function(response){var products=[];for(var i=0;i<response.products.length;i++){var p=response.products[i];var product={url:p.click_url,name:p.title,description:p.description,logo:"",price:p.price,image:p.image.url,discount:""};products.push(product);}
var ad=sublime.ad,shopData={logo:response.advertiser.logo.url,url:response.advertiser.logo_click_url,showProduct:true,showPrice:true,products:products,prependWings:{left:'',right:''},appendWings:{left:'',right:''},privacy:{optout_click_url:"https://info.criteo.com/pac/privacy/informations",optout_image_url:"https://static.criteo.net/flash/icon/nai_small.png"}};var privacyQS=sublime.qs.parse(response.privacy.optout_click_url);var bannerId=sublime.preview.params.criteoBanner||privacyQS.bannerid;if(sublime.preview.params.criteoCampaign){bannerId+="-"+sublime.preview.params.criteoCampaign;}
var bannerData=grabBannerData(bannerId);if(bannerData){shopData=merge(shopData,bannerData);if(!shopData.showProduct){shopData.showPrice=false;}
ad.images.bg=shopData.bg;}
ad.url=sublime.display.getFinalClickUrl(ad,shopData.url);if(shopData.logo&&shopData.showProduct&&shopData.products.length){var htmlLogo='<a class="ad-logo" target="_blank" title="'+response.advertiser.description+'" href="'+shopData.url+'">'+'<img src="'+shopData.logo+'" alt="'+response.advertiser.description+'" width="120" height="20">'+'</a>';shopData.prependWings.left=htmlLogo;shopData.prependWings.right=htmlLogo;}
var knowMoreTxt="En savoir +";if(shopData.language&&shopData.language=='en'){knowMoreTxt="Learn more";}
shopData.css='@import url(https://fonts.googleapis.com/css?family=Open+Sans:400,600,700);'+'*[id*="sublime-ad-"], *[class*="sublime-ad-"] {font-family: "Open Sans", Helvetica, sans-serif; }'+'#sublime-ad-shop-left, #sublime-ad-shop-right { background-color: #fff; padding: 0 5px;}'+'#sublime-ad-shop-left .ad-logo, #sublime-ad-shop-right .ad-logo {display: block; text-align: center; padding: 10px 0; }'+'.sublime-ad-item { padding-top: 5px; margin-bottom: 15px; text-align: center; }'+'.sublime-ad-item a { color: #000; }'+'.sublime-ad-item a:after {opacity: 0; content: "'+knowMoreTxt+'"; position: absolute; top: 50%; left: 50%; color: #000000; background-color: rgba(255,255,255,0.8); padding: 5px; font-size: 10px; -webkit-transform: translate(-50%, -50%); transform: translate(-50%, -50%); transition: all 0.3s ease; }'+'.sublime-ad-item:hover a:after {opacity: 1; }'+'img.sublime-ad-item-image {max-width: 100%; height: auto; }'+'.sublime-ad-item:first-child{margin-top: 50px; }'+'.sublime-ad-item-name { font-weight: 600; font-size: 12px; margin: 5px 0 0 0; padding: 0 30%; }'+'.sublime-ad-item-price-container {font-size: 16px; font-weight: 700; margin: 5px 0 0 0; padding: 0 0%; }';shopData.gutterWidth=140;shopData.repeatProducts=false;shopData.showCurrency=false;return shopData;};var grabAdData=function(html){html=html||sublime.ad.html;html=html.replace(/[\n\r\t]+/g,'').replace(/[\s]+/g,' ');var data=html.match(/\/\*\s*BEGINCRITEO\s*\*\/(.+)\/\*\s*ENDCRITEO\s*\*\//);if(!data||!data[1]){return false;}
try{eval('data = '+data[1]);}catch(e){return false;}
return data;};var grabBannerData=function(bannerId,html){var adData=grabAdData(html);if(adData&&!adData[bannerId]){return null;}
return adData[bannerId];};var criteoTagContent=function(){var tag='<script type="text/javascript" src="https://static.criteo.net/js/ld/publishertag.js" async></script>';if(sublime.ssp.criteo.url){tag='<script type="text/javascript" src="'+sublime.ssp.criteo.url+'" async></script> ';}
tag+='<script>'+'window.Criteo = window.Criteo || {};'+'window.Criteo.events = window.Criteo.events || [];'+'</script>'+'<script type="text/javascript">'+'Criteo.events.push(function() {'+'    var adUnit = {'+'        "placements": ['+'        {'+'            "slotid": "adunitid1",'+'            "zoneId": '+sublime.ad.ssp_id+','+'            "nativeCallback": sublime.ssp.criteo.callback'+'        }'+'        ]'+'    };'+'    Criteo.Passback.RequestBids(adUnit, sublime.ssp.criteo.timeout);'+'});'+'</script>'+'<div id="adunitid1">'+'<script type="text/javascript">'+'Criteo.events.push(function() {'+'    Criteo.Passback.RenderAd("adunitid1", function (adunit) {'+'        return sublime.ssp.errorAndGoNext({'+'            message: "Criteo request not handled",'+'            response: adunit,'+'            ssp_response: sublime.sspRequest.ssp_response.EMPTY_RESPONSE'+'        });'+'    });'+'});'+'</script>'+'</div>';return tag;};sublime.ssp.criteogeneric={name:'criteogeneric',iframeId:'sublime-criteogeneric-iframe',timeout:false};sublime.ssp.criteogeneric.query=sublime.ssp.criteo.query;sublime.ssp=sublime.ssp||{};sublime.ssp.rubicon={name:'rubicon',iframeId:'sublime-rubicon-iframe'};sublime.ssp.rubicon.query=function(){if(sublime.ad.header_bidding){log.warn('Header bidding not yet supported for Rubicon');}
var rpParams=getParameters();if(!rpParams){return sublime.ssp.errorAndGoNext({message:"sspRubicon: ssp_id incorrect: "+sublime.ad.ssp_id,ssp_response:sublime.sspRequest.ssp_response.PARAMETERS_ERROR});}
var rpParamsString=JSON.stringify(rpParams),html='<scr'+'ipt type="text/javascript" src="'+rpParams.url+'"></scr'+'ipt>'+'<scr'+'ipt type="text/javascript">'+'sublime.info("Rubicon Params", '+rpParamsString+');'+'</scr'+'ipt>';delete rpParams.url;sublime.write(html,{id:sublime.ssp.rubicon.iframeId,iframeVars:rpParams});};var getParameters=function(){var parts=sublime.ad.ssp_id.toString().split(':');if(parts.length!==3){return false;}
var zone={id:347,site_id:259,main_category_id:81,sub_category_id:36,html:"<style>\niframe[id^=\"ayads-pull-creative-\"], #Footeo_ATF_1x1 {display:none !important;}\n#background{background:none !important}\n.nav-drawer-container{display:none  !important}\n#content{background-color: white !important;margin-top: 0px !important;}\n#blockadd{width: 1010px !important;background-color: white !important;display: none !important;}\n#content .container{width: 1010px !important;}\n</style>\n\n<script>\nfunction init(){\n    /* Init variables */\n    var html = sublime.window.document.querySelector(\'html\'),\n        body = sublime.window.document.body,\n        isSafari = navigator.userAgent.indexOf(\'Safari\') != -1 && navigator.userAgent.indexOf(\'Chrome\') == -1,\n        IsEdge = navigator.userAgent.indexOf(\'Edge\') != -1,\n        isChrome = navigator.userAgent.indexOf(\'Chrome\') != -1 && !IsEdge,\n        isMac = navigator.appVersion.indexOf(\"Mac\") != -1,\n        isVideo = !sublime.isEmpty(sublime.creativeAd.videos),\n        bgfix = sublime.creativeAd.fixed,\n        format = \'\',\n        ayadsVideoLayer,\n        firstCall,\n        i = 0,\n        /* Edit variables */\n        maxHeightHeader = 41,\n        minHeightHeader = 41;\n    /**************** ADAPT MARGIN TO HTML AND LAUNCH FUNCTION FOR OTHERS ELEMENTS ****************/\n    function fixSkin(){\n        isChrome ? html.style.cssText = \'padding-top:\' + maxHeightHeader + \'px !important;\' : html.style.cssText = \'margin-top:\' + maxHeightHeader + \'px !important;\';\n        if ((bgfix && !isVideo) || (!bgfix && isMac && isSafari)  || (!bgfix && isChrome)) {\n            body.style.cssText = \'background-position: center \'+maxHeightHeader+\'px !important;\';\n        }\n        if (bgfix) {\n            fixSkinOnScrollEvent();\n            if (firstCall) {\n                sublime.window.addEventListener(\'scroll\', fixSkinOnScrollEvent);\n                firstCall = false;\n            }\n        }\n    }\n    /**************** ADAPT MARGIN TO OTHERS ELEMENTS ****************/\n    function fixSkinOnScrollEvent(){\n        var y = sublime.window.pageYOffset,\n            newMarginTop;\n \n        if (y === 0) {\n            newMarginTop = maxHeightHeader;\n        } else if (y > 0 && y < (maxHeightHeader - minHeightHeader)) {\n            newMarginTop = Math.floor(maxHeightHeader - y);\n        } else {\n            newMarginTop = minHeightHeader;\n        }\n \n        if (isVideo && ayadsVideoLayer) {\n            ayadsVideoLayer.style.cssText = \'top:\' + newMarginTop + \'px !important;\';\n        } else {\n            body.style.cssText = \'background-position:center \' + newMarginTop + \'px !important;\';\n        }\n    }\n    /**************** CHECK IF ELEMENT IS PRESENT ****************/\n    function checkDivPresence(div, callback, bool){\n        myDiv = sublime.window.document.querySelector(div);\n        if (myDiv) {\n            if (bool) {\n                if (isVideo && div === \"#ayads-video-layer\") {\n                    ayadsVideoLayer = myDiv;\n                }\n                firstCall = true;\n            }\n            callback(myDiv);\n        } else {\n            top.sublime.timer.setTimeout(function(){\n                if (i > 30) {\n                    top.sublime.timer.clearTimeout(function() {\n                        checkDivPresence();\n                    });\n                } else {\n                checkDivPresence(div, callback, bool);\n                }\n                i += 1;\n            }, 100);\n        }\n    }\n    /**************** ADAPT MARGIN TO HEADER WITH A DYNAMIC HEIGHT (OPTION) ****************/\n    function getHeightDynamicHeader(headerDyn){\n        maxHeightHeader = headerDyn.offsetHeight;\n        fixSkin();\n    }\n    /**************** LAUNCH FUNCTION CHECK ****************/\n    //html.style.cssText = \'margin-top:\' + maxHeightHeader + \'px !important;\';\n    isChrome ? html.style.cssText = \'padding-top:\' + maxHeightHeader + \'px !important;\' : html.style.cssText = \'margin-top:\' + maxHeightHeader + \'px !important;\';\n    if (isVideo){\n        checkDivPresence(\'#ayads-video-layer\', fixSkin, true);\n    } else {\n        checkDivPresence(\'body\', fixSkin, true);\n    };\n    sublime.hook.register(\"event.cleanUp\", function(){\n        sublime.window.removeEventListener(\'scroll\', fixSkinOnScrollEvent);\n        isChrome ? html.style.paddingTop = \'\' : html.style.marginTop = \'\';\n    });\n    /* checkDivPresence(\'header\', getHeightDynamicHeader); */\n}\n/**************** LAUNCH GLOBAL FUNCTION ****************/\ninit();\n</script>",passback:"",mobilepassback:"",premium:0,block_cookies:0,scale:1.01,url:"www.footeo.com",width:0,mobile_setup:{footer_fixed:1},sticky_setup:{js:"",css:""},mobilecss:"",mobilejs:"",mobile_bottom_selector:"",mobile_bottom_append_position:"",tag_type:"waterfall",video_mute:0,video_autoplay:1,passback_render:"",sjs_debug:0,country:"FR",site_url:"www.footeo.com",company_id:1121,autoskinz:0,autovideo:0,supported_devices:["mobile","desktop"],main_category_name:"Sport",sub_category_name:"Football",nortb:0,novideo:0,noreminder:0,host:"www.footeo.com",cappings:{impressions:0,impressions_mobile:0,duration:86400},accepted_placement_types:{skinz:1},ignore_client_width:false,scaleCompat:101,continent:"EU",mmd:5,mmm:3}||{};var rpx_params=sublime.originWindow.rpx_params||sublime.window.rpx_params;var output={};output.rp_account=parts[0];output.rp_site=parts[1];output.rp_zonesize=parts[2];output.rp_adtype='jsonp';output.rp_callback=renderCallback;output.rp_smartfile='[SMART FILE URL]';output.rp_kw=(typeof rpx_params!=='undefined'&&typeof rpx_params.kw!=='undefined')?rpx_params.kw:'';output.rp_visitor=(typeof rpx_params!=='undefined'&&typeof rpx_params.visitor!=='undefined')?rpx_params.visitor:{};if(typeof rpx_params!=='undefined'&&typeof rpx_params.inventory!=='undefined'){output.rp_inventory=rpx_params.inventory;}else if(!sublime.ad.traffic_type||sublime.ad.traffic_type!=='pmp'){output.rp_inventory={zone_id:zone.id,category:zone.main_category_name+','+zone.sub_category_name,broadcasting:'',novideo:zone.novideo?1:0};}else{output.rp_inventory={main_channel:zone.main_category_name,sub_channel:zone.sub_category_name};}
output.url='https://ads.rubiconproject.com/ad/'+output.rp_account+'.js';return output;};var renderCallback=function(response){if(response.status!=="ok"){return sublime.ssp.errorAndGoNext({message:"sspRubicon: request error : "+sublime.ad.ssp_id,ssp_response:sublime.sspRequest.ssp_response.REQUEST_ERROR});}
if(sublime.isEmpty(response.ads)){return sublime.ssp.errorAndGoNext({message:"sspRubicon: empty response",ssp_response:sublime.sspRequest.ssp_response.EMPTY_RESPONSE});}
var ad,html='';for(var i=0;i<response.ads.length;i++){ad=response.ads[i];if(ad.status!=="ok"){continue;}
if(ad.type==="script"){html='<scr'+'ipt type="text/javascript">'+ad.script+'</scr'+'ipt>';}else if(ad.type==="html"){html=ad.html;}
if(html){return sublime.parseScript.write(html,{id:sublime.ssp.rubicon.iframeId+'-callback',iframeAttributes:{"data-ssp-name":sublime.ad.ssp_name,"data-ssp":sublime.ad.ssp_id},errorCallback:sublime.ssp.errorAndGoNext,successCallback:sublime.ssp.successAndDisplayAd,tryIntervalMs:100,tryRepeat:30,responseReader:sublime.ssp.rubicon.readResponse,iframeVars:getParameters()});}}
return sublime.ssp.errorAndGoNext({message:"sspRubicon: empty ads",ssp_response:sublime.sspRequest.ssp_response.EMPTY_RESPONSE});};sublime.ssp.rubicon.readResponse=function(iframeWindow){var output={responseFound:false,adFound:false,creativeAd:{}};var imgs=iframeWindow.document.getElementsByTagName('img');for(var i=0,img;i<imgs.length;i++){img=imgs[i];if(img.src.indexOf('secure-assets.rubiconproject.com/static/psa/')>-1){output.responseFound=true;return output;}}
output=sublime.parseScript.readResponseFromIframe(iframeWindow);return output;};sublime.ssp.smartadserver={name:'smartadserver',iframeId:'sublime-smartadserver-iframe',timeout:false};sublime.ssp.smartadserver.query=function(){var isUSCampaign=sublime.ad.campaign_id===5691;log.info(sublime.ssp.smartadserver.name+'.query: PROMISE');var source={url:sublime.sspRequest.smartadserverRequest.getDefaultSourceUrl(sublime.ad.ssp_id)};var options={isUSCampaign:isUSCampaign,acceptVideo:!0&&!sublime.detectDevice.isDataSaverEnabled()};return sublime.sspRequest.smartadserverRequest.call(source,options).then(function(response){if(response.success){if(response.vast){return displayVideoAd(response.vast);}else if(response.json){return displayHTMLAd(response.json.ad.creativeScriptRAW,response.pixels);}}
return sublime.ssp.errorAndGoNext({message:response.message,ssp_response:response.error_code,sspName:sublime.ssp.smartadserver.name});}).catch(function(e){log.error('Error with '+sublime.ssp.smartadserver.name+'call',{},e);return sublime.ssp.errorAndGoNext({message:'Error in the SmartAdServer Promise, error catched',ssp_response:sublime.sspRequest.ssp_response.UNKNOWN_ERROR,sspName:sublime.ssp.smartadserver.name,});});};function displayVideoAd(vastString){var xmlDocument=sublime.helpers.tryParseXml(vastString);return sublime.parseVast.decodeVastResponse(xmlDocument,{errorCallback:sublime.ssp.errorAndGoNext,successCallback:sublime.ssp.successAndDisplayAd});}
function displayHTMLAd(html,pixels){sublime.parseScript.write(html,{id:sublime.ssp.smartadserver.iframeId,iframeAttributes:{"data-ssp-name":sublime.ad.ssp_name,"data-ssp":sublime.ad.ssp_id},errorCallback:sublime.ssp.errorAndGoNext,successCallback:function(creativeAd){log.info("event.ssp.ok",creativeAd);if(pixels){log.log("Adding Smart pixels");sublime.analytics.setPixels(347,pixels);}
sublime.ad=merge(sublime.ad,creativeAd);sublime.ssp.fireSspPixel('sspOk',0);return sublime.adServer.displayAd();},tryIntervalMs:30,tryRepeat:50});}
sublime.ssp.sticky={name:'sticky',timeout:false};var customUrlsSspSticky={query:''};sublime.ssp.sticky.setQueryUrl=function(url){customUrlsSspSticky.query=url;};sublime.ssp.sticky.query=function(){var url;if(customUrlsSspSticky&&customUrlsSspSticky.query){url=customUrlsSspSticky.query;}else{url=sublime.ssp.sticky.getQueryUrl();}
sublime.parseVast.query(url,{sspName:'sticky',adId:sublime.ad.id,timeout:sublime.ssp.sticky.timeout,errorCallback:sublime.ssp.errorAndGoNext,successCallback:sublime.ssp.successAndDisplayAd});return true;};sublime.ssp.sticky.getQueryUrl=function(){var url='https://ads.stickyadstv.com/www/delivery/swfIndex.php?reqType=AdsSetup&protocolVersion=2.0&zoneId='+sublime.ad.ssp_id;url=sublime.macros.replace(url);url=sublime.sspRequest.stickyRequest.buildGDPRQuery(url);return url;};sublime.ssp.generic={name:'generic',iframeId:'sublime-generic-iframe',timeout:false};var customUrlsSspGeneric={query:''};sublime.ssp.generic.setQueryUrl=function(url){customUrlsSspGeneric.query=url;};sublime.ssp.generic.query=function(){if(sublime.ad.vast_url){sublime.parseVast.query(sublime.ad.vast_url,{timeout:sublime.ssp.generic.timeout});}else if(sublime.ad.script_url){sublime.parseScript.write('<script src="'+sublime.ad.script_url+'"></script>',{errorCallback:sublime.ssp.errorAndGoNext,successCallback:sublime.ssp.successAndDisplayAd,});}else{return sublime.ssp.errorAndGoNext({message:'Cannot use ssp generic without vast_url or script_url',ssp_response:sublime.sspRequest.ssp_response.PARAMETERS_ERROR});}};sublime.cleanUp=function cleanUp(){sublime.hook.call('event.cleanUp');sublime.timer.clearAllTimeouts();sublime.timer.clearAllIntervals();removeDomNodes();removeGlobals();};function removeDomNodes(){const elements=Array.prototype.slice.call(sublime.document.querySelectorAll('[id^="ayads"],'
+'[id^="sublime"],'
+'div[class*="celtraCloseButtonBackground"],'
+'[class*="celtra-expanded-ad"],'
+'[class*="celtra-placement-sticky"]'),0);log.info('SJS Cleanup','DOM Elements to remove:',elements.length);elements.forEach(function each(node){if(node.parentNode){node.parentNode.removeChild(node);}});}
function removeGlobals(){sublime.window.sublime=undefined;sublime.window.ayads=undefined;window.sublime=undefined;window.ayads=undefined;}
function runAdServer(){if(sublime.adServer){sublime.adServer.run();}}
if(sublime.isFeatureEnabled('sskzGDPR')){sublime.analytics.fire(347,'call');sublime.gdpr.run().then(function(consent){log.info('GDPR: process end',consent);runAdServer();}).catch(function(error){log.error('Waterfall runner on error',{},error);runAdServer();});}else{runAdServer();}})();